import{S as q,i as F,s as G,e as v,k,c as y,a as b,d as c,m as A,K as S,b as C,g as M,L as B,E as P,M as U,w as H,x as K,N as l,J as _,y as V,q as L,o as I,B as Y,l as w,O as x,p as J,v as X,P as z,t as Q,h as W,n as Z}from"../chunks/index-cd071420.js";import{N as ee}from"../chunks/NavigationButton-1ab31783.js";import{i as te,O as ae,h as re,a as se,M as oe,g as ie,D as ne}from"../chunks/three.module-3b78991f.js";import"../chunks/mdi-ff5aee52.js";function D(u){let t,o,i,n,e,a,s;return{c(){t=v("script"),i=k(),n=v("script"),this.h()},l(r){t=y(r,"SCRIPT",{src:!0});var h=b(t);h.forEach(c),i=A(r),n=y(r,"SCRIPT",{src:!0});var f=b(n);f.forEach(c),this.h()},h(){S(t.src,o="https://aframe.io/releases/1.0.0/aframe.min.js")||C(t,"src",o),S(n.src,e="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js")||C(n,"src",e)},m(r,h){M(r,t,h),M(r,i,h),M(r,n,h),a||(s=[B(t,"load",u[4]),B(n,"load",u[3])],a=!0)},p:P,d(r){r&&c(t),r&&c(i),r&&c(n),a=!1,U(s)}}}function O(u){let t,o,i,n,e,a,s,r,h,f,g,m,R,N,$,T;return i=new ee({props:{back:!0,to:"/scan/mapscanning",$$slots:{default:[le]},$$scope:{ctx:u}}}),{c(){t=v("a-scene"),o=v("div"),H(i.$$.fragment),n=k(),e=v("a-marker"),a=v("a-light"),s=k(),r=v("a-light"),h=k(),f=v("a-box"),g=k(),m=v("a-entity"),N=k(),$=v("a-entity"),this.h()},l(d){t=y(d,"A-SCENE",{embedded:!0,arjs:!0});var p=b(t);o=y(p,"DIV",{class:!0});var j=b(o);K(i.$$.fragment,j),j.forEach(c),n=A(p),e=y(p,"A-MARKER",{type:!0,value:!0});var E=b(e);a=y(E,"A-LIGHT",{position:!0,intensity:!0,type:!0}),b(a).forEach(c),s=A(E),r=y(E,"A-LIGHT",{position:!0,intensity:!0,type:!0}),b(r).forEach(c),h=A(E),f=y(E,"A-BOX",{position:!0,material:!0,color:!0}),b(f).forEach(c),g=A(E),m=y(E,"A-ENTITY",{"double-render":!0,"gltf-model":!0,position:!0,scale:!0,rotation:!0,id:!0}),b(m).forEach(c),E.forEach(c),N=A(p),$=y(p,"A-ENTITY",{camera:!0}),b($).forEach(c),p.forEach(c),this.h()},h(){C(o,"class","backButton svelte-eqywvh"),l(a,"position","0 3 0"),l(a,"intensity","2"),l(a,"type","point"),l(r,"position","-3 3 4"),l(r,"intensity","2"),l(r,"type","point"),l(f,"position","0 1 0"),l(f,"material","opacity: 0.5;"),l(f,"color","red"),l(m,"double-render",""),l(m,"gltf-model",R="url("+u[1]+")"),l(m,"position","1 0 -1"),l(m,"scale","0.0038 0.0038 0.0038"),l(m,"rotation","0 -90 0"),l(m,"id","model"),l(e,"type","barcode"),l(e,"value","1"),l($,"camera",""),l(t,"embedded",""),l(t,"arjs","trackingMethod: best; detectionMode: mono_and_matrix; matrixCodeType: 3x3;")},m(d,p){M(d,t,p),_(t,o),V(i,o,null),_(t,n),_(t,e),_(e,a),_(e,s),_(e,r),_(e,h),_(e,f),_(e,g),_(e,m),_(t,N),_(t,$),T=!0},p(d,p){const j={};p&128&&(j.$$scope={dirty:p,ctx:d}),i.$set(j),(!T||p&2&&R!==(R="url("+d[1]+")"))&&l(m,"gltf-model",R)},i(d){T||(L(i.$$.fragment,d),T=!0)},o(d){I(i.$$.fragment,d),T=!1},d(d){d&&c(t),Y(i)}}}function le(u){let t;return{c(){t=Q("Rescan image")},l(o){t=W(o,"Rescan image")},m(o,i){M(o,t,i)},d(o){o&&c(t)}}}function ce(u){let t,o,i,n,e=u[0]&&D(u),a=u[2]&&O(u);return{c(){e&&e.c(),t=w(),o=k(),a&&a.c(),i=w()},l(s){const r=x('[data-svelte="svelte-gras2l"]',document.head);e&&e.l(r),t=w(),r.forEach(c),o=A(s),a&&a.l(s),i=w()},m(s,r){e&&e.m(document.head,null),_(document.head,t),M(s,o,r),a&&a.m(s,r),M(s,i,r),n=!0},p(s,[r]){s[0]?e?e.p(s,r):(e=D(s),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null),s[2]?a?(a.p(s,r),r&4&&L(a,1)):(a=O(s),a.c(),L(a,1),a.m(i.parentNode,i)):a&&(Z(),I(a,1,1,()=>{a=null}),J())},i(s){n||(L(a),n=!0)},o(s){I(a),n=!1},d(s){e&&e.d(s),c(t),s&&c(o),a&&a.d(s),s&&c(i)}}}function ue(u,t,o){let i,n,e,a,s;const r=()=>o(6,a=!0),h=()=>{o(5,e=!0),AFRAME.registerComponent("double-render",{schema:{opacityFactor:{default:.5}},init(){this.traverseMesh.bind(this),this.el.addEventListener("model-loaded",()=>{this.traverseMesh()})},traverseMesh(){const f=this.el.getObject3D("mesh");!f||f.traverse(g=>{g.type=="Mesh"&&(g.material.side=ne)})}})};return X(async()=>{await te();const f=new ae({pixels_per_curve:re,parent_relations:se}),g=new oe(5,50,50,50,1),m=ie(f,g,2,.7,.7,4,1,30,30,10),R=new Blob([m],{type:"application/json"});o(1,s=URL.createObjectURL(R)),o(0,n=!0)}),z(()=>{delete AFRAME.components["double-render"]}),u.$$.update=()=>{u.$$.dirty&97&&o(2,i=e&&a&&n)},[n,s,i,r,h,e,a]}class pe extends q{constructor(t){super(),F(this,t,ue,ce,G,{})}}export{pe as default};
