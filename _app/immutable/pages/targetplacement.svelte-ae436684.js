import{S as q,i as y,s as A,w as k,x as v,y as S,E as G,q as u,o as m,B as w,J as W,v as J,e as T,c as C,a as D,d,b as B,g as h,$ as O,l as L,n as j,p as F,f as K,_ as Q,a0 as U,k as X,m as Y,t as E,h as H,j as Z}from"../chunks/index-b2cf3344.js";import{B as M,f as x,g as ee}from"../chunks/Button-2751e271.js";import{N as te}from"../chunks/NavigationButton-f564c9bc.js";import{P as re}from"../chunks/P5-ab5ed039.js";import{t as N,a as ne,g as oe,D as ae,c as se}from"../chunks/contourLineStore-92c658a7.js";import{P as le}from"../chunks/Page-bed51374.js";import"../chunks/preload-helper-60cab3ee.js";import"../chunks/index-082afcc0.js";function ie(o){let t,r;return t=new re({props:{sketch:o[0]}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){S(t,e,n),r=!0},p:G,i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function ce(o,t,r){let e,n,c;W(o,N,a=>r(5,e=a)),W(o,ne,a=>r(6,n=a)),W(o,oe,a=>r(7,c=a));let{foregroundWidth:s}=t,{foregroundHeight:l}=t,{targetSelected:i}=t,{curves:f}=t;function _(a){a.setup=()=>{a.createCanvas(s,l)},a.draw=()=>{var $,I;a.background(230),a.stroke(30),f.forEach(g=>{a.strokeWeight(4),a.noFill(),a.beginShape();for(let[P,z]of g)a.vertex(P,z);a.endShape(a.CLOSE)});const p=(I=($=c==null?void 0:c.craters)!=null?$:n)!=null?I:[];for(let g of p)a.strokeWeight(1),a.stroke("#f2682c"),a.fill("#f2682c"),a.ellipse(g[0],g[1],50,50),a.noFill(),a.strokeWeight(.5),a.ellipse(g[0],g[1],150,150);let b=20;for(let g=0;g<e.length;g++){let P=e[g];P.update(a,p,75,e,50,g),P.drawCircle(a,b,g)}},a.mousePressed=()=>{if(!(e!=null&&e.length))return;let p=!1;for(let b=0;b<e.length;b++){let $=!1;e[b].deselect(),p||($=e[b].pressed(a),p=$),$&&r(1,i=b)}},a.mouseReleased=()=>{if(!!(e!=null&&e.length)){for(let p of e)p.released();N.set(e)}}}return o.$$set=a=>{"foregroundWidth"in a&&r(2,s=a.foregroundWidth),"foregroundHeight"in a&&r(3,l=a.foregroundHeight),"targetSelected"in a&&r(1,i=a.targetSelected),"curves"in a&&r(4,f=a.curves)},[_,i,s,l,f]}class fe extends q{constructor(t){super(),y(this,t,ce,ie,A,{foregroundWidth:2,foregroundHeight:3,targetSelected:1,curves:4})}}function R(o){let t,r,e,n;function c(l){o[5](l)}let s={foregroundHeight:o[6],foregroundWidth:o[7],curves:o[1].curves};return o[0]!==void 0&&(s.targetSelected=o[0]),r=new fe({props:s}),Q.push(()=>U(r,"targetSelected",c)),{c(){t=T("div"),k(r.$$.fragment),this.h()},l(l){t=C(l,"DIV",{class:!0});var i=D(t);v(r.$$.fragment,i),i.forEach(d),this.h()},h(){B(t,"class","sketch svelte-r0eupj")},m(l,i){h(l,t,i),S(r,t,null),n=!0},p(l,i){const f={};i&64&&(f.foregroundHeight=l[6]),i&128&&(f.foregroundWidth=l[7]),i&2&&(f.curves=l[1].curves),!e&&i&1&&(e=!0,f.targetSelected=l[0],O(()=>e=!1)),r.$set(f)},i(l){n||(u(r.$$.fragment,l),n=!0)},o(l){m(r.$$.fragment,l),n=!1},d(l){l&&d(t),w(r)}}}function ue(o){let t,r,e=o[1]&&R(o);return{c(){e&&e.c(),t=L()},l(n){e&&e.l(n),t=L()},m(n,c){e&&e.m(n,c),h(n,t,c),r=!0},p(n,c){n[1]?e?(e.p(n,c),c&2&&u(e,1)):(e=R(n),e.c(),u(e,1),e.m(t.parentNode,t)):e&&(j(),m(e,1,1,()=>{e=null}),F())},i(n){r||(u(e),r=!0)},o(n){m(e),r=!1},d(n){e&&e.d(n),n&&d(t)}}}function ge(o){let t;return{c(){t=T("div"),this.h()},l(r){t=C(r,"DIV",{slot:!0,style:!0}),D(t).forEach(d),this.h()},h(){B(t,"slot","background"),K(t,"background","#aaa")},m(r,e){h(r,t,e)},p:G,d(r){r&&d(t)}}}function me(o){let t,r;return t=new te({props:{back:!0,to:"/scan/mapscanning",$$slots:{default:[_e]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){S(t,e,n),r=!0},p(e,n){const c={};n&256&&(c.$$scope={dirty:n,ctx:e}),t.$set(c)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function de(o){let t,r,e,n=o[0]!=-1&&V(o);function c(){return o[4](o[7],o[6])}return r=new M({props:{icon:x,$$slots:{default:[pe]},$$scope:{ctx:o}}}),r.$on("click",c),{c(){n&&n.c(),t=X(),k(r.$$.fragment)},l(s){n&&n.l(s),t=Y(s),v(r.$$.fragment,s)},m(s,l){n&&n.m(s,l),h(s,t,l),S(r,s,l),e=!0},p(s,l){o=s,o[0]!=-1?n?(n.p(o,l),l&1&&u(n,1)):(n=V(o),n.c(),u(n,1),n.m(t.parentNode,t)):n&&(j(),m(n,1,1,()=>{n=null}),F());const i={};l&256&&(i.$$scope={dirty:l,ctx:o}),r.$set(i)},i(s){e||(u(n),u(r.$$.fragment,s),e=!0)},o(s){m(n),m(r.$$.fragment,s),e=!1},d(s){n&&n.d(s),s&&d(t),w(r,s)}}}function _e(o){let t;return{c(){t=E("No image found. Go to map scanning")},l(r){t=H(r,"No image found. Go to map scanning")},m(r,e){h(r,t,e)},d(r){r&&d(t)}}}function V(o){let t,r;return t=new M({props:{secondary:!0,icon:ee,$$slots:{default:[he]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){S(t,e,n),r=!0},p(e,n){const c={};n&257&&(c.$$scope={dirty:n,ctx:e}),t.$set(c)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function he(o){let t,r;return{c(){t=E("Remove steam turbine #"),r=E(o[0])},l(e){t=H(e,"Remove steam turbine #"),r=H(e,o[0])},m(e,n){h(e,t,n),h(e,r,n)},p(e,n){n&1&&Z(r,e[0])},d(e){e&&d(t),e&&d(r)}}}function pe(o){let t;return{c(){t=E("Add steam turbine")},l(r){t=H(r,"Add steam turbine")},m(r,e){h(r,t,e)},d(r){r&&d(t)}}}function be(o){let t,r,e,n;const c=[de,me],s=[];function l(i,f){return i[1]?0:1}return r=l(o),e=s[r]=c[r](o),{c(){t=T("div"),e.c(),this.h()},l(i){t=C(i,"DIV",{slot:!0});var f=D(t);e.l(f),f.forEach(d),this.h()},h(){B(t,"slot","footer")},m(i,f){h(i,t,f),s[r].m(t,null),n=!0},p(i,f){let _=r;r=l(i),r===_?s[r].p(i,f):(j(),m(s[_],1,1,()=>{s[_]=null}),F(),e=s[r],e?e.p(i,f):(e=s[r]=c[r](i),e.c()),u(e,1),e.m(t,null))},i(i){n||(u(e),n=!0)},o(i){m(e),n=!1},d(i){i&&d(t),s[r].d()}}}function $e(o){let t,r;return t=new le({props:{title:"Placing steam turbines",$$slots:{footer:[be,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],background:[ge,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],default:[ue,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)]},$$scope:{ctx:o}}}),{c(){k(t.$$.fragment)},l(e){v(t.$$.fragment,e)},m(e,n){S(t,e,n),r=!0},p(e,[n]){const c={};n&451&&(c.$$scope={dirty:n,ctx:e}),t.$set(c)},i(e){r||(u(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){w(t,e)}}}function ke(o,t,r){let e;W(o,se,f=>r(1,e=f));let n=-1;function c(f,_){const a=new ae(f,_,20);a.enableSelection(),N.add(a)}function s(){n!=-1&&(N.remove(n),r(0,n=-1))}J(()=>{});const l=(f,_)=>c(f/2,_/2);function i(f){n=f,r(0,n)}return[n,e,c,s,l,i]}class Te extends q{constructor(t){super(),y(this,t,ke,$e,A,{})}}export{Te as default};
