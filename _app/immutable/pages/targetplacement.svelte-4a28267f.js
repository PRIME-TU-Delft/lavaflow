import{S as V,i as q,s as A,w as $,x as k,y as b,E as G,q as g,o as m,B as v,J as B,v as O,l as F,g as _,n as E,p as H,d,e as N,c as T,a as C,b as D,f as Z,k as K,m as Q,t as S,h as w,j as U,Z as X,_ as Y,$ as L}from"../chunks/index-9cd2e54e.js";import{B as M,f as x,g as ee}from"../chunks/Button-5d6b26fc.js";import{N as y}from"../chunks/NavigationButton-b6d3fe29.js";import{P as te}from"../chunks/P5-ccea3d7d.js";import{t as W,g as re}from"../chunks/gltfStore-4583681c.js";import{P as ne}from"../chunks/Page-646f45ef.js";import{c as oe}from"../chunks/contourLineStore-d37fb8d9.js";import{D as ae}from"../chunks/draggable-09cd7880.js";import"../chunks/preload-helper-60cab3ee.js";import"../chunks/index-6c269418.js";function le(o){let t,r;return t=new te({props:{sketch:o[0]}}),{c(){$(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){b(t,e,n),r=!0},p:G,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function se(o,t,r){let e,n;B(o,W,a=>r(5,e=a)),B(o,re,a=>r(6,n=a));let{foregroundWidth:i}=t,{foregroundHeight:l}=t,{targetSelected:f}=t,{curves:s}=t;console.log({foregroundWidth:i,foregroundHeight:l});function c(a){a.setup=()=>{a.createCanvas(i,l)},a.draw=()=>{var p;if(a.background(230),a.stroke(30),s.forEach((u,P)=>{a.strokeWeight(3),a.noFill(),a.beginShape();for(let j of u){let z=j[0],J=j[1];a.vertex(z,J)}a.endShape(a.CLOSE)}),(p=n.craters)!=null&&p.length)for(let u=0;u<n.craters.length;u++)a.strokeWeight(1),a.stroke("#f2682c"),a.fill("#f2682c"),a.ellipse(n.craters[u][0],n.craters[u][1],50,50),a.noFill(),a.strokeWeight(.5),a.ellipse(n.craters[u][0],n.craters[u][1],150,150);let h=20;if(e!=null&&e.length)for(let u=0;u<e.length;u++){let P=e[u];P.update(a,n.craters,75,e,50,u),P.drawCircle(a,h,u)}},a.mousePressed=()=>{if(!(e!=null&&e.length))return;let h=!1;for(let p=0;p<e.length;p++){let u=!1;e[p].deselect(),h||(u=e[p].pressed(a),h=u),u&&r(1,f=p)}},a.mouseReleased=()=>{if(!!(e!=null&&e.length))for(let h of e)h.released()}}return o.$$set=a=>{"foregroundWidth"in a&&r(2,i=a.foregroundWidth),"foregroundHeight"in a&&r(3,l=a.foregroundHeight),"targetSelected"in a&&r(1,f=a.targetSelected),"curves"in a&&r(4,s=a.curves)},[c,f,i,l,s]}class ie extends V{constructor(t){super(),q(this,t,se,le,A,{foregroundWidth:2,foregroundHeight:3,targetSelected:1,curves:4})}}function fe(o){let t,r;return t=new y({props:{to:"/scan/mapscanning",$$slots:{default:[ue]},$$scope:{ctx:o}}}),{c(){$(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){b(t,e,n),r=!0},p(e,n){const i={};n&256&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function ce(o){let t,r,e,n;function i(f){o[5](f)}let l={foregroundHeight:o[6],foregroundWidth:o[7],curves:o[1].curves};return o[0]!==void 0&&(l.targetSelected=o[0]),r=new ie({props:l}),X.push(()=>Y(r,"targetSelected",i)),{c(){t=N("div"),$(r.$$.fragment),this.h()},l(f){t=T(f,"DIV",{class:!0});var s=C(t);k(r.$$.fragment,s),s.forEach(d),this.h()},h(){D(t,"class","sketch svelte-r0eupj")},m(f,s){_(f,t,s),b(r,t,null),n=!0},p(f,s){const c={};s&64&&(c.foregroundHeight=f[6]),s&128&&(c.foregroundWidth=f[7]),s&2&&(c.curves=f[1].curves),!e&&s&1&&(e=!0,c.targetSelected=f[0],L(()=>e=!1)),r.$set(c)},i(f){n||(g(r.$$.fragment,f),n=!0)},o(f){m(r.$$.fragment,f),n=!1},d(f){f&&d(t),v(r)}}}function ue(o){let t;return{c(){t=S("No image found. Go to map scanning")},l(r){t=w(r,"No image found. Go to map scanning")},m(r,e){_(r,t,e)},d(r){r&&d(t)}}}function ge(o){let t,r,e,n;const i=[ce,fe],l=[];function f(s,c){return s[1]?0:1}return t=f(o),r=l[t]=i[t](o),{c(){r.c(),e=F()},l(s){r.l(s),e=F()},m(s,c){l[t].m(s,c),_(s,e,c),n=!0},p(s,c){let a=t;t=f(s),t===a?l[t].p(s,c):(E(),m(l[a],1,1,()=>{l[a]=null}),H(),r=l[t],r?r.p(s,c):(r=l[t]=i[t](s),r.c()),g(r,1),r.m(e.parentNode,e))},i(s){n||(g(r),n=!0)},o(s){m(r),n=!1},d(s){l[t].d(s),s&&d(e)}}}function me(o){let t;return{c(){t=S("Back to visualise")},l(r){t=w(r,"Back to visualise")},m(r,e){_(r,t,e)},d(r){r&&d(t)}}}function de(o){let t,r;return t=new y({props:{slot:"headerButton",to:"demo",back:!0,$$slots:{default:[me]},$$scope:{ctx:o}}}),{c(){$(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){b(t,e,n),r=!0},p(e,n){const i={};n&256&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function _e(o){let t;return{c(){t=N("div"),this.h()},l(r){t=T(r,"DIV",{slot:!0,style:!0}),C(t).forEach(d),this.h()},h(){D(t,"slot","background"),Z(t,"background","#aaa")},m(r,e){_(r,t,e)},p:G,d(r){r&&d(t)}}}function I(o){let t,r,e,n=o[0]!=-1&&R(o);function i(){return o[4](o[7],o[6])}return r=new M({props:{icon:x,$$slots:{default:[pe]},$$scope:{ctx:o}}}),r.$on("click",i),{c(){n&&n.c(),t=K(),$(r.$$.fragment)},l(l){n&&n.l(l),t=Q(l),k(r.$$.fragment,l)},m(l,f){n&&n.m(l,f),_(l,t,f),b(r,l,f),e=!0},p(l,f){o=l,o[0]!=-1?n?(n.p(o,f),f&1&&g(n,1)):(n=R(o),n.c(),g(n,1),n.m(t.parentNode,t)):n&&(E(),m(n,1,1,()=>{n=null}),H());const s={};f&256&&(s.$$scope={dirty:f,ctx:o}),r.$set(s)},i(l){e||(g(n),g(r.$$.fragment,l),e=!0)},o(l){m(n),m(r.$$.fragment,l),e=!1},d(l){n&&n.d(l),l&&d(t),v(r,l)}}}function R(o){let t,r;return t=new M({props:{secondary:!0,icon:ee,$$slots:{default:[he]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){$(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){b(t,e,n),r=!0},p(e,n){const i={};n&257&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function he(o){let t,r;return{c(){t=S("Remove target #"),r=S(o[0])},l(e){t=w(e,"Remove target #"),r=w(e,o[0])},m(e,n){_(e,t,n),_(e,r,n)},p(e,n){n&1&&U(r,e[0])},d(e){e&&d(t),e&&d(r)}}}function pe(o){let t;return{c(){t=S("Add target")},l(r){t=w(r,"Add target")},m(r,e){_(r,t,e)},d(r){r&&d(t)}}}function $e(o){let t,r,e=o[1]&&I(o);return{c(){t=N("div"),e&&e.c(),this.h()},l(n){t=T(n,"DIV",{slot:!0});var i=C(t);e&&e.l(i),i.forEach(d),this.h()},h(){D(t,"slot","footer")},m(n,i){_(n,t,i),e&&e.m(t,null),r=!0},p(n,i){n[1]?e?(e.p(n,i),i&2&&g(e,1)):(e=I(n),e.c(),g(e,1),e.m(t,null)):e&&(E(),m(e,1,1,()=>{e=null}),H())},i(n){r||(g(e),r=!0)},o(n){m(e),r=!1},d(n){n&&d(t),e&&e.d()}}}function ke(o){let t,r;return t=new ne({props:{title:"image transformation",$$slots:{footer:[$e,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],background:[_e,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],headerButton:[de,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],default:[ge,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)]},$$scope:{ctx:o}}}),{c(){$(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,n){b(t,e,n),r=!0},p(e,[n]){const i={};n&451&&(i.$$scope={dirty:n,ctx:e}),t.$set(i)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function be(o,t,r){let e;B(o,oe,c=>r(1,e=c));let n=-1;function i(c,a){const h=new ae(c,a,20);W.add(h)}function l(){n!=-1&&(W.remove(n),r(0,n=-1))}O(()=>{});const f=(c,a)=>i(c/2,a/2);function s(c){n=c,r(0,n)}return[n,e,i,l,f,s]}class Ce extends V{constructor(t){super(),q(this,t,be,ke,A,{})}}export{Ce as default};
