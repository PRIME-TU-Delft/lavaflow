import{S as A,i as F,s as G,w as h,x as k,y as b,E as J,q as u,o as m,B as v,J as P,v as Z,l as R,g as _,n as H,p as N,d,e as T,c as D,a as C,b as E,k as K,m as O,t as w,h as I,j as Q,Z as U,_ as X,$ as Y}from"../chunks/index-9cd2e54e.js";import{B as M,f as y,g as L}from"../chunks/Button-5d6b26fc.js";import{N as z}from"../chunks/NavigationButton-b6d3fe29.js";import{I as x}from"../chunks/Image-31fe99c5.js";import{P as ee}from"../chunks/P5-ccea3d7d.js";import{p as B,P as te,d as re}from"../chunks/imageStore-7d4b7149.js";import{t as W,g as ne}from"../chunks/gltfStore-4583681c.js";import{D as ae}from"../chunks/draggable-37e57f73.js";import"../chunks/preload-helper-60cab3ee.js";import"../chunks/index-6c269418.js";function oe(a){let t,n;return t=new ee({props:{sketch:a[0]}}),{c(){h(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),n=!0},p:J,i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function le(a,t,n){let e,r,o;P(a,W,f=>n(5,e=f)),P(a,ne,f=>n(6,r=f)),P(a,B,f=>n(7,o=f));let{foregroundWidth:l}=t,{foregroundHeight:s}=t,{targetSelected:i}=t;console.log({foregroundWidth:l,foregroundHeight:s});let c;function p(f){f.preload=()=>{o&&(c=f.loadImage(o))},f.setup=()=>{f.createCanvas(l,s)},f.draw=()=>{var $;if(!c)return;if(f.image(c,0,0,l,s),($=r.craters)!=null&&$.length)for(let g=0;g<r.craters.length;g++)f.strokeWeight(1),f.stroke("#f2682c"),f.fill("#f2682c"),f.ellipse(r.craters[g][0],r.craters[g][1],50,50),f.noFill(),f.strokeWeight(.5),f.ellipse(r.craters[g][0],r.craters[g][1],150,150);let S=20;if(e!=null&&e.length)for(let g=0;g<e.length;g++){let j=e[g];j.update(f,r.craters,75),j.drawCircle(f,S,g)}},f.mousePressed=()=>{if(!(e!=null&&e.length))return;let S=!1;for(let $=0;$<e.length;$++){let g=!1;e[$].deselect(),S||(g=e[$].pressed(f),S=g),g&&n(1,i=$)}},f.mouseReleased=()=>{if(!!(e!=null&&e.length))for(let S of e)S.released()}}return a.$$set=f=>{"foregroundWidth"in f&&n(2,l=f.foregroundWidth),"foregroundHeight"in f&&n(3,s=f.foregroundHeight),"targetSelected"in f&&n(1,i=f.targetSelected)},[p,i,l,s]}class se extends A{constructor(t){super(),F(this,t,le,oe,G,{foregroundWidth:2,foregroundHeight:3,targetSelected:1})}}function ie(a){let t,n;return t=new z({props:{to:"/scan/mapscanning",$$slots:{default:[ce]},$$scope:{ctx:a}}}),{c(){h(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),n=!0},p(e,r){const o={};r&256&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function fe(a){let t,n,e,r;function o(s){a[5](s)}let l={foregroundHeight:a[6],foregroundWidth:a[7]};return a[0]!==void 0&&(l.targetSelected=a[0]),n=new se({props:l}),U.push(()=>X(n,"targetSelected",o)),{c(){t=T("div"),h(n.$$.fragment),this.h()},l(s){t=D(s,"DIV",{class:!0});var i=C(t);k(n.$$.fragment,i),i.forEach(d),this.h()},h(){E(t,"class","sketch svelte-r0eupj")},m(s,i){_(s,t,i),b(n,t,null),r=!0},p(s,i){const c={};i&64&&(c.foregroundHeight=s[6]),i&128&&(c.foregroundWidth=s[7]),!e&&i&1&&(e=!0,c.targetSelected=s[0],Y(()=>e=!1)),n.$set(c)},i(s){r||(u(n.$$.fragment,s),r=!0)},o(s){m(n.$$.fragment,s),r=!1},d(s){s&&d(t),v(n)}}}function ce(a){let t;return{c(){t=w("No image found. Go to map scanning")},l(n){t=I(n,"No image found. Go to map scanning")},m(n,e){_(n,t,e)},d(n){n&&d(t)}}}function ue(a){let t,n,e,r;const o=[fe,ie],l=[];function s(i,c){return i[1]?0:1}return t=s(a),n=l[t]=o[t](a),{c(){n.c(),e=R()},l(i){n.l(i),e=R()},m(i,c){l[t].m(i,c),_(i,e,c),r=!0},p(i,c){let p=t;t=s(i),t===p?l[t].p(i,c):(H(),m(l[p],1,1,()=>{l[p]=null}),N(),n=l[t],n?n.p(i,c):(n=l[t]=o[t](i),n.c()),u(n,1),n.m(e.parentNode,e))},i(i){r||(u(n),r=!0)},o(i){m(n),r=!1},d(i){l[t].d(i),i&&d(e)}}}function ge(a){let t;return{c(){t=w("Back to visualise")},l(n){t=I(n,"Back to visualise")},m(n,e){_(n,t,e)},d(n){n&&d(t)}}}function me(a){let t,n;return t=new z({props:{slot:"headerButton",to:"demo",back:!0,$$slots:{default:[ge]},$$scope:{ctx:a}}}),{c(){h(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),n=!0},p(e,r){const o={};r&256&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function de(a){let t,n,e;return n=new x({props:{src:a[1],alt:"background"}}),{c(){t=T("div"),h(n.$$.fragment),this.h()},l(r){t=D(r,"DIV",{slot:!0});var o=C(t);k(n.$$.fragment,o),o.forEach(d),this.h()},h(){E(t,"slot","background")},m(r,o){_(r,t,o),b(n,t,null),e=!0},p(r,o){const l={};o&2&&(l.src=r[1]),n.$set(l)},i(r){e||(u(n.$$.fragment,r),e=!0)},o(r){m(n.$$.fragment,r),e=!1},d(r){r&&d(t),v(n)}}}function V(a){let t,n,e,r=a[0]!=-1&&q(a);function o(){return a[4](a[7],a[6])}return n=new M({props:{icon:y,$$slots:{default:[pe]},$$scope:{ctx:a}}}),n.$on("click",o),{c(){r&&r.c(),t=K(),h(n.$$.fragment)},l(l){r&&r.l(l),t=O(l),k(n.$$.fragment,l)},m(l,s){r&&r.m(l,s),_(l,t,s),b(n,l,s),e=!0},p(l,s){a=l,a[0]!=-1?r?(r.p(a,s),s&1&&u(r,1)):(r=q(a),r.c(),u(r,1),r.m(t.parentNode,t)):r&&(H(),m(r,1,1,()=>{r=null}),N());const i={};s&256&&(i.$$scope={dirty:s,ctx:a}),n.$set(i)},i(l){e||(u(r),u(n.$$.fragment,l),e=!0)},o(l){m(r),m(n.$$.fragment,l),e=!1},d(l){r&&r.d(l),l&&d(t),v(n,l)}}}function q(a){let t,n;return t=new M({props:{secondary:!0,icon:L,$$slots:{default:[_e]},$$scope:{ctx:a}}}),t.$on("click",a[3]),{c(){h(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),n=!0},p(e,r){const o={};r&257&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function _e(a){let t,n;return{c(){t=w("Remove target #"),n=w(a[0])},l(e){t=I(e,"Remove target #"),n=I(e,a[0])},m(e,r){_(e,t,r),_(e,n,r)},p(e,r){r&1&&Q(n,e[0])},d(e){e&&d(t),e&&d(n)}}}function pe(a){let t;return{c(){t=w("Add target")},l(n){t=I(n,"Add target")},m(n,e){_(n,t,e)},d(n){n&&d(t)}}}function $e(a){let t,n,e=a[1]&&V(a);return{c(){t=T("div"),e&&e.c(),this.h()},l(r){t=D(r,"DIV",{slot:!0});var o=C(t);e&&e.l(o),o.forEach(d),this.h()},h(){E(t,"slot","footer")},m(r,o){_(r,t,o),e&&e.m(t,null),n=!0},p(r,o){r[1]?e?(e.p(r,o),o&2&&u(e,1)):(e=V(r),e.c(),u(e,1),e.m(t,null)):e&&(H(),m(e,1,1,()=>{e=null}),N())},i(r){n||(u(e),n=!0)},o(r){m(e),n=!1},d(r){r&&d(t),e&&e.d()}}}function he(a){let t,n;return t=new te({props:{title:"image transformation",$$slots:{footer:[$e,({foregroundHeight:e,foregroundWidth:r})=>({6:e,7:r}),({foregroundHeight:e,foregroundWidth:r})=>(e?64:0)|(r?128:0)],background:[de,({foregroundHeight:e,foregroundWidth:r})=>({6:e,7:r}),({foregroundHeight:e,foregroundWidth:r})=>(e?64:0)|(r?128:0)],headerButton:[me,({foregroundHeight:e,foregroundWidth:r})=>({6:e,7:r}),({foregroundHeight:e,foregroundWidth:r})=>(e?64:0)|(r?128:0)],default:[ue,({foregroundHeight:e,foregroundWidth:r})=>({6:e,7:r}),({foregroundHeight:e,foregroundWidth:r})=>(e?64:0)|(r?128:0)]},$$scope:{ctx:a}}}),{c(){h(t.$$.fragment)},l(e){k(t.$$.fragment,e)},m(e,r){b(t,e,r),n=!0},p(e,[r]){const o={};r&451&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(u(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){v(t,e)}}}function ke(a,t,n){let e;P(a,B,c=>n(1,e=c));let r=-1;function o(c,p){const f=new ae(c,p,20);W.add(f)}function l(){r!=-1&&(W.remove(r),n(0,r=-1))}Z(()=>{e||B.set(re)});const s=(c,p)=>o(c/2,p/2);function i(c){r=c,n(0,r)}return[r,e,o,l,s,i]}class Te extends A{constructor(t){super(),F(this,t,ke,he,G,{})}}export{Te as default};
