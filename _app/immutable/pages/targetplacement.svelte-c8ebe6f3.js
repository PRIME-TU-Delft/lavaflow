import{S as A,i as M,s as j,w as k,x as w,y as S,E as D,q as _,o as h,B as y,J as C,e as I,t as E,k as Y,c as P,a as H,h as T,d as g,m as B,b as N,g as v,K as W,X as G,Y as O,W as J,v as U,f as Z,n as K,p as X,j as x}from"../chunks/index-12998d59.js";import{B as F,c as ee,e as te,f as ne}from"../chunks/Button-1b490879.js";import{N as re}from"../chunks/NavigationButton-22a7797a.js";import{P as se}from"../chunks/P5-7efad7e0.js";import{t as V,a as oe,g as ae,D as le,c as ie}from"../chunks/contourLineStore-3828d678.js";import{d as ce}from"../chunks/difficultyStore-96061690.js";import{P as ue}from"../chunks/Page-503a883b.js";import{M as fe}from"../chunks/Modal-ac7c73c5.js";import"../chunks/preload-helper-60cab3ee.js";import"../chunks/index-d282005e.js";function me(a){let e,n;return e=new se({props:{sketch:a[0]}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p:D,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function de(a,e,n){let t,r,i,c;C(a,V,o=>n(5,t=o)),C(a,ce,o=>n(6,r=o)),C(a,oe,o=>n(7,i=o)),C(a,ae,o=>n(8,c=o));let{foregroundWidth:l}=e,{foregroundHeight:s}=e,{targetSelected:u}=e,{curves:f}=e;function d(o){o.setup=()=>{o.createCanvas(l,s)},o.draw=()=>{var L,q;o.background(230),o.stroke(30),f.forEach(p=>{o.strokeWeight(4),o.noFill(),o.beginShape();for(let[R,Q]of p)o.vertex(R,Q);o.endShape(o.CLOSE)});const m=(q=(L=c==null?void 0:c.craters)!=null?L:i)!=null?q:[];for(let p of m)o.strokeWeight(1),o.stroke("#f2682c"),o.fill("#f2682c"),o.ellipse(p[0],p[1],50,50),o.noFill(),o.strokeWeight(.5),o.ellipse(p[0],p[1],150,150);let $=20;for(let p=0;p<t.length;p++){let R=t[p];R.update(o,m,75,t,r.min_steam_turbine_separation,p),R.drawCircle(o,$,p)}let b="";t.length<r.min_steam_turbines?b="You must place at least "+r.min_steam_turbines+" steam turbines":t.length>r.max_steam_turbines&&(b="You may maximally place "+r.max_steam_turbines+" steam turbines"),(t.length<r.min_steam_turbines||t.length>r.max_steam_turbines)&&(o.noStroke(),o.fill(51),o.textSize(15),o.textAlign(o.CENTER),o.textWidth(b),o.rectMode(o.CENTER),o.rect(o.width/2,60,300,30),o.strokeWeight(1),o.fill(255),o.text(b,o.width/2,65))},o.mousePressed=()=>{if(!(t!=null&&t.length))return;let m=!1;for(let $=0;$<t.length;$++){let b=!1;t[$].deselect(),m||(b=t[$].pressed(o),m=b),b&&n(1,u=$)}},o.mouseReleased=()=>{if(!!(t!=null&&t.length)){for(let m of t)m.released();V.set(t)}}}return a.$$set=o=>{"foregroundWidth"in o&&n(2,l=o.foregroundWidth),"foregroundHeight"in o&&n(3,s=o.foregroundHeight),"targetSelected"in o&&n(1,u=o.targetSelected),"curves"in o&&n(4,f=o.curves)},[d,u,l,s,f]}class ge extends A{constructor(e){super(),M(this,e,de,me,j,{foregroundWidth:2,foregroundHeight:3,targetSelected:1,curves:4})}}function _e(a){let e,n,t,r,i,c;return{c(){e=I("div"),n=I("h2"),t=E("Instructions"),r=Y(),i=I("div"),c=E(`Add targets where you think the lava will flow. You can't place targets too close to 
		the craters or too close to other targets. How close you can place targets to craters
		and other targets depends on the difficulty mode you selected. There is also a minimum
		amount of targets you need to place, which also depends on your difficulty mode. You
		can never place more than 10 targets.`),this.h()},l(l){e=P(l,"DIV",{class:!0});var s=H(e);n=P(s,"H2",{});var u=H(n);t=T(u,"Instructions"),u.forEach(g),r=B(s),i=P(s,"DIV",{class:!0});var f=H(i);c=T(f,`Add targets where you think the lava will flow. You can't place targets too close to 
		the craters or too close to other targets. How close you can place targets to craters
		and other targets depends on the difficulty mode you selected. There is also a minimum
		amount of targets you need to place, which also depends on your difficulty mode. You
		can never place more than 10 targets.`),f.forEach(g),s.forEach(g),this.h()},h(){N(i,"class","instruction"),N(e,"class","instructions svelte-tryer5")},m(l,s){v(l,e,s),W(e,n),W(n,t),W(e,r),W(e,i),W(i,c)},p:D,i:D,o:D,d(l){l&&g(e)}}}class he extends A{constructor(e){super(),M(this,e,null,_e,j,{})}}function pe(a){let e,n;return e=new he({}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function $e(a){let e,n,t,r;function i(l){a[9](l)}let c={foregroundHeight:a[10],foregroundWidth:a[11],curves:a[2].curves};return a[0]!==void 0&&(c.targetSelected=a[0]),n=new ge({props:c}),G.push(()=>O(n,"targetSelected",i)),{c(){e=I("div"),k(n.$$.fragment),this.h()},l(l){e=P(l,"DIV",{class:!0});var s=H(e);w(n.$$.fragment,s),s.forEach(g),this.h()},h(){N(e,"class","sketch svelte-r0eupj")},m(l,s){v(l,e,s),S(n,e,null),r=!0},p(l,s){const u={};s&1024&&(u.foregroundHeight=l[10]),s&2048&&(u.foregroundWidth=l[11]),s&4&&(u.curves=l[2].curves),!t&&s&1&&(t=!0,u.targetSelected=l[0],J(()=>t=!1)),n.$set(u)},i(l){r||(_(n.$$.fragment,l),r=!0)},o(l){h(n.$$.fragment,l),r=!1},d(l){l&&g(e),y(n)}}}function be(a){let e;return{c(){e=I("div"),this.h()},l(n){e=P(n,"DIV",{slot:!0,style:!0}),H(e).forEach(g),this.h()},h(){N(e,"slot","background"),Z(e,"background","#aaa")},m(n,t){v(n,e,t)},p:D,d(n){n&&g(e)}}}function ve(a){let e;return{c(){e=E("Read instructions")},l(n){e=T(n,"Read instructions")},m(n,t){v(n,e,t)},d(n){n&&g(e)}}}function ke(a){let e,n;return e=new re({props:{back:!0,to:"/scan/mapscanning",$$slots:{default:[Se]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const i={};r&4096&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function we(a){let e,n,t,r=a[0]!=-1&&z(a);function i(){return a[8](a[11],a[10])}return n=new F({props:{icon:te,$$slots:{default:[Ee]},$$scope:{ctx:a}}}),n.$on("click",i),{c(){r&&r.c(),e=Y(),k(n.$$.fragment)},l(c){r&&r.l(c),e=B(c),w(n.$$.fragment,c)},m(c,l){r&&r.m(c,l),v(c,e,l),S(n,c,l),t=!0},p(c,l){a=c,a[0]!=-1?r?(r.p(a,l),l&1&&_(r,1)):(r=z(a),r.c(),_(r,1),r.m(e.parentNode,e)):r&&(K(),h(r,1,1,()=>{r=null}),X());const s={};l&4096&&(s.$$scope={dirty:l,ctx:a}),n.$set(s)},i(c){t||(_(r),_(n.$$.fragment,c),t=!0)},o(c){h(r),h(n.$$.fragment,c),t=!1},d(c){r&&r.d(c),c&&g(e),y(n,c)}}}function Se(a){let e;return{c(){e=E("No image found. Go to map scanning")},l(n){e=T(n,"No image found. Go to map scanning")},m(n,t){v(n,e,t)},d(n){n&&g(e)}}}function z(a){let e,n;return e=new F({props:{secondary:!0,icon:ne,$$slots:{default:[ye]},$$scope:{ctx:a}}}),e.$on("click",a[5]),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,r){S(e,t,r),n=!0},p(t,r){const i={};r&4097&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ye(a){let e,n;return{c(){e=E("Remove steam turbine #"),n=E(a[0])},l(t){e=T(t,"Remove steam turbine #"),n=T(t,a[0])},m(t,r){v(t,e,r),v(t,n,r)},p(t,r){r&1&&x(n,t[0])},d(t){t&&g(e),t&&g(n)}}}function Ee(a){let e;return{c(){e=E("Add steam turbine")},l(n){e=T(n,"Add steam turbine")},m(n,t){v(n,e,t)},d(n){n&&g(e)}}}function Te(a){let e,n,t,r,i,c;n=new F({props:{icon:ee,$$slots:{default:[ve]},$$scope:{ctx:a}}}),n.$on("click",a[7]);const l=[we,ke],s=[];function u(f,d){return f[2]?0:1}return r=u(a),i=s[r]=l[r](a),{c(){e=I("div"),k(n.$$.fragment),t=Y(),i.c(),this.h()},l(f){e=P(f,"DIV",{slot:!0});var d=H(e);w(n.$$.fragment,d),t=B(d),i.l(d),d.forEach(g),this.h()},h(){N(e,"slot","footer")},m(f,d){v(f,e,d),S(n,e,null),W(e,t),s[r].m(e,null),c=!0},p(f,d){const o={};d&4096&&(o.$$scope={dirty:d,ctx:f}),n.$set(o);let m=r;r=u(f),r===m?s[r].p(f,d):(K(),h(s[m],1,1,()=>{s[m]=null}),X(),i=s[r],i?i.p(f,d):(i=s[r]=l[r](f),i.c()),_(i,1),i.m(e,null))},i(f){c||(_(n.$$.fragment,f),_(i),c=!0)},o(f){h(n.$$.fragment,f),h(i),c=!1},d(f){f&&g(e),y(n),s[r].d()}}}function We(a){let e,n,t,r,i;function c(s){a[6](s)}let l={title:"transformation instructions",closeButtons:"top",$$slots:{default:[pe]},$$scope:{ctx:a}};return a[1]!==void 0&&(l.visible=a[1]),e=new fe({props:l}),G.push(()=>O(e,"visible",c)),r=new ue({props:{title:"Placing steam turbines",$$slots:{footer:[Te,({foregroundHeight:s,foregroundWidth:u})=>({10:s,11:u}),({foregroundHeight:s,foregroundWidth:u})=>(s?1024:0)|(u?2048:0)],background:[be,({foregroundHeight:s,foregroundWidth:u})=>({10:s,11:u}),({foregroundHeight:s,foregroundWidth:u})=>(s?1024:0)|(u?2048:0)],default:[$e,({foregroundHeight:s,foregroundWidth:u})=>({10:s,11:u}),({foregroundHeight:s,foregroundWidth:u})=>(s?1024:0)|(u?2048:0)]},$$scope:{ctx:a}}}),{c(){k(e.$$.fragment),t=Y(),k(r.$$.fragment)},l(s){w(e.$$.fragment,s),t=B(s),w(r.$$.fragment,s)},m(s,u){S(e,s,u),v(s,t,u),S(r,s,u),i=!0},p(s,[u]){const f={};u&4096&&(f.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,f.visible=s[1],J(()=>n=!1)),e.$set(f);const d={};u&7173&&(d.$$scope={dirty:u,ctx:s}),r.$set(d)},i(s){i||(_(e.$$.fragment,s),_(r.$$.fragment,s),i=!0)},o(s){h(e.$$.fragment,s),h(r.$$.fragment,s),i=!1},d(s){y(e,s),s&&g(t),y(r,s)}}}function Ie(a,e,n){let t;C(a,ie,m=>n(2,t=m));let r=-1,i=!1;const c=()=>n(1,i=!i);function l(m,$){const b=new le(m,$,20);b.enableSelection(),V.add(b)}function s(){r!=-1&&(V.remove(r),n(0,r=-1))}U(()=>{});function u(m){i=m,n(1,i)}const f=()=>c(),d=(m,$)=>l(m/2,$/2);function o(m){r=m,n(0,r)}return[r,i,t,c,l,s,u,f,d,o]}class Me extends A{constructor(e){super(),M(this,e,Ie,We,j,{})}}export{Me as default};
