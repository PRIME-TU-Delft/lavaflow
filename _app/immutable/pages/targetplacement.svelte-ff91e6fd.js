import{S as V,i as q,s as y,w as $,x as b,y as k,E as A,q as g,o as m,B as v,J as W,v as J,l as F,g as h,n as H,p as N,d,e as T,c as C,a as D,b as B,f as O,k as K,m as Q,t as S,h as w,j as U,_ as X,a0 as Y,$ as Z}from"../chunks/index-b2cf3344.js";import{B as G,f as L,g as x}from"../chunks/Button-2751e271.js";import{N as ee}from"../chunks/NavigationButton-f564c9bc.js";import{P as te}from"../chunks/P5-ab5ed039.js";import{t as E,g as re}from"../chunks/gltfStore-f44234c6.js";import{P as ne}from"../chunks/Page-bed51374.js";import{c as oe}from"../chunks/contourLineStore-0bb23d49.js";import{D as le}from"../chunks/draggable-002fe15c.js";import"../chunks/preload-helper-60cab3ee.js";import"../chunks/index-082afcc0.js";function ae(o){let t,r;return t=new te({props:{sketch:o[0]}}),{c(){$(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p:A,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function se(o,t,r){let e,n;W(o,E,l=>r(5,e=l)),W(o,re,l=>r(6,n=l));let{foregroundWidth:f}=t,{foregroundHeight:a}=t,{targetSelected:i}=t,{curves:s}=t;console.log({foregroundWidth:f,foregroundHeight:a});function c(l){l.setup=()=>{l.createCanvas(f,a)},l.draw=()=>{var p;if(l.background(230),l.stroke(30),s.forEach((u,P)=>{l.strokeWeight(4),l.noFill(),l.beginShape();for(let j of u){let M=j[0],z=j[1];l.vertex(M,z)}l.endShape(l.CLOSE)}),(p=n.craters)!=null&&p.length)for(let u=0;u<n.craters.length;u++)l.strokeWeight(1),l.stroke("#f2682c"),l.fill("#f2682c"),l.ellipse(n.craters[u][0],n.craters[u][1],50,50),l.noFill(),l.strokeWeight(.5),l.ellipse(n.craters[u][0],n.craters[u][1],150,150);let _=20;if(e!=null&&e.length)for(let u=0;u<e.length;u++){let P=e[u];P.update(l,n.craters,75,e,50,u),P.drawCircle(l,_,u)}},l.mousePressed=()=>{if(!(e!=null&&e.length))return;let _=!1;for(let p=0;p<e.length;p++){let u=!1;e[p].deselect(),_||(u=e[p].pressed(l),_=u),u&&r(1,i=p)}},l.mouseReleased=()=>{if(!!(e!=null&&e.length))for(let _ of e)_.released()}}return o.$$set=l=>{"foregroundWidth"in l&&r(2,f=l.foregroundWidth),"foregroundHeight"in l&&r(3,a=l.foregroundHeight),"targetSelected"in l&&r(1,i=l.targetSelected),"curves"in l&&r(4,s=l.curves)},[c,i,f,a,s]}class ie extends V{constructor(t){super(),q(this,t,se,ae,y,{foregroundWidth:2,foregroundHeight:3,targetSelected:1,curves:4})}}function fe(o){let t,r;return t=new ee({props:{to:"/scan/mapscanning",$$slots:{default:[ue]},$$scope:{ctx:o}}}),{c(){$(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const f={};n&256&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function ce(o){let t,r,e,n;function f(i){o[5](i)}let a={foregroundHeight:o[6],foregroundWidth:o[7],curves:o[1].curves};return o[0]!==void 0&&(a.targetSelected=o[0]),r=new ie({props:a}),X.push(()=>Y(r,"targetSelected",f)),{c(){t=T("div"),$(r.$$.fragment),this.h()},l(i){t=C(i,"DIV",{class:!0});var s=D(t);b(r.$$.fragment,s),s.forEach(d),this.h()},h(){B(t,"class","sketch svelte-r0eupj")},m(i,s){h(i,t,s),k(r,t,null),n=!0},p(i,s){const c={};s&64&&(c.foregroundHeight=i[6]),s&128&&(c.foregroundWidth=i[7]),s&2&&(c.curves=i[1].curves),!e&&s&1&&(e=!0,c.targetSelected=i[0],Z(()=>e=!1)),r.$set(c)},i(i){n||(g(r.$$.fragment,i),n=!0)},o(i){m(r.$$.fragment,i),n=!1},d(i){i&&d(t),v(r)}}}function ue(o){let t;return{c(){t=S("No image found. Go to map scanning")},l(r){t=w(r,"No image found. Go to map scanning")},m(r,e){h(r,t,e)},d(r){r&&d(t)}}}function ge(o){let t,r,e,n;const f=[ce,fe],a=[];function i(s,c){return s[1]?0:1}return t=i(o),r=a[t]=f[t](o),{c(){r.c(),e=F()},l(s){r.l(s),e=F()},m(s,c){a[t].m(s,c),h(s,e,c),n=!0},p(s,c){let l=t;t=i(s),t===l?a[t].p(s,c):(H(),m(a[l],1,1,()=>{a[l]=null}),N(),r=a[t],r?r.p(s,c):(r=a[t]=f[t](s),r.c()),g(r,1),r.m(e.parentNode,e))},i(s){n||(g(r),n=!0)},o(s){m(r),n=!1},d(s){a[t].d(s),s&&d(e)}}}function me(o){let t;return{c(){t=T("div"),this.h()},l(r){t=C(r,"DIV",{slot:!0,style:!0}),D(t).forEach(d),this.h()},h(){B(t,"slot","background"),O(t,"background","#aaa")},m(r,e){h(r,t,e)},p:A,d(r){r&&d(t)}}}function I(o){let t,r,e,n=o[0]!=-1&&R(o);function f(){return o[4](o[7],o[6])}return r=new G({props:{icon:L,$$slots:{default:[_e]},$$scope:{ctx:o}}}),r.$on("click",f),{c(){n&&n.c(),t=K(),$(r.$$.fragment)},l(a){n&&n.l(a),t=Q(a),b(r.$$.fragment,a)},m(a,i){n&&n.m(a,i),h(a,t,i),k(r,a,i),e=!0},p(a,i){o=a,o[0]!=-1?n?(n.p(o,i),i&1&&g(n,1)):(n=R(o),n.c(),g(n,1),n.m(t.parentNode,t)):n&&(H(),m(n,1,1,()=>{n=null}),N());const s={};i&256&&(s.$$scope={dirty:i,ctx:o}),r.$set(s)},i(a){e||(g(n),g(r.$$.fragment,a),e=!0)},o(a){m(n),m(r.$$.fragment,a),e=!1},d(a){n&&n.d(a),a&&d(t),v(r,a)}}}function R(o){let t,r;return t=new G({props:{secondary:!0,icon:x,$$slots:{default:[de]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){$(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,n){const f={};n&257&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function de(o){let t,r;return{c(){t=S("Remove steam turbine #"),r=S(o[0])},l(e){t=w(e,"Remove steam turbine #"),r=w(e,o[0])},m(e,n){h(e,t,n),h(e,r,n)},p(e,n){n&1&&U(r,e[0])},d(e){e&&d(t),e&&d(r)}}}function _e(o){let t;return{c(){t=S("Add steam turbine")},l(r){t=w(r,"Add steam turbine")},m(r,e){h(r,t,e)},d(r){r&&d(t)}}}function he(o){let t,r,e=o[1]&&I(o);return{c(){t=T("div"),e&&e.c(),this.h()},l(n){t=C(n,"DIV",{slot:!0});var f=D(t);e&&e.l(f),f.forEach(d),this.h()},h(){B(t,"slot","footer")},m(n,f){h(n,t,f),e&&e.m(t,null),r=!0},p(n,f){n[1]?e?(e.p(n,f),f&2&&g(e,1)):(e=I(n),e.c(),g(e,1),e.m(t,null)):e&&(H(),m(e,1,1,()=>{e=null}),N())},i(n){r||(g(e),r=!0)},o(n){m(e),r=!1},d(n){n&&d(t),e&&e.d()}}}function pe(o){let t,r;return t=new ne({props:{title:"Placing steam turbines",$$slots:{footer:[he,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],background:[me,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)],default:[ge,({foregroundHeight:e,foregroundWidth:n})=>({6:e,7:n}),({foregroundHeight:e,foregroundWidth:n})=>(e?64:0)|(n?128:0)]},$$scope:{ctx:o}}}),{c(){$(t.$$.fragment)},l(e){b(t.$$.fragment,e)},m(e,n){k(t,e,n),r=!0},p(e,[n]){const f={};n&451&&(f.$$scope={dirty:n,ctx:e}),t.$set(f)},i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){m(t.$$.fragment,e),r=!1},d(e){v(t,e)}}}function $e(o,t,r){let e;W(o,oe,c=>r(1,e=c));let n=-1;function f(c,l){const _=new le(c,l,20);_.enableSelection(),E.add(_)}function a(){n!=-1&&(E.remove(n),r(0,n=-1))}J(()=>{});const i=(c,l)=>f(c/2,l/2);function s(c){n=c,r(0,n)}return[n,e,f,a,i,s]}class Te extends V{constructor(t){super(),q(this,t,$e,pe,y,{})}}export{Te as default};
