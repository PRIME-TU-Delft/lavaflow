import{S as N,i as O,s as G,e as b,t as E,k as I,c as $,a as k,h as S,d,m as V,b as v,g,J as p,E as C,V as te,F as Z,G as K,H as Q,I as x,q as y,o as w,v as se,W as oe,l as P,n as U,p as q,X as A,w as T,x as B,f as L,y as H,B as M,Y as re,Z as le}from"../../chunks/index-6ef4ca18.js";import{B as F,b as ne,c as ie}from"../../chunks/Button-4b8f6361.js";import{P as ae,r as ce}from"../../chunks/imageStore-794ecfdf.js";import{g as ue}from"../../chunks/navigation-0e6511d1.js";import"../../chunks/index-381b1206.js";import"../../chunks/singletons-d1fb5791.js";const W=[{title:"3 marker visible",description:"To recognize the level curves, we need to have the 3 markers fully visible"},{title:"Curves should have sufficient margin",description:"The curves should have sufficient margin between them, overlapping or close lines are hard to interpret"},{title:"Markers shoud not be too far or close",description:"Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best result try to scan the paper as close to parallel as possible"},{title:"Drawing with dark pen",description:"To recognise your level curves, we prefer a dark and thic pen. Using a lighter pen will result in inaccurate results"},{title:"Propper lighting",description:"Level curves are hard to distinguish from background in a low light setting. Try to use natual daylight or a propper ceiling light for best results."},{title:"Close your curves",description:"To avoid false readings, close your curves as much as possible"},{title:"Only one paper should be visible",description:"To avoid false readings, only one paper should be visible at a time"}];function j(l,e,t){const s=l.slice();return s[0]=e[t],s}function z(l){let e,t,s=l[0].title+"",r,o,n,c=l[0].description+"",i,a;return{c(){e=b("div"),t=b("div"),r=E(s),o=I(),n=b("div"),i=E(c),a=I(),this.h()},l(m){e=$(m,"DIV",{class:!0});var u=k(e);t=$(u,"DIV",{class:!0});var f=k(t);r=S(f,s),f.forEach(d),o=V(u),n=$(u,"DIV",{class:!0});var _=k(n);i=S(_,c),_.forEach(d),a=V(u),u.forEach(d),this.h()},h(){v(t,"class","title svelte-1fkle3y"),v(n,"class","description"),v(e,"class","instruction svelte-1fkle3y")},m(m,u){g(m,e,u),p(e,t),p(t,r),p(e,o),p(e,n),p(n,i),p(e,a)},p:C,d(m){m&&d(e)}}}function fe(l){let e,t,s,r,o,n,c,i,a,m=W,u=[];for(let f=0;f<m.length;f+=1)u[f]=z(j(l,m,f));return{c(){e=b("div"),t=b("h2"),s=E("Good example of contour map"),r=I(),o=b("div"),n=I(),c=b("h2"),i=E("Instructions"),a=I();for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=$(f,"DIV",{class:!0});var _=k(e);t=$(_,"H2",{});var h=k(t);s=S(h,"Good example of contour map"),h.forEach(d),r=V(_),o=$(_,"DIV",{class:!0}),k(o).forEach(d),n=V(_),c=$(_,"H2",{});var D=k(c);i=S(D,"Instructions"),D.forEach(d),a=V(_);for(let R=0;R<u.length;R+=1)u[R].l(_);_.forEach(d),this.h()},h(){v(o,"class","example svelte-1fkle3y"),v(e,"class","instructions svelte-1fkle3y")},m(f,_){g(f,e,_),p(e,t),p(t,s),p(e,r),p(e,o),p(e,n),p(e,c),p(c,i),p(e,a);for(let h=0;h<u.length;h+=1)u[h].m(e,null)},p(f,[_]){if(_&0){m=W;let h;for(h=0;h<m.length;h+=1){const D=j(f,m,h);u[h]?u[h].p(D,_):(u[h]=z(D),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=m.length}},i:C,o:C,d(f){f&&d(e),te(u,f)}}}class de extends N{constructor(e){super(),O(this,e,null,fe,G,{})}}const _e=l=>({loading:l&2,stream:l&1,error:l&4}),J=l=>({loading:l[1],stream:l[0],error:l[2]});function me(l){let e;const t=l[4].default,s=Z(t,l,l[3],J);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,[o]){s&&s.p&&(!e||o&15)&&K(s,t,r,r[3],e?x(t,r[3],o,_e):Q(r[3]),J)},i(r){e||(y(s,r),e=!0)},o(r){w(s,r),e=!1},d(r){s&&s.d(r)}}}function he(l,e,t){let{$$slots:s={},$$scope:r}=e,o,n=!0,c;const i=async()=>{try{t(1,n=!0),t(0,o=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})),t(1,n=!1),t(2,c="")}catch(a){t(2,c=""+a)}};return se(async()=>{await i()}),oe(()=>{!o||o.getTracks().forEach(a=>a.stop())}),l.$$set=a=>{"$$scope"in a&&t(3,r=a.$$scope)},[o,n,c,r,s]}class pe extends N{constructor(e){super(),O(this,e,he,me,G,{})}}function ge(l){let e;return{c(){e=b("video"),this.h()},l(t){e=$(t,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),k(e).forEach(d),this.h()},h(){v(e,"style",l[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,v(e,"preload","auto"),v(e,"type","video/mp4"),v(e,"class","svelte-wvnab8")},m(t,s){g(t,e,s),l[7](e)},p(t,s){s&2&&v(e,"style",t[1])},i:C,o:C,d(t){t&&d(e),l[7](null)}}}function ve(l){let e,t,s,r,o,n=l[3]&&l[3].includes("Permission denied"),c,i,a=n&&X();const m=l[6].default,u=Z(m,l,l[5],null);return{c(){e=b("div"),t=b("div"),s=b("h1"),r=E("Loading video..."),o=I(),a&&a.c(),c=I(),u&&u.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var _=k(e);t=$(_,"DIV",{class:!0});var h=k(t);s=$(h,"H1",{class:!0});var D=k(s);r=S(D,"Loading video..."),D.forEach(d),o=V(h),a&&a.l(h),h.forEach(d),_.forEach(d),c=V(f),u&&u.l(f),this.h()},h(){v(s,"class","svelte-wvnab8"),v(t,"class","svelte-wvnab8"),v(e,"class","loadingVideo svelte-wvnab8")},m(f,_){g(f,e,_),p(e,t),p(t,s),p(s,r),p(t,o),a&&a.m(t,null),g(f,c,_),u&&u.m(f,_),i=!0},p(f,_){_&8&&(n=f[3]&&f[3].includes("Permission denied")),n?a||(a=X(),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&&u.p&&(!i||_&32)&&K(u,m,f,f[5],i?x(m,f[5],_,null):Q(f[5]),null)},i(f){i||(y(u,f),i=!0)},o(f){w(u,f),i=!1},d(f){f&&d(e),a&&a.d(),f&&d(c),u&&u.d(f)}}}function X(l){let e;return{c(){e=E("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=S(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function be(l){let e,t,s,r;const o=[ve,ge],n=[];function c(i,a){return i[2]?0:1}return e=c(l),t=n[e]=o[e](l),{c(){t.c(),s=P()},l(i){t.l(i),s=P()},m(i,a){n[e].m(i,a),g(i,s,a),r=!0},p(i,[a]){let m=e;e=c(i),e===m?n[e].p(i,a):(U(),w(n[m],1,1,()=>{n[m]=null}),q(),t=n[e],t?t.p(i,a):(t=n[e]=o[e](i),t.c()),y(t,1),t.m(s.parentNode,s))},i(i){r||(y(t),r=!0)},o(i){w(t),r=!1},d(i){n[e].d(i),i&&d(s)}}}function $e(l,e,t){let{$$slots:s={},$$scope:r}=e,{stream:o}=e,{style:n=""}=e,{loading:c=!0}=e,{error:i=""}=e,{videoSource:a=void 0}=e;function m(u){A[u?"unshift":"push"](()=>{a=u,t(0,a),t(4,o),t(2,c)})}return l.$$set=u=>{"stream"in u&&t(4,o=u.stream),"style"in u&&t(1,n=u.style),"loading"in u&&t(2,c=u.loading),"error"in u&&t(3,i=u.error),"videoSource"in u&&t(0,a=u.videoSource),"$$scope"in u&&t(5,r=u.$$scope)},l.$$.update=()=>{l.$$.dirty&21&&o&&!c&&a&&a.paused&&(t(0,a.srcObject=o,a),a.play())},[a,n,c,i,o,r,s,m]}class ee extends N{constructor(e){super(),O(this,e,$e,be,G,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function ke(l){let e,t,s,r;function o(c){l[7](c)}let n={error:l[11],loading:l[9],stream:l[10],$$slots:{default:[we]},$$scope:{ctx:l}};return l[1]!==void 0&&(n.videoSource=l[1]),e=new ee({props:n}),A.push(()=>re(e,"videoSource",o)),{c(){t=b("div"),T(e.$$.fragment),this.h()},l(c){t=$(c,"DIV",{style:!0});var i=k(t);B(e.$$.fragment,i),this.h()},h(){L(t,"display","contents"),L(t,"--corner-radius","1rem")},m(c,i){g(c,t,i),H(e,t,null),r=!0},p(c,i){const a={};i&2048&&(a.error=c[11]),i&512&&(a.loading=c[9]),i&1024&&(a.stream=c[10]),i&4096&&(a.$$scope={dirty:i,ctx:c}),!s&&i&2&&(s=!0,a.videoSource=c[1],le(()=>s=!1)),e.$set(a)},i(c){r||(y(e.$$.fragment,c),r=!0)},o(c){w(e.$$.fragment,c),r=!1},d(c){c&&d(t),M(e,c)}}}function ye(l){let e,t;return e=new de({}),{c(){T(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p:C,i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function we(l){let e,t;return{c(){e=b("h1"),t=E("loading...")},l(s){e=$(s,"H1",{});var r=k(e);t=S(r,"loading..."),r.forEach(d)},m(s,r){g(s,e,r),p(e,t)},p:C,d(s){s&&d(e)}}}function Ie(l){let e,t,s,r;const o=[ye,ke],n=[];function c(i,a){return i[0]?0:1}return e=c(l),t=n[e]=o[e](l),{c(){t.c(),s=P()},l(i){t.l(i),s=P()},m(i,a){n[e].m(i,a),g(i,s,a),r=!0},p(i,a){let m=e;e=c(i),e===m?n[e].p(i,a):(U(),w(n[m],1,1,()=>{n[m]=null}),q(),t=n[e],t?t.p(i,a):(t=n[e]=o[e](i),t.c()),y(t,1),t.m(s.parentNode,s))},i(i){r||(y(t),r=!0)},o(i){w(t),r=!1},d(i){n[e].d(i),i&&d(s)}}}function Ve(l){let e,t,s;return t=new ee({props:{loading:l[9],stream:l[10]}}),{c(){e=b("div"),T(t.$$.fragment),this.h()},l(r){e=$(r,"DIV",{slot:!0});var o=k(e);B(t.$$.fragment,o),o.forEach(d),this.h()},h(){v(e,"slot","background")},m(r,o){g(r,e,o),H(t,e,null),s=!0},p(r,o){const n={};o&512&&(n.loading=r[9]),o&1024&&(n.stream=r[10]),t.$set(n)},i(r){s||(y(t.$$.fragment,r),s=!0)},o(r){w(t.$$.fragment,r),s=!1},d(r){r&&d(e),M(t)}}}function Y(l){let e,t,s,r;return e=new F({props:{secondary:!0,icon:ne,$$slots:{default:[Ee]},$$scope:{ctx:l}}}),e.$on("click",l[5]),s=new F({props:{loading:l[3],icon:ie,$$slots:{default:[Se]},$$scope:{ctx:l}}}),s.$on("click",l[6]),{c(){T(e.$$.fragment),t=I(),T(s.$$.fragment)},l(o){B(e.$$.fragment,o),t=V(o),B(s.$$.fragment,o)},m(o,n){H(e,o,n),g(o,t,n),H(s,o,n),r=!0},p(o,n){const c={};n&4096&&(c.$$scope={dirty:n,ctx:o}),e.$set(c);const i={};n&8&&(i.loading=o[3]),n&4096&&(i.$$scope={dirty:n,ctx:o}),s.$set(i)},i(o){r||(y(e.$$.fragment,o),y(s.$$.fragment,o),r=!0)},o(o){w(e.$$.fragment,o),w(s.$$.fragment,o),r=!1},d(o){M(e,o),o&&d(t),M(s,o)}}}function Ee(l){let e;return{c(){e=E("Read scan instructions")},l(t){e=S(t,"Read scan instructions")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function Se(l){let e;return{c(){e=E("Capture photo of map")},l(t){e=S(t,"Capture photo of map")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function De(l){let e,t,s=!l[0]&&Y(l);return{c(){e=b("div"),s&&s.c(),this.h()},l(r){e=$(r,"DIV",{slot:!0});var o=k(e);s&&s.l(o),o.forEach(d),this.h()},h(){v(e,"slot","footer")},m(r,o){g(r,e,o),s&&s.m(e,null),t=!0},p(r,o){r[0]?s&&(U(),w(s,1,1,()=>{s=null}),q()):s?(s.p(r,o),o&1&&y(s,1)):(s=Y(r),s.c(),y(s,1),s.m(e,null))},i(r){t||(y(s),t=!0)},o(r){w(s),t=!1},d(r){r&&d(e),s&&s.d()}}}function Ce(l){let e,t;return e=new ae({props:{title:l[4],closeButton:l[0],$$slots:{footer:[De],background:[Ve],default:[Ie]},$$scope:{ctx:l}}}),e.$on("close",l[5]),{c(){T(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p(s,r){const o={};r&16&&(o.title=s[4]),r&1&&(o.closeButton=s[0]),r&7691&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Te(l){let e,t,s,r;return e=new pe({props:{$$slots:{default:[Ce,({loading:o,stream:n,error:c})=>({9:o,10:n,11:c}),({loading:o,stream:n,error:c})=>(o?512:0)|(n?1024:0)|(c?2048:0)]},$$scope:{ctx:l}}}),{c(){T(e.$$.fragment),t=I(),s=b("canvas"),this.h()},l(o){B(e.$$.fragment,o),t=V(o),s=$(o,"CANVAS",{id:!0,style:!0}),k(s).forEach(d),this.h()},h(){v(s,"id","captureCanvas"),L(s,"display","none"),L(s,"position","absolute")},m(o,n){H(e,o,n),g(o,t,n),g(o,s,n),l[8](s),r=!0},p(o,[n]){const c={};n&7707&&(c.$$scope={dirty:n,ctx:o}),e.$set(c)},i(o){r||(y(e.$$.fragment,o),r=!0)},o(o){w(e.$$.fragment,o),r=!1},d(o){M(e,o),o&&d(t),o&&d(s),l[8](null)}}}const Ge=!0;function Be(l,e,t){let s,r=!1,o,n,c=!1;const i=()=>t(0,r=!r);async function a(){t(3,c=!0);const f=n.getContext("2d");t(2,n.height=o.videoHeight,n),t(2,n.width=o.videoWidth,n),f&&f.drawImage(o,0,0,n.width,n.height);const _=n.toDataURL("image/png");ce.set(_),ue("/scan/maptransform")}function m(f){o=f,t(1,o)}function u(f){A[f?"unshift":"push"](()=>{n=f,t(2,n)})}return l.$$.update=()=>{l.$$.dirty&1&&t(4,s=r?"Instructions":"Map Scanning")},[r,o,n,c,s,i,a,m,u]}class Re extends N{constructor(e){super(),O(this,e,Be,Te,G,{})}}export{Re as default,Ge as prerender};
