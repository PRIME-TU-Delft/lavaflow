import{S as L,i as N,s as O,e as v,t as E,k as I,c as b,a as $,h as S,d,m as V,b as w,g,J as p,E as C,V as te,F as Z,G as K,H as Q,I as x,q as k,o as y,v as se,W as oe,l as P,n as R,p as U,X as q,w as T,x as B,f as A,y as H,B as M,Y as re,Z as ne}from"../../chunks/index-7d13a48d.js";import{B as F,b as le,c as ie}from"../../chunks/Button-e0deb53f.js";import{P as ae,r as ce,g as ue}from"../../chunks/imageStore-801aaa81.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/index-aa581d55.js";const W=[{title:"3 marker visible",description:"To recognize the level curves, we need to have the 3 markers fully visible"},{title:"Curves should have sufficient margin",description:"The curves should have sufficient margin between them, overlapping or close lines are hard to interpret"},{title:"Markers shoud not be too far or close",description:"Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best result try to scan the paper as close to parallel as possible"},{title:"Drawing with dark pen",description:"To recognise your level curves, we prefer a dark and thic pen. Using a lighter pen will result in inaccurate results"},{title:"Propper lighting",description:"Level curves are hard to distinguish from background in a low light setting. Try to use natual daylight or a propper ceiling light for best results."},{title:"Close your curves",description:"To avoid false readings, close your curves as much as possible"},{title:"Only one paper should be visible",description:"To avoid false readings, only one paper should be visible at a time"}];function j(n,e,t){const s=n.slice();return s[0]=e[t],s}function z(n){let e,t,s=n[0].title+"",r,o,l,c=n[0].description+"",i,a;return{c(){e=v("div"),t=v("div"),r=E(s),o=I(),l=v("div"),i=E(c),a=I(),this.h()},l(m){e=b(m,"DIV",{class:!0});var u=$(e);t=b(u,"DIV",{class:!0});var f=$(t);r=S(f,s),f.forEach(d),o=V(u),l=b(u,"DIV",{class:!0});var _=$(l);i=S(_,c),_.forEach(d),a=V(u),u.forEach(d),this.h()},h(){w(t,"class","title svelte-1fkle3y"),w(l,"class","description"),w(e,"class","instruction svelte-1fkle3y")},m(m,u){g(m,e,u),p(e,t),p(t,r),p(e,o),p(e,l),p(l,i),p(e,a)},p:C,d(m){m&&d(e)}}}function fe(n){let e,t,s,r,o,l,c,i,a,m=W,u=[];for(let f=0;f<m.length;f+=1)u[f]=z(j(n,m,f));return{c(){e=v("div"),t=v("h2"),s=E("Good example of contour map"),r=I(),o=v("div"),l=I(),c=v("h2"),i=E("Instructions"),a=I();for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var _=$(e);t=b(_,"H2",{});var h=$(t);s=S(h,"Good example of contour map"),h.forEach(d),r=V(_),o=b(_,"DIV",{class:!0}),$(o).forEach(d),l=V(_),c=b(_,"H2",{});var D=$(c);i=S(D,"Instructions"),D.forEach(d),a=V(_);for(let G=0;G<u.length;G+=1)u[G].l(_);_.forEach(d),this.h()},h(){w(o,"class","example svelte-1fkle3y"),w(e,"class","instructions svelte-1fkle3y")},m(f,_){g(f,e,_),p(e,t),p(t,s),p(e,r),p(e,o),p(e,l),p(e,c),p(c,i),p(e,a);for(let h=0;h<u.length;h+=1)u[h].m(e,null)},p(f,[_]){if(_&0){m=W;let h;for(h=0;h<m.length;h+=1){const D=j(f,m,h);u[h]?u[h].p(D,_):(u[h]=z(D),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=m.length}},i:C,o:C,d(f){f&&d(e),te(u,f)}}}class de extends L{constructor(e){super(),N(this,e,null,fe,O,{})}}const _e=n=>({loading:n&2,stream:n&1,error:n&4}),J=n=>({loading:n[1],stream:n[0],error:n[2]});function me(n){let e;const t=n[4].default,s=Z(t,n,n[3],J);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,[o]){s&&s.p&&(!e||o&15)&&K(s,t,r,r[3],e?x(t,r[3],o,_e):Q(r[3]),J)},i(r){e||(k(s,r),e=!0)},o(r){y(s,r),e=!1},d(r){s&&s.d(r)}}}function he(n,e,t){let{$$slots:s={},$$scope:r}=e,o,l=!0,c;const i=async()=>{try{t(1,l=!0),t(0,o=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})),t(1,l=!1),t(2,c="")}catch(a){t(2,c=""+a)}};return se(async()=>{await i()}),oe(()=>{!o||o.getTracks().forEach(a=>a.stop())}),n.$$set=a=>{"$$scope"in a&&t(3,r=a.$$scope)},[o,l,c,r,s]}class pe extends L{constructor(e){super(),N(this,e,he,me,O,{})}}function ge(n){let e;return{c(){e=v("video"),this.h()},l(t){e=b(t,"VIDEO",{style:!0,class:!0}),$(e).forEach(d),this.h()},h(){w(e,"style",n[1]),w(e,"class","svelte-wvnab8")},m(t,s){g(t,e,s),n[7](e)},p(t,s){s&2&&w(e,"style",t[1])},i:C,o:C,d(t){t&&d(e),n[7](null)}}}function ve(n){let e,t,s,r,o,l=n[3]&&n[3].includes("Permission denied"),c,i,a=l&&X();const m=n[6].default,u=Z(m,n,n[5],null);return{c(){e=v("div"),t=v("div"),s=v("h1"),r=E("Loading video..."),o=I(),a&&a.c(),c=I(),u&&u.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var _=$(e);t=b(_,"DIV",{class:!0});var h=$(t);s=b(h,"H1",{class:!0});var D=$(s);r=S(D,"Loading video..."),D.forEach(d),o=V(h),a&&a.l(h),h.forEach(d),_.forEach(d),c=V(f),u&&u.l(f),this.h()},h(){w(s,"class","svelte-wvnab8"),w(t,"class","svelte-wvnab8"),w(e,"class","loadingVideo svelte-wvnab8")},m(f,_){g(f,e,_),p(e,t),p(t,s),p(s,r),p(t,o),a&&a.m(t,null),g(f,c,_),u&&u.m(f,_),i=!0},p(f,_){_&8&&(l=f[3]&&f[3].includes("Permission denied")),l?a||(a=X(),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&&u.p&&(!i||_&32)&&K(u,m,f,f[5],i?x(m,f[5],_,null):Q(f[5]),null)},i(f){i||(k(u,f),i=!0)},o(f){y(u,f),i=!1},d(f){f&&d(e),a&&a.d(),f&&d(c),u&&u.d(f)}}}function X(n){let e;return{c(){e=E("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=S(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function be(n){let e,t,s,r;const o=[ve,ge],l=[];function c(i,a){return i[2]?0:1}return e=c(n),t=l[e]=o[e](n),{c(){t.c(),s=P()},l(i){t.l(i),s=P()},m(i,a){l[e].m(i,a),g(i,s,a),r=!0},p(i,[a]){let m=e;e=c(i),e===m?l[e].p(i,a):(R(),y(l[m],1,1,()=>{l[m]=null}),U(),t=l[e],t?t.p(i,a):(t=l[e]=o[e](i),t.c()),k(t,1),t.m(s.parentNode,s))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){l[e].d(i),i&&d(s)}}}function $e(n,e,t){let{$$slots:s={},$$scope:r}=e,{stream:o}=e,{style:l=""}=e,{loading:c=!0}=e,{error:i=""}=e,{videoSource:a=void 0}=e;function m(u){q[u?"unshift":"push"](()=>{a=u,t(0,a),t(4,o),t(2,c)})}return n.$$set=u=>{"stream"in u&&t(4,o=u.stream),"style"in u&&t(1,l=u.style),"loading"in u&&t(2,c=u.loading),"error"in u&&t(3,i=u.error),"videoSource"in u&&t(0,a=u.videoSource),"$$scope"in u&&t(5,r=u.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&o&&!c&&a&&a.paused&&(t(0,a.srcObject=o,a),a.play(),a.setAttribute("autoplay",""),a.setAttribute("muted",""),a.setAttribute("playsinline",""))},[a,l,c,i,o,r,s,m]}class ee extends L{constructor(e){super(),N(this,e,$e,be,O,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function ke(n){let e,t,s,r;function o(c){n[7](c)}let l={error:n[11],loading:n[9],stream:n[10],$$slots:{default:[we]},$$scope:{ctx:n}};return n[1]!==void 0&&(l.videoSource=n[1]),e=new ee({props:l}),q.push(()=>re(e,"videoSource",o)),{c(){t=v("div"),T(e.$$.fragment),this.h()},l(c){t=b(c,"DIV",{style:!0});var i=$(t);B(e.$$.fragment,i),this.h()},h(){A(t,"display","contents"),A(t,"--corner-radius","1rem")},m(c,i){g(c,t,i),H(e,t,null),r=!0},p(c,i){const a={};i&2048&&(a.error=c[11]),i&512&&(a.loading=c[9]),i&1024&&(a.stream=c[10]),i&4096&&(a.$$scope={dirty:i,ctx:c}),!s&&i&2&&(s=!0,a.videoSource=c[1],ne(()=>s=!1)),e.$set(a)},i(c){r||(k(e.$$.fragment,c),r=!0)},o(c){y(e.$$.fragment,c),r=!1},d(c){c&&d(t),M(e,c)}}}function ye(n){let e,t;return e=new de({}),{c(){T(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p:C,i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function we(n){let e,t;return{c(){e=v("h1"),t=E("loading...")},l(s){e=b(s,"H1",{});var r=$(e);t=S(r,"loading..."),r.forEach(d)},m(s,r){g(s,e,r),p(e,t)},p:C,d(s){s&&d(e)}}}function Ie(n){let e,t,s,r;const o=[ye,ke],l=[];function c(i,a){return i[0]?0:1}return e=c(n),t=l[e]=o[e](n),{c(){t.c(),s=P()},l(i){t.l(i),s=P()},m(i,a){l[e].m(i,a),g(i,s,a),r=!0},p(i,a){let m=e;e=c(i),e===m?l[e].p(i,a):(R(),y(l[m],1,1,()=>{l[m]=null}),U(),t=l[e],t?t.p(i,a):(t=l[e]=o[e](i),t.c()),k(t,1),t.m(s.parentNode,s))},i(i){r||(k(t),r=!0)},o(i){y(t),r=!1},d(i){l[e].d(i),i&&d(s)}}}function Ve(n){let e,t,s;return t=new ee({props:{loading:n[9],stream:n[10]}}),{c(){e=v("div"),T(t.$$.fragment),this.h()},l(r){e=b(r,"DIV",{slot:!0});var o=$(e);B(t.$$.fragment,o),o.forEach(d),this.h()},h(){w(e,"slot","background")},m(r,o){g(r,e,o),H(t,e,null),s=!0},p(r,o){const l={};o&512&&(l.loading=r[9]),o&1024&&(l.stream=r[10]),t.$set(l)},i(r){s||(k(t.$$.fragment,r),s=!0)},o(r){y(t.$$.fragment,r),s=!1},d(r){r&&d(e),M(t)}}}function Y(n){let e,t,s,r;return e=new F({props:{secondary:!0,icon:le,$$slots:{default:[Ee]},$$scope:{ctx:n}}}),e.$on("click",n[5]),s=new F({props:{loading:n[3],icon:ie,$$slots:{default:[Se]},$$scope:{ctx:n}}}),s.$on("click",n[6]),{c(){T(e.$$.fragment),t=I(),T(s.$$.fragment)},l(o){B(e.$$.fragment,o),t=V(o),B(s.$$.fragment,o)},m(o,l){H(e,o,l),g(o,t,l),H(s,o,l),r=!0},p(o,l){const c={};l&4096&&(c.$$scope={dirty:l,ctx:o}),e.$set(c);const i={};l&8&&(i.loading=o[3]),l&4096&&(i.$$scope={dirty:l,ctx:o}),s.$set(i)},i(o){r||(k(e.$$.fragment,o),k(s.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),y(s.$$.fragment,o),r=!1},d(o){M(e,o),o&&d(t),M(s,o)}}}function Ee(n){let e;return{c(){e=E("Read scan instructions")},l(t){e=S(t,"Read scan instructions")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function Se(n){let e;return{c(){e=E("Capture photo of map")},l(t){e=S(t,"Capture photo of map")},m(t,s){g(t,e,s)},d(t){t&&d(e)}}}function De(n){let e,t,s=!n[0]&&Y(n);return{c(){e=v("div"),s&&s.c(),this.h()},l(r){e=b(r,"DIV",{slot:!0});var o=$(e);s&&s.l(o),o.forEach(d),this.h()},h(){w(e,"slot","footer")},m(r,o){g(r,e,o),s&&s.m(e,null),t=!0},p(r,o){r[0]?s&&(R(),y(s,1,1,()=>{s=null}),U()):s?(s.p(r,o),o&1&&k(s,1)):(s=Y(r),s.c(),k(s,1),s.m(e,null))},i(r){t||(k(s),t=!0)},o(r){y(s),t=!1},d(r){r&&d(e),s&&s.d()}}}function Ce(n){let e,t;return e=new ae({props:{title:n[4],closeButton:n[0],$$slots:{footer:[De],background:[Ve],default:[Ie]},$$scope:{ctx:n}}}),e.$on("close",n[5]),{c(){T(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,r){H(e,s,r),t=!0},p(s,r){const o={};r&16&&(o.title=s[4]),r&1&&(o.closeButton=s[0]),r&7691&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(k(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Te(n){let e,t,s,r;return e=new pe({props:{$$slots:{default:[Ce,({loading:o,stream:l,error:c})=>({9:o,10:l,11:c}),({loading:o,stream:l,error:c})=>(o?512:0)|(l?1024:0)|(c?2048:0)]},$$scope:{ctx:n}}}),{c(){T(e.$$.fragment),t=I(),s=v("canvas"),this.h()},l(o){B(e.$$.fragment,o),t=V(o),s=b(o,"CANVAS",{id:!0,style:!0}),$(s).forEach(d),this.h()},h(){w(s,"id","captureCanvas"),A(s,"display","none"),A(s,"position","absolute")},m(o,l){H(e,o,l),g(o,t,l),g(o,s,l),n[8](s),r=!0},p(o,[l]){const c={};l&7707&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){r||(k(e.$$.fragment,o),r=!0)},o(o){y(e.$$.fragment,o),r=!1},d(o){M(e,o),o&&d(t),o&&d(s),n[8](null)}}}const Ne=!0;function Be(n,e,t){let s,r=!1,o,l,c=!1;const i=()=>t(0,r=!r);async function a(){t(3,c=!0);const f=l.getContext("2d");t(2,l.height=o.videoHeight,l),t(2,l.width=o.videoWidth,l),f&&f.drawImage(o,0,0,l.width,l.height);const _=l.toDataURL("image/png");ce.set(_),ue("/scan/maptransform")}function m(f){o=f,t(1,o)}function u(f){q[f?"unshift":"push"](()=>{l=f,t(2,l)})}return n.$$.update=()=>{n.$$.dirty&1&&t(4,s=r?"Instructions":"Map Scanning")},[r,o,l,c,s,i,a,m,u]}class Oe extends L{constructor(e){super(),N(this,e,Be,Te,O,{})}}export{Oe as default,Ne as prerender};
