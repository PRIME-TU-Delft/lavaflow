import{S as Q,i as K,s as X,e as k,t as q,k as D,c as w,a as E,h as H,d,m as j,b as I,g as y,J as p,E as R,Q as we,F,l as J,n as se,o as b,p as oe,q as g,G,H as W,I as z,j as Ee,R as Ie,w as M,x as N,y as O,B as P,v as ye,T as Ve,U as ie,f as ee,V as De,W as je}from"../../chunks/index-1b50ad3c.js";import{B as te,I as $e,m as Be,b as Se,c as Ce,d as Te}from"../../chunks/Button-b26903de.js";import{c as A,w as qe}from"../../chunks/singletons-d904a0d8.js";const ue=[{title:"3 marker visible",description:"To recognize the level curves, we need to have the 3 markers fully visible"},{title:"Curves should have sufficient margin",description:"The curves should have sufficient margin between them, overlapping or close lines are hard to interpret"},{title:"Markers shoud not be too far or close",description:"Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best result try to scan the paper as close to parallel as possible"},{title:"Drawing with dark pen",description:"To recognise your level curves, we prefer a dark and thic pen. Using a lighter pen will result in inaccurate results"},{title:"Propper lighting",description:"Level curves are hard to distinguish from background in a low light setting. Try to use natual daylight or a propper ceiling light for best results."},{title:"Close your curves",description:"To avoid false readings, close your curves as much as possible"},{title:"Only one paper should be visible",description:"To avoid false readings, only one paper should be visible at a time"}];function _e(n,e,t){const s=n.slice();return s[0]=e[t],s}function de(n){let e,t,s=n[0].title+"",o,l,r,c=n[0].description+"",i,a;return{c(){e=k("div"),t=k("div"),o=q(s),l=D(),r=k("div"),i=q(c),a=D(),this.h()},l(_){e=w(_,"DIV",{class:!0});var f=E(e);t=w(f,"DIV",{class:!0});var u=E(t);o=H(u,s),u.forEach(d),l=j(f),r=w(f,"DIV",{class:!0});var h=E(r);i=H(h,c),h.forEach(d),a=j(f),f.forEach(d),this.h()},h(){I(t,"class","title svelte-1fkle3y"),I(r,"class","description"),I(e,"class","instruction svelte-1fkle3y")},m(_,f){y(_,e,f),p(e,t),p(t,o),p(e,l),p(e,r),p(r,i),p(e,a)},p:R,d(_){_&&d(e)}}}function He(n){let e,t,s,o,l,r,c,i,a,_=ue,f=[];for(let u=0;u<_.length;u+=1)f[u]=de(_e(n,_,u));return{c(){e=k("div"),t=k("h2"),s=q("Good example of contour map"),o=D(),l=k("div"),r=D(),c=k("h2"),i=q("Instructions"),a=D();for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=w(u,"DIV",{class:!0});var h=E(e);t=w(h,"H2",{});var v=E(t);s=H(v,"Good example of contour map"),v.forEach(d),o=j(h),l=w(h,"DIV",{class:!0}),E(l).forEach(d),r=j(h),c=w(h,"H2",{});var $=E(c);i=H($,"Instructions"),$.forEach(d),a=j(h);for(let L=0;L<f.length;L+=1)f[L].l(h);h.forEach(d),this.h()},h(){I(l,"class","example svelte-1fkle3y"),I(e,"class","instructions svelte-1fkle3y")},m(u,h){y(u,e,h),p(e,t),p(t,s),p(e,o),p(e,l),p(e,r),p(e,c),p(c,i),p(e,a);for(let v=0;v<f.length;v+=1)f[v].m(e,null)},p(u,[h]){if(h&0){_=ue;let v;for(v=0;v<_.length;v+=1){const $=_e(u,_,v);f[v]?f[v].p($,h):(f[v]=de($),f[v].c(),f[v].m(e,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=_.length}},i:R,o:R,d(u){u&&d(e),we(f,u)}}}class Me extends Q{constructor(e){super(),K(this,e,null,He,X,{})}}const Ne=n=>({}),me=n=>({}),Oe=n=>({}),he=n=>({}),Pe=n=>({}),pe=n=>({});function Re(n){let e,t;return e=new te({props:{$$slots:{default:[Ae]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){M(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p(s,o){const l={};o&64&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Le(n){let e,t;return e=new te({props:{$$slots:{default:[Ue]},$$scope:{ctx:n}}}),e.$on("click",n[4]),{c(){M(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p(s,o){const l={};o&64&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ae(n){let e,t,s;return e=new $e({props:{path:Be,color:"var(--text-color)"}}),{c(){M(e.$$.fragment),t=q(`
						Back`)},l(o){N(e.$$.fragment,o),t=H(o,`
						Back`)},m(o,l){O(e,o,l),y(o,t,l),s=!0},p:R,i(o){s||(g(e.$$.fragment,o),s=!0)},o(o){b(e.$$.fragment,o),s=!1},d(o){P(e,o),o&&d(t)}}}function Ue(n){let e,t,s;return e=new $e({props:{path:Se,color:"var(--text-color)"}}),{c(){M(e.$$.fragment),t=q(`
						Close`)},l(o){N(e.$$.fragment,o),t=H(o,`
						Close`)},m(o,l){O(e,o,l),y(o,t,l),s=!0},p:R,i(o){s||(g(e.$$.fragment,o),s=!0)},o(o){b(e.$$.fragment,o),s=!1},d(o){P(e,o),o&&d(t)}}}function Fe(n){let e,t,s,o;const l=[Le,Re],r=[];function c(i,a){return i[1]?0:1}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),s=J()},l(i){t.l(i),s=J()},m(i,a){r[e].m(i,a),y(i,s,a),o=!0},p(i,a){let _=e;e=c(i),e===_?r[e].p(i,a):(se(),b(r[_],1,1,()=>{r[_]=null}),oe(),t=r[e],t?t.p(i,a):(t=r[e]=l[e](i),t.c()),g(t,1),t.m(s.parentNode,s))},i(i){o||(g(t),o=!0)},o(i){b(t),o=!1},d(i){r[e].d(i),i&&d(s)}}}function Ge(n){let e,t,s,o,l,r,c,i,a,_,f,u,h,v,$;const L=n[3].background,B=F(L,n,n[6],pe),le=n[3].headerButton,Y=F(le,n,n[6],he),S=Y||Fe(n),ne=n[3].default,C=F(ne,n,n[6],null),re=n[3].footer,T=F(re,n,n[6],me);return{c(){e=k("div"),t=k("div"),B&&B.c(),s=D(),o=k("div"),l=D(),r=k("div"),c=k("header"),S&&S.c(),i=D(),a=k("div"),_=q(n[0]),f=D(),u=k("main"),C&&C.c(),h=D(),v=k("footer"),T&&T.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var V=E(e);t=w(V,"DIV",{class:!0});var Z=E(t);B&&B.l(Z),s=j(Z),o=w(Z,"DIV",{class:!0}),E(o).forEach(d),Z.forEach(d),l=j(V),r=w(V,"DIV",{class:!0});var U=E(r);c=w(U,"HEADER",{class:!0});var x=E(c);S&&S.l(x),i=j(x),a=w(x,"DIV",{class:!0});var ae=E(a);_=H(ae,n[0]),ae.forEach(d),x.forEach(d),f=j(U),u=w(U,"MAIN",{class:!0});var ce=E(u);C&&C.l(ce),ce.forEach(d),h=j(U),v=w(U,"FOOTER",{class:!0});var fe=E(v);T&&T.l(fe),fe.forEach(d),U.forEach(d),V.forEach(d),this.h()},h(){I(o,"class","backdrop svelte-jvq22j"),I(t,"class","background svelte-jvq22j"),I(a,"class","title svelte-jvq22j"),I(c,"class","svelte-jvq22j"),I(u,"class","svelte-jvq22j"),I(v,"class","svelte-jvq22j"),I(r,"class","foreground svelte-jvq22j"),I(e,"class","page svelte-jvq22j")},m(m,V){y(m,e,V),p(e,t),B&&B.m(t,null),p(t,s),p(t,o),p(e,l),p(e,r),p(r,c),S&&S.m(c,null),p(c,i),p(c,a),p(a,_),p(r,f),p(r,u),C&&C.m(u,null),p(r,h),p(r,v),T&&T.m(v,null),$=!0},p(m,[V]){B&&B.p&&(!$||V&64)&&G(B,L,m,m[6],$?z(L,m[6],V,Pe):W(m[6]),pe),Y?Y.p&&(!$||V&64)&&G(Y,le,m,m[6],$?z(le,m[6],V,Oe):W(m[6]),he):S&&S.p&&(!$||V&2)&&S.p(m,$?V:-1),(!$||V&1)&&Ee(_,m[0]),C&&C.p&&(!$||V&64)&&G(C,ne,m,m[6],$?z(ne,m[6],V,null):W(m[6]),null),T&&T.p&&(!$||V&64)&&G(T,re,m,m[6],$?z(re,m[6],V,Ne):W(m[6]),me)},i(m){$||(g(B,m),g(S,m),g(C,m),g(T,m),$=!0)},o(m){b(B,m),b(S,m),b(C,m),b(T,m),$=!1},d(m){m&&d(e),B&&B.d(m),S&&S.d(m),C&&C.d(m),T&&T.d(m)}}}function We(n,e,t){let{$$slots:s={},$$scope:o}=e,{title:l=""}=e,{closeButton:r=!1}=e;const c=Ie(),i=()=>c("close"),a=()=>history.back();return n.$$set=_=>{"title"in _&&t(0,l=_.title),"closeButton"in _&&t(1,r=_.closeButton),"$$scope"in _&&t(6,o=_.$$scope)},[l,r,c,s,i,a,o]}class ze extends Q{constructor(e){super(),K(this,e,We,Ge,X,{title:0,closeButton:1})}}const Je=n=>({loading:n&2,stream:n&1,error:n&4}),ve=n=>({loading:n[1],stream:n[0],error:n[2]});function Qe(n){let e;const t=n[4].default,s=F(t,n,n[3],ve);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,l){s&&s.m(o,l),e=!0},p(o,[l]){s&&s.p&&(!e||l&15)&&G(s,t,o,o[3],e?z(t,o[3],l,Je):W(o[3]),ve)},i(o){e||(g(s,o),e=!0)},o(o){b(s,o),e=!1},d(o){s&&s.d(o)}}}function Ke(n,e,t){let{$$slots:s={},$$scope:o}=e,l,r=!0,c;const i=async()=>{try{t(1,r=!0),t(0,l=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})),t(1,r=!1),t(2,c="")}catch(a){t(2,c=""+a)}};return ye(async()=>{await i()}),Ve(()=>{!l||l.getTracks().forEach(a=>a.stop())}),n.$$set=a=>{"$$scope"in a&&t(3,o=a.$$scope)},[l,r,c,o,s]}class Xe extends Q{constructor(e){super(),K(this,e,Ke,Qe,X,{})}}function Ye(n){let e;return{c(){e=k("video"),this.h()},l(t){e=w(t,"VIDEO",{style:!0,class:!0}),E(e).forEach(d),this.h()},h(){I(e,"style",n[1]),I(e,"class","svelte-wvnab8")},m(t,s){y(t,e,s),n[7](e)},p(t,s){s&2&&I(e,"style",t[1])},i:R,o:R,d(t){t&&d(e),n[7](null)}}}function Ze(n){let e,t,s,o,l,r=n[3]&&n[3].includes("Permission denied"),c,i,a=r&&ge();const _=n[6].default,f=F(_,n,n[5],null);return{c(){e=k("div"),t=k("div"),s=k("h1"),o=q("Loading video..."),l=D(),a&&a.c(),c=D(),f&&f.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var h=E(e);t=w(h,"DIV",{class:!0});var v=E(t);s=w(v,"H1",{class:!0});var $=E(s);o=H($,"Loading video..."),$.forEach(d),l=j(v),a&&a.l(v),v.forEach(d),h.forEach(d),c=j(u),f&&f.l(u),this.h()},h(){I(s,"class","svelte-wvnab8"),I(t,"class","svelte-wvnab8"),I(e,"class","loadingVideo svelte-wvnab8")},m(u,h){y(u,e,h),p(e,t),p(t,s),p(s,o),p(t,l),a&&a.m(t,null),y(u,c,h),f&&f.m(u,h),i=!0},p(u,h){h&8&&(r=u[3]&&u[3].includes("Permission denied")),r?a||(a=ge(),a.c(),a.m(t,null)):a&&(a.d(1),a=null),f&&f.p&&(!i||h&32)&&G(f,_,u,u[5],i?z(_,u[5],h,null):W(u[5]),null)},i(u){i||(g(f,u),i=!0)},o(u){b(f,u),i=!1},d(u){u&&d(e),a&&a.d(),u&&d(c),f&&f.d(u)}}}function ge(n){let e;return{c(){e=q("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=H(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function xe(n){let e,t,s,o;const l=[Ze,Ye],r=[];function c(i,a){return i[2]?0:1}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),s=J()},l(i){t.l(i),s=J()},m(i,a){r[e].m(i,a),y(i,s,a),o=!0},p(i,[a]){let _=e;e=c(i),e===_?r[e].p(i,a):(se(),b(r[_],1,1,()=>{r[_]=null}),oe(),t=r[e],t?t.p(i,a):(t=r[e]=l[e](i),t.c()),g(t,1),t.m(s.parentNode,s))},i(i){o||(g(t),o=!0)},o(i){b(t),o=!1},d(i){r[e].d(i),i&&d(s)}}}function et(n,e,t){let{$$slots:s={},$$scope:o}=e,{stream:l}=e,{style:r=""}=e,{loading:c=!0}=e,{error:i=""}=e,{videoSource:a=void 0}=e;function _(f){ie[f?"unshift":"push"](()=>{a=f,t(0,a),t(4,l),t(2,c)})}return n.$$set=f=>{"stream"in f&&t(4,l=f.stream),"style"in f&&t(1,r=f.style),"loading"in f&&t(2,c=f.loading),"error"in f&&t(3,i=f.error),"videoSource"in f&&t(0,a=f.videoSource),"$$scope"in f&&t(5,o=f.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&l&&!c&&a&&a.paused&&(t(0,a.srcObject=l,a),a.play())},[a,r,c,i,l,o,s,_]}class ke extends Q{constructor(e){super(),K(this,e,et,xe,X,{stream:4,style:1,loading:2,error:3,videoSource:0})}}A.disable_scroll_handling;const tt=A.goto;A.invalidate;A.prefetch;A.prefetch_routes;A.before_navigate;A.after_navigate;const st=qe();function ot(n){let e,t,s,o;function l(c){n[7](c)}let r={error:n[11],loading:n[9],stream:n[10],$$slots:{default:[nt]},$$scope:{ctx:n}};return n[1]!==void 0&&(r.videoSource=n[1]),e=new ke({props:r}),ie.push(()=>De(e,"videoSource",l)),{c(){t=k("div"),M(e.$$.fragment),this.h()},l(c){t=w(c,"DIV",{style:!0});var i=E(t);N(e.$$.fragment,i),this.h()},h(){ee(t,"display","contents"),ee(t,"--corner-radius","1rem")},m(c,i){y(c,t,i),O(e,t,null),o=!0},p(c,i){const a={};i&2048&&(a.error=c[11]),i&512&&(a.loading=c[9]),i&1024&&(a.stream=c[10]),i&4096&&(a.$$scope={dirty:i,ctx:c}),!s&&i&2&&(s=!0,a.videoSource=c[1],je(()=>s=!1)),e.$set(a)},i(c){o||(g(e.$$.fragment,c),o=!0)},o(c){b(e.$$.fragment,c),o=!1},d(c){c&&d(t),P(e,c)}}}function lt(n){let e,t;return e=new Me({}),{c(){M(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p:R,i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function nt(n){let e,t;return{c(){e=k("h1"),t=q("loading...")},l(s){e=w(s,"H1",{});var o=E(e);t=H(o,"loading..."),o.forEach(d)},m(s,o){y(s,e,o),p(e,t)},p:R,d(s){s&&d(e)}}}function rt(n){let e,t,s,o;const l=[lt,ot],r=[];function c(i,a){return i[0]?0:1}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),s=J()},l(i){t.l(i),s=J()},m(i,a){r[e].m(i,a),y(i,s,a),o=!0},p(i,a){let _=e;e=c(i),e===_?r[e].p(i,a):(se(),b(r[_],1,1,()=>{r[_]=null}),oe(),t=r[e],t?t.p(i,a):(t=r[e]=l[e](i),t.c()),g(t,1),t.m(s.parentNode,s))},i(i){o||(g(t),o=!0)},o(i){b(t),o=!1},d(i){r[e].d(i),i&&d(s)}}}function it(n){let e,t,s;return t=new ke({props:{loading:n[9],stream:n[10]}}),{c(){e=k("div"),M(t.$$.fragment),this.h()},l(o){e=w(o,"DIV",{slot:!0});var l=E(e);N(t.$$.fragment,l),l.forEach(d),this.h()},h(){I(e,"slot","background")},m(o,l){y(o,e,l),O(t,e,null),s=!0},p(o,l){const r={};l&512&&(r.loading=o[9]),l&1024&&(r.stream=o[10]),t.$set(r)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){b(t.$$.fragment,o),s=!1},d(o){o&&d(e),P(t)}}}function be(n){let e,t,s,o;return e=new te({props:{secondary:!0,icon:Ce,$$slots:{default:[at]},$$scope:{ctx:n}}}),e.$on("click",n[5]),s=new te({props:{loading:n[3],icon:Te,$$slots:{default:[ct]},$$scope:{ctx:n}}}),s.$on("click",n[6]),{c(){M(e.$$.fragment),t=D(),M(s.$$.fragment)},l(l){N(e.$$.fragment,l),t=j(l),N(s.$$.fragment,l)},m(l,r){O(e,l,r),y(l,t,r),O(s,l,r),o=!0},p(l,r){const c={};r&4096&&(c.$$scope={dirty:r,ctx:l}),e.$set(c);const i={};r&8&&(i.loading=l[3]),r&4096&&(i.$$scope={dirty:r,ctx:l}),s.$set(i)},i(l){o||(g(e.$$.fragment,l),g(s.$$.fragment,l),o=!0)},o(l){b(e.$$.fragment,l),b(s.$$.fragment,l),o=!1},d(l){P(e,l),l&&d(t),P(s,l)}}}function at(n){let e;return{c(){e=q("Read scan instructions")},l(t){e=H(t,"Read scan instructions")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function ct(n){let e;return{c(){e=q("Capture photo of map")},l(t){e=H(t,"Capture photo of map")},m(t,s){y(t,e,s)},d(t){t&&d(e)}}}function ft(n){let e,t,s=!n[0]&&be(n);return{c(){e=k("div"),s&&s.c(),this.h()},l(o){e=w(o,"DIV",{slot:!0});var l=E(e);s&&s.l(l),l.forEach(d),this.h()},h(){I(e,"slot","footer")},m(o,l){y(o,e,l),s&&s.m(e,null),t=!0},p(o,l){o[0]?s&&(se(),b(s,1,1,()=>{s=null}),oe()):s?(s.p(o,l),l&1&&g(s,1)):(s=be(o),s.c(),g(s,1),s.m(e,null))},i(o){t||(g(s),t=!0)},o(o){b(s),t=!1},d(o){o&&d(e),s&&s.d()}}}function ut(n){let e,t;return e=new ze({props:{title:n[4],closeButton:n[0],$$slots:{footer:[ft],background:[it],default:[rt]},$$scope:{ctx:n}}}),e.$on("close",n[5]),{c(){M(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,o){O(e,s,o),t=!0},p(s,o){const l={};o&16&&(l.title=s[4]),o&1&&(l.closeButton=s[0]),o&7691&&(l.$$scope={dirty:o,ctx:s}),e.$set(l)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function _t(n){let e,t,s,o;return e=new Xe({props:{$$slots:{default:[ut,({loading:l,stream:r,error:c})=>({9:l,10:r,11:c}),({loading:l,stream:r,error:c})=>(l?512:0)|(r?1024:0)|(c?2048:0)]},$$scope:{ctx:n}}}),{c(){M(e.$$.fragment),t=D(),s=k("canvas"),this.h()},l(l){N(e.$$.fragment,l),t=j(l),s=w(l,"CANVAS",{id:!0,style:!0}),E(s).forEach(d),this.h()},h(){I(s,"id","captureCanvas"),ee(s,"display","none"),ee(s,"position","absolute")},m(l,r){O(e,l,r),y(l,t,r),y(l,s,r),n[8](s),o=!0},p(l,[r]){const c={};r&7707&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){o||(g(e.$$.fragment,l),o=!0)},o(l){b(e.$$.fragment,l),o=!1},d(l){P(e,l),l&&d(t),l&&d(s),n[8](null)}}}function dt(n,e,t){let s,o=!1,l,r,c=!1;const i=()=>t(0,o=!o);async function a(){t(3,c=!0);const u=r.getContext("2d");t(2,r.height=l.videoHeight,r),t(2,r.width=l.videoWidth,r),u&&u.drawImage(l,0,0,r.width,r.height);const h=r.toDataURL("image/png");st.set(h),tt("/scan/maptransform")}function _(u){l=u,t(1,l)}function f(u){ie[u?"unshift":"push"](()=>{r=u,t(2,r)})}return n.$$.update=()=>{n.$$.dirty&1&&t(4,s=o?"Instructions":"Map Scanning")},[o,l,r,c,s,i,a,_,f]}class vt extends Q{constructor(e){super(),K(this,e,dt,_t,X,{})}}export{vt as default};
