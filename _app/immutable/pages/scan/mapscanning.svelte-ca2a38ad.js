import{S as le,i as ce,s as ue,e as h,t as w,k as I,c as p,a as _,h as k,d as v,m as D,b as m,g as E,K as c,E as x,F as nt,G as it,H as at,I as lt,q as y,o as V,v as dt,L as ft,l as et,n as Le,p as Me,Z as ee,_ as Oe,w as T,x as C,f as ae,y as B,W as Fe,B as P,j as vt}from"../../chunks/index-e68930ae.js";import{N as gt,B as ct,m as mt,a as ht}from"../../chunks/NavigationButton-a585e3a7.js";import{D as pt}from"../../chunks/Dropdown-d505fd1f.js";import{P as _t}from"../../chunks/Page-5d16365d.js";import{M as bt}from"../../chunks/Modal-008d343e.js";import{g as $t}from"../../chunks/navigation-0e6511d1.js";import{r as wt}from"../../chunks/imageStore-d44a0a04.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/index-05c9b9b1.js";function kt(i){let e,s,t,r,n,o,a,u,f,d,l,g,b,S,L,z,M,de,fe,O,j,ve,ge,U,me,he,F,G,pe,_e,q,be,$e,A,we,ke,H,W,Ie,De,K,ye,Ve,N,Z,Ee,ze,J,Se,Te,R,Q,Ce,Be,X,Pe;return{c(){e=h("div"),s=h("h2"),t=w("Good example of contour map"),r=I(),n=h("div"),o=I(),a=h("h2"),u=w("Instructions"),f=I(),d=h("div"),l=w("Drawing"),g=I(),b=h("div"),S=h("div"),L=w("Curves should have sufficient margin"),z=I(),M=h("div"),de=w(`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),fe=I(),O=h("div"),j=h("div"),ve=w("Drawing with dark pen"),ge=I(),U=h("div"),me=w(`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),he=I(),F=h("div"),G=h("div"),pe=w("Close your curves"),_e=I(),q=h("div"),be=w("To avoid false readings, close your curves, dont leave any open-ended lines"),$e=I(),A=h("div"),we=w("Scanning"),ke=I(),H=h("div"),W=h("div"),Ie=w("Four corners visible"),De=I(),K=h("div"),ye=w("To scan the level curves, we need to have the four corners visible"),Ve=I(),N=h("div"),Z=h("div"),Ee=w("Drawing should not be too far"),ze=I(),J=h("div"),Se=w(`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Te=I(),R=h("div"),Q=h("div"),Ce=w("Proper lighting"),Be=I(),X=h("div"),Pe=w(`Level curves are hard to distinguish from the background in a low light setting. Try to use natural
			daylight or a propper ceiling light for the best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),this.h()},l(Y){e=p(Y,"DIV",{class:!0});var $=_(e);s=p($,"H2",{});var He=_(s);t=k(He,"Good example of contour map"),He.forEach(v),r=D($),n=p($,"DIV",{class:!0}),_(n).forEach(v),o=D($),a=p($,"H2",{});var Ne=_(a);u=k(Ne,"Instructions"),Ne.forEach(v),f=D($),d=p($,"DIV",{class:!0});var Re=_(d);l=k(Re,"Drawing"),Re.forEach(v),g=D($),b=p($,"DIV",{class:!0});var te=_(b);S=p(te,"DIV",{class:!0});var je=_(S);L=k(je,"Curves should have sufficient margin"),je.forEach(v),z=D(te),M=p(te,"DIV",{class:!0});var Ue=_(M);de=k(Ue,`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),Ue.forEach(v),te.forEach(v),fe=D($),O=p($,"DIV",{class:!0});var se=_(O);j=p(se,"DIV",{class:!0});var Ge=_(j);ve=k(Ge,"Drawing with dark pen"),Ge.forEach(v),ge=D(se),U=p(se,"DIV",{class:!0});var qe=_(U);me=k(qe,`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),qe.forEach(v),se.forEach(v),he=D($),F=p($,"DIV",{class:!0});var re=_(F);G=p(re,"DIV",{class:!0});var Ae=_(G);pe=k(Ae,"Close your curves"),Ae.forEach(v),_e=D(re),q=p(re,"DIV",{class:!0});var We=_(q);be=k(We,"To avoid false readings, close your curves, dont leave any open-ended lines"),We.forEach(v),re.forEach(v),$e=D($),A=p($,"DIV",{class:!0});var Ke=_(A);we=k(Ke,"Scanning"),Ke.forEach(v),ke=D($),H=p($,"DIV",{class:!0});var oe=_(H);W=p(oe,"DIV",{class:!0});var Ze=_(W);Ie=k(Ze,"Four corners visible"),Ze.forEach(v),De=D(oe),K=p(oe,"DIV",{class:!0});var Je=_(K);ye=k(Je,"To scan the level curves, we need to have the four corners visible"),Je.forEach(v),oe.forEach(v),Ve=D($),N=p($,"DIV",{class:!0});var ne=_(N);Z=p(ne,"DIV",{class:!0});var Qe=_(Z);Ee=k(Qe,"Drawing should not be too far"),Qe.forEach(v),ze=D(ne),J=p(ne,"DIV",{class:!0});var Xe=_(J);Se=k(Xe,`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Xe.forEach(v),ne.forEach(v),Te=D($),R=p($,"DIV",{class:!0});var ie=_(R);Q=p(ie,"DIV",{class:!0});var Ye=_(Q);Ce=k(Ye,"Proper lighting"),Ye.forEach(v),Be=D(ie),X=p(ie,"DIV",{class:!0});var xe=_(X);Pe=k(xe,`Level curves are hard to distinguish from the background in a low light setting. Try to use natural
			daylight or a propper ceiling light for the best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),xe.forEach(v),ie.forEach(v),$.forEach(v),this.h()},h(){m(n,"class","example svelte-1gz6cx3"),m(d,"class","section svelte-1gz6cx3"),m(S,"class","title svelte-1gz6cx3"),m(M,"class","description"),m(b,"class","instruction svelte-1gz6cx3"),m(j,"class","title svelte-1gz6cx3"),m(U,"class","description"),m(O,"class","instruction svelte-1gz6cx3"),m(G,"class","title svelte-1gz6cx3"),m(q,"class","description"),m(F,"class","instruction svelte-1gz6cx3"),m(A,"class","section svelte-1gz6cx3"),m(W,"class","title svelte-1gz6cx3"),m(K,"class","description"),m(H,"class","instruction svelte-1gz6cx3"),m(Z,"class","title svelte-1gz6cx3"),m(J,"class","description"),m(N,"class","instruction svelte-1gz6cx3"),m(Q,"class","title svelte-1gz6cx3"),m(X,"class","description"),m(R,"class","instruction svelte-1gz6cx3"),m(e,"class","instructions svelte-1gz6cx3")},m(Y,$){E(Y,e,$),c(e,s),c(s,t),c(e,r),c(e,n),c(e,o),c(e,a),c(a,u),c(e,f),c(e,d),c(d,l),c(e,g),c(e,b),c(b,S),c(S,L),c(b,z),c(b,M),c(M,de),c(e,fe),c(e,O),c(O,j),c(j,ve),c(O,ge),c(O,U),c(U,me),c(e,he),c(e,F),c(F,G),c(G,pe),c(F,_e),c(F,q),c(q,be),c(e,$e),c(e,A),c(A,we),c(e,ke),c(e,H),c(H,W),c(W,Ie),c(H,De),c(H,K),c(K,ye),c(e,Ve),c(e,N),c(N,Z),c(Z,Ee),c(N,ze),c(N,J),c(J,Se),c(e,Te),c(e,R),c(R,Q),c(Q,Ce),c(R,Be),c(R,X),c(X,Pe)},p:x,i:x,o:x,d(Y){Y&&v(e)}}}class It extends le{constructor(e){super(),ce(this,e,null,kt,ue,{})}}const Dt=i=>({loading:i&2,stream:i&1,error:i&4,cameraOptions:i&8}),tt=i=>({loading:i[1],stream:i[0],error:i[2],cameraOptions:i[3]});function yt(i){let e;const s=i[6].default,t=nt(s,i,i[5],tt);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,n){t&&t.m(r,n),e=!0},p(r,[n]){t&&t.p&&(!e||n&47)&&it(t,s,r,r[5],e?lt(s,r[5],n,Dt):at(r[5]),tt)},i(r){e||(y(t,r),e=!0)},o(r){V(t,r),e=!1},d(r){t&&t.d(r)}}}function Vt(i,e,s){let{$$slots:t={},$$scope:r}=e,{deviceId:n=""}=e,o,a=!0,u,f=[];const d=async()=>{s(1,a=!0),o&&o.getTracks().forEach(g=>g.stop());const l=n?{deviceId:{exact:n}}:{facingMode:"environment"};try{s(0,o=await navigator.mediaDevices.getUserMedia({video:l})),s(1,a=!1),s(2,u="")}catch(g){s(2,u=""+g)}};return dt(async()=>{await d();const l=await navigator.mediaDevices.enumerateDevices();s(3,f=l.filter(g=>g.kind=="videoinput"))}),ft(()=>{!o||o.getTracks().forEach(l=>l.stop())}),i.$$set=l=>{"deviceId"in l&&s(4,n=l.deviceId),"$$scope"in l&&s(5,r=l.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&n&&d()},[o,a,u,f,n,r,t]}class Et extends le{constructor(e){super(),ce(this,e,Vt,yt,ue,{deviceId:4})}}function zt(i){let e;return{c(){e=h("video"),this.h()},l(s){e=p(s,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),_(e).forEach(v),this.h()},h(){m(e,"style",i[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,m(e,"preload","auto"),m(e,"type","video/mp4"),m(e,"class","svelte-13uo3u7")},m(s,t){E(s,e,t),i[7](e)},p(s,t){t&2&&m(e,"style",s[1])},i:x,o:x,d(s){s&&v(e),i[7](null)}}}function St(i){let e,s,t,r,n,o=i[3]&&i[3].includes("Permission denied"),a,u,f=o&&st();const d=i[6].default,l=nt(d,i,i[5],null);return{c(){e=h("div"),s=h("div"),t=h("h2"),r=w("Loading video..."),n=I(),f&&f.c(),a=I(),l&&l.c(),this.h()},l(g){e=p(g,"DIV",{class:!0});var b=_(e);s=p(b,"DIV",{class:!0});var S=_(s);t=p(S,"H2",{class:!0});var L=_(t);r=k(L,"Loading video..."),L.forEach(v),n=D(S),f&&f.l(S),S.forEach(v),b.forEach(v),a=D(g),l&&l.l(g),this.h()},h(){m(t,"class","svelte-13uo3u7"),m(s,"class","svelte-13uo3u7"),m(e,"class","loadingVideo svelte-13uo3u7")},m(g,b){E(g,e,b),c(e,s),c(s,t),c(t,r),c(s,n),f&&f.m(s,null),E(g,a,b),l&&l.m(g,b),u=!0},p(g,b){b&8&&(o=g[3]&&g[3].includes("Permission denied")),o?f||(f=st(),f.c(),f.m(s,null)):f&&(f.d(1),f=null),l&&l.p&&(!u||b&32)&&it(l,d,g,g[5],u?lt(d,g[5],b,null):at(g[5]),null)},i(g){u||(y(l,g),u=!0)},o(g){V(l,g),u=!1},d(g){g&&v(e),f&&f.d(),g&&v(a),l&&l.d(g)}}}function st(i){let e;return{c(){e=w("The browser is unable to access the camera, try re-enabling the camera and reload")},l(s){e=k(s,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(s,t){E(s,e,t)},d(s){s&&v(e)}}}function Tt(i){let e,s,t,r;const n=[St,zt],o=[];function a(u,f){return u[2]?0:1}return e=a(i),s=o[e]=n[e](i),{c(){s.c(),t=et()},l(u){s.l(u),t=et()},m(u,f){o[e].m(u,f),E(u,t,f),r=!0},p(u,[f]){let d=e;e=a(u),e===d?o[e].p(u,f):(Le(),V(o[d],1,1,()=>{o[d]=null}),Me(),s=o[e],s?s.p(u,f):(s=o[e]=n[e](u),s.c()),y(s,1),s.m(t.parentNode,t))},i(u){r||(y(s),r=!0)},o(u){V(s),r=!1},d(u){o[e].d(u),u&&v(t)}}}function Ct(i,e,s){let{$$slots:t={},$$scope:r}=e,{stream:n}=e,{style:o=""}=e,{loading:a=!0}=e,{error:u=""}=e,{videoSource:f=void 0}=e;function d(l){ee[l?"unshift":"push"](()=>{f=l,s(0,f),s(4,n),s(2,a)})}return i.$$set=l=>{"stream"in l&&s(4,n=l.stream),"style"in l&&s(1,o=l.style),"loading"in l&&s(2,a=l.loading),"error"in l&&s(3,u=l.error),"videoSource"in l&&s(0,f=l.videoSource),"$$scope"in l&&s(5,r=l.$$scope)},i.$$.update=()=>{i.$$.dirty&21&&n&&!a&&f&&f.paused&&(s(0,f.srcObject=n,f),f.play())},[f,o,a,u,n,r,t,d]}class ut extends le{constructor(e){super(),ce(this,e,Ct,Tt,ue,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function Bt(i){let e,s;return e=new It({}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Pt(i){let e,s,t,r;function n(a){i[11](a)}let o={error:i[15],loading:i[13],stream:i[14]};return i[1]!==void 0&&(o.videoSource=i[1]),e=new ut({props:o}),ee.push(()=>Oe(e,"videoSource",n)),{c(){s=h("div"),T(e.$$.fragment),this.h()},l(a){s=p(a,"DIV",{style:!0});var u=_(s);C(e.$$.fragment,u),this.h()},h(){ae(s,"display","contents"),ae(s,"--corner-radius","1rem")},m(a,u){E(a,s,u),B(e,s,null),r=!0},p(a,u){const f={};u&32768&&(f.error=a[15]),u&8192&&(f.loading=a[13]),u&16384&&(f.stream=a[14]),!t&&u&2&&(t=!0,f.videoSource=a[1],Fe(()=>t=!1)),e.$set(f)},i(a){r||(y(e.$$.fragment,a),r=!0)},o(a){V(e.$$.fragment,a),r=!1},d(a){a&&v(s),P(e,a)}}}function Lt(i){let e;return{c(){e=w("Back home")},l(s){e=k(s,"Back home")},m(s,t){E(s,e,t)},d(s){s&&v(e)}}}function Mt(i){let e,s;return e=new gt({props:{slot:"headerButton",back:!0,to:"/",$$slots:{default:[Lt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const n={};r&524288&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Ot(i){let e,s,t;return s=new ut({props:{loading:i[13],stream:i[14]}}),{c(){e=h("div"),T(s.$$.fragment),this.h()},l(r){e=p(r,"DIV",{slot:!0});var n=_(e);C(s.$$.fragment,n),n.forEach(v),this.h()},h(){m(e,"slot","background")},m(r,n){E(r,e,n),B(s,e,null),t=!0},p(r,n){const o={};n&8192&&(o.loading=r[13]),n&16384&&(o.stream=r[14]),s.$set(o)},i(r){t||(y(s.$$.fragment,r),t=!0)},o(r){V(s.$$.fragment,r),t=!1},d(r){r&&v(e),P(s)}}}function rt(i){let e,s,t;function r(o){i[10](o)}let n={options:i[16],$$slots:{default:[Ft,({option:o,index:a})=>({17:o,18:a}),({option:o,index:a})=>(o?131072:0)|(a?262144:0)]},$$scope:{ctx:i}};return i[2]!==void 0&&(n.value=i[2]),e=new pt({props:n}),ee.push(()=>Oe(e,"value",r)),e.$on("change",i[8]),{c(){T(e.$$.fragment)},l(o){C(e.$$.fragment,o)},m(o,a){B(e,o,a),t=!0},p(o,a){const u={};a&65536&&(u.options=o[16]),a&917504&&(u.$$scope={dirty:a,ctx:o}),!s&&a&4&&(s=!0,u.value=o[2],Fe(()=>s=!1)),e.$set(u)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){V(e.$$.fragment,o),t=!1},d(o){P(e,o)}}}function Ft(i){let e=(i[17].label||"Camera "+(i[18]+1))+"",s;return{c(){s=w(e)},l(t){s=k(t,e)},m(t,r){E(t,s,r)},p(t,r){r&393216&&e!==(e=(t[17].label||"Camera "+(t[18]+1))+"")&&vt(s,e)},d(t){t&&v(s)}}}function Ht(i){var r;let e,s,t=!i[0]&&((r=i[16])==null?void 0:r.length)>1&&rt(i);return{c(){e=h("div"),t&&t.c(),this.h()},l(n){e=p(n,"DIV",{slot:!0});var o=_(e);t&&t.l(o),o.forEach(v),this.h()},h(){m(e,"slot","options")},m(n,o){E(n,e,o),t&&t.m(e,null),s=!0},p(n,o){var a;!n[0]&&((a=n[16])==null?void 0:a.length)>1?t?(t.p(n,o),o&65537&&y(t,1)):(t=rt(n),t.c(),y(t,1),t.m(e,null)):t&&(Le(),V(t,1,1,()=>{t=null}),Me())},i(n){s||(y(t),s=!0)},o(n){V(t),s=!1},d(n){n&&v(e),t&&t.d()}}}function ot(i){let e,s;return e=new ct({props:{secondary:!0,icon:ht,$$slots:{default:[Nt]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const n={};r&524288&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Nt(i){let e;return{c(){e=w("Read scan instructions")},l(s){e=k(s,"Read scan instructions")},m(s,t){E(s,e,t)},d(s){s&&v(e)}}}function Rt(i){let e;return{c(){e=w("Capture photo of map")},l(s){e=k(s,"Capture photo of map")},m(s,t){E(s,e,t)},d(s){s&&v(e)}}}function jt(i){let e,s,t,r,n=!i[0]&&ot(i);return t=new ct({props:{loading:i[4],icon:mt,$$slots:{default:[Rt]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){e=h("div"),n&&n.c(),s=I(),T(t.$$.fragment),this.h()},l(o){e=p(o,"DIV",{slot:!0});var a=_(e);n&&n.l(a),s=D(a),C(t.$$.fragment,a),a.forEach(v),this.h()},h(){m(e,"slot","footer")},m(o,a){E(o,e,a),n&&n.m(e,null),c(e,s),B(t,e,null),r=!0},p(o,a){o[0]?n&&(Le(),V(n,1,1,()=>{n=null}),Me()):n?(n.p(o,a),a&1&&y(n,1)):(n=ot(o),n.c(),y(n,1),n.m(e,s));const u={};a&16&&(u.loading=o[4]),a&524288&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)},i(o){r||(y(n),y(t.$$.fragment,o),r=!0)},o(o){V(n),V(t.$$.fragment,o),r=!1},d(o){o&&v(e),n&&n.d(),P(t)}}}function Ut(i){let e,s;return e=new _t({props:{fullscreen:!i[13],title:"Capture the image",$$slots:{footer:[jt],options:[Ht],background:[Ot],headerButton:[Mt],default:[Pt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const n={};r&8192&&(n.fullscreen=!t[13]),r&647191&&(n.$$scope={dirty:r,ctx:t}),e.$set(n)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){V(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Gt(i){let e,s,t,r,n,o,a;function u(d){i[9](d)}let f={title:"scan instructions",$$slots:{default:[Bt]},$$scope:{ctx:i}};return i[0]!==void 0&&(f.visible=i[0]),e=new bt({props:f}),ee.push(()=>Oe(e,"visible",u)),r=new Et({props:{deviceId:i[5],$$slots:{default:[Ut,({loading:d,stream:l,error:g,cameraOptions:b})=>({13:d,14:l,15:g,16:b}),({loading:d,stream:l,error:g,cameraOptions:b})=>(d?8192:0)|(l?16384:0)|(g?32768:0)|(b?65536:0)]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment),t=I(),T(r.$$.fragment),n=I(),o=h("canvas"),this.h()},l(d){C(e.$$.fragment,d),t=D(d),C(r.$$.fragment,d),n=D(d),o=p(d,"CANVAS",{id:!0,style:!0}),_(o).forEach(v),this.h()},h(){m(o,"id","captureCanvas"),ae(o,"display","none"),ae(o,"position","absolute")},m(d,l){B(e,d,l),E(d,t,l),B(r,d,l),E(d,n,l),E(d,o,l),i[12](o),a=!0},p(d,[l]){const g={};l&524288&&(g.$$scope={dirty:l,ctx:d}),!s&&l&1&&(s=!0,g.visible=d[0],Fe(()=>s=!1)),e.$set(g);const b={};l&32&&(b.deviceId=d[5]),l&647191&&(b.$$scope={dirty:l,ctx:d}),r.$set(b)},i(d){a||(y(e.$$.fragment,d),y(r.$$.fragment,d),a=!0)},o(d){V(e.$$.fragment,d),V(r.$$.fragment,d),a=!1},d(d){P(e,d),d&&v(t),P(r,d),d&&v(n),d&&v(o),i[12](null)}}}const es=!0;function qt(i,e,s){let t,r,n,o,a=!1,u;const f=()=>s(0,t=!t);async function d(){s(4,a=!0);const z=o.getContext("2d");s(3,o.height=r.videoHeight,o),s(3,o.width=r.videoWidth,o),z&&z.drawImage(r,0,0,o.width,o.height);const M=o.toDataURL("image/png");wt.set(M),$t("/scan/maptransform")}function l(){s(5,u=n.deviceId)}function g(z){t=z,s(0,t)}function b(z){n=z,s(2,n)}function S(z){r=z,s(1,r)}function L(z){ee[z?"unshift":"push"](()=>{o=z,s(3,o)})}return[t,r,n,o,a,u,f,d,l,g,b,S,L]}class ts extends le{constructor(e){super(),ce(this,e,qt,Gt,ue,{})}}export{ts as default,es as prerender};
