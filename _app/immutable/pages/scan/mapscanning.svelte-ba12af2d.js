import{S as le,i as ce,s as ue,e as h,t as w,k as I,c as p,a as _,h as k,d as v,m as D,b as m,g as E,K as c,E as x,F as nt,G as it,H as at,I as lt,q as y,o as V,v as dt,L as ft,l as et,n as He,p as Le,Y as ee,Z as Me,w as T,x as C,f as ae,y as B,V as Ne,B as P,j as vt}from"../../chunks/index-3caf340a.js";import{N as gt,B as ct,a as mt,b as ht}from"../../chunks/NavigationButton-7cc1e631.js";import{D as pt}from"../../chunks/Dropdown-81f65c5e.js";import{P as _t}from"../../chunks/Page-4c7d5abf.js";import{M as bt}from"../../chunks/Modal-32b5a7a8.js";import{g as $t}from"../../chunks/navigation-0e6511d1.js";import{r as wt}from"../../chunks/imageStore-e8ef8a05.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/index-8232aae9.js";function kt(i){let e,t,s,r,o,n,a,d,f,u,l,g,b,S,H,z,L,de,fe,M,U,ve,ge,G,me,he,N,R,pe,_e,q,be,$e,A,we,ke,F,K,Ie,De,W,ye,Ve,O,Y,Ee,ze,Z,Se,Te,j,J,Ce,Be,Q,Pe;return{c(){e=h("div"),t=h("h2"),s=w("Good example of contour map"),r=I(),o=h("div"),n=I(),a=h("h2"),d=w("Instructions"),f=I(),u=h("div"),l=w("Drawing"),g=I(),b=h("div"),S=h("div"),H=w("Curves should have sufficient margin"),z=I(),L=h("div"),de=w(`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),fe=I(),M=h("div"),U=h("div"),ve=w("Drawing with dark pen"),ge=I(),G=h("div"),me=w(`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),he=I(),N=h("div"),R=h("div"),pe=w("Close your curves"),_e=I(),q=h("div"),be=w("To avoid false readings, close your curves, dont leave any open-ended lines"),$e=I(),A=h("div"),we=w("Scanning"),ke=I(),F=h("div"),K=h("div"),Ie=w("Four corners visible"),De=I(),W=h("div"),ye=w("To scan the level curves, we need to have the four corners visible"),Ve=I(),O=h("div"),Y=h("div"),Ee=w("Drawing should not be too far"),ze=I(),Z=h("div"),Se=w(`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Te=I(),j=h("div"),J=h("div"),Ce=w("Proper lighting"),Be=I(),Q=h("div"),Pe=w(`Level curves are hard to distinguish from the background in a low light setting. Try to use natural
			daylight or a propper ceiling light for the best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),this.h()},l(X){e=p(X,"DIV",{class:!0});var $=_(e);t=p($,"H2",{});var Fe=_(t);s=k(Fe,"Good example of contour map"),Fe.forEach(v),r=D($),o=p($,"DIV",{class:!0}),_(o).forEach(v),n=D($),a=p($,"H2",{});var Oe=_(a);d=k(Oe,"Instructions"),Oe.forEach(v),f=D($),u=p($,"DIV",{class:!0});var je=_(u);l=k(je,"Drawing"),je.forEach(v),g=D($),b=p($,"DIV",{class:!0});var te=_(b);S=p(te,"DIV",{class:!0});var Ue=_(S);H=k(Ue,"Curves should have sufficient margin"),Ue.forEach(v),z=D(te),L=p(te,"DIV",{class:!0});var Ge=_(L);de=k(Ge,`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),Ge.forEach(v),te.forEach(v),fe=D($),M=p($,"DIV",{class:!0});var se=_(M);U=p(se,"DIV",{class:!0});var Re=_(U);ve=k(Re,"Drawing with dark pen"),Re.forEach(v),ge=D(se),G=p(se,"DIV",{class:!0});var qe=_(G);me=k(qe,`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),qe.forEach(v),se.forEach(v),he=D($),N=p($,"DIV",{class:!0});var re=_(N);R=p(re,"DIV",{class:!0});var Ae=_(R);pe=k(Ae,"Close your curves"),Ae.forEach(v),_e=D(re),q=p(re,"DIV",{class:!0});var Ke=_(q);be=k(Ke,"To avoid false readings, close your curves, dont leave any open-ended lines"),Ke.forEach(v),re.forEach(v),$e=D($),A=p($,"DIV",{class:!0});var We=_(A);we=k(We,"Scanning"),We.forEach(v),ke=D($),F=p($,"DIV",{class:!0});var oe=_(F);K=p(oe,"DIV",{class:!0});var Ye=_(K);Ie=k(Ye,"Four corners visible"),Ye.forEach(v),De=D(oe),W=p(oe,"DIV",{class:!0});var Ze=_(W);ye=k(Ze,"To scan the level curves, we need to have the four corners visible"),Ze.forEach(v),oe.forEach(v),Ve=D($),O=p($,"DIV",{class:!0});var ne=_(O);Y=p(ne,"DIV",{class:!0});var Je=_(Y);Ee=k(Je,"Drawing should not be too far"),Je.forEach(v),ze=D(ne),Z=p(ne,"DIV",{class:!0});var Qe=_(Z);Se=k(Qe,`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Qe.forEach(v),ne.forEach(v),Te=D($),j=p($,"DIV",{class:!0});var ie=_(j);J=p(ie,"DIV",{class:!0});var Xe=_(J);Ce=k(Xe,"Proper lighting"),Xe.forEach(v),Be=D(ie),Q=p(ie,"DIV",{class:!0});var xe=_(Q);Pe=k(xe,`Level curves are hard to distinguish from the background in a low light setting. Try to use natural
			daylight or a propper ceiling light for the best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),xe.forEach(v),ie.forEach(v),$.forEach(v),this.h()},h(){m(o,"class","example svelte-1gz6cx3"),m(u,"class","section svelte-1gz6cx3"),m(S,"class","title svelte-1gz6cx3"),m(L,"class","description"),m(b,"class","instruction svelte-1gz6cx3"),m(U,"class","title svelte-1gz6cx3"),m(G,"class","description"),m(M,"class","instruction svelte-1gz6cx3"),m(R,"class","title svelte-1gz6cx3"),m(q,"class","description"),m(N,"class","instruction svelte-1gz6cx3"),m(A,"class","section svelte-1gz6cx3"),m(K,"class","title svelte-1gz6cx3"),m(W,"class","description"),m(F,"class","instruction svelte-1gz6cx3"),m(Y,"class","title svelte-1gz6cx3"),m(Z,"class","description"),m(O,"class","instruction svelte-1gz6cx3"),m(J,"class","title svelte-1gz6cx3"),m(Q,"class","description"),m(j,"class","instruction svelte-1gz6cx3"),m(e,"class","instructions svelte-1gz6cx3")},m(X,$){E(X,e,$),c(e,t),c(t,s),c(e,r),c(e,o),c(e,n),c(e,a),c(a,d),c(e,f),c(e,u),c(u,l),c(e,g),c(e,b),c(b,S),c(S,H),c(b,z),c(b,L),c(L,de),c(e,fe),c(e,M),c(M,U),c(U,ve),c(M,ge),c(M,G),c(G,me),c(e,he),c(e,N),c(N,R),c(R,pe),c(N,_e),c(N,q),c(q,be),c(e,$e),c(e,A),c(A,we),c(e,ke),c(e,F),c(F,K),c(K,Ie),c(F,De),c(F,W),c(W,ye),c(e,Ve),c(e,O),c(O,Y),c(Y,Ee),c(O,ze),c(O,Z),c(Z,Se),c(e,Te),c(e,j),c(j,J),c(J,Ce),c(j,Be),c(j,Q),c(Q,Pe)},p:x,i:x,o:x,d(X){X&&v(e)}}}class It extends le{constructor(e){super(),ce(this,e,null,kt,ue,{})}}const Dt=i=>({loading:i&2,stream:i&1,error:i&4,cameraOptions:i&8}),tt=i=>({loading:i[1],stream:i[0],error:i[2],cameraOptions:i[3]});function yt(i){let e;const t=i[6].default,s=nt(t,i,i[5],tt);return{c(){s&&s.c()},l(r){s&&s.l(r)},m(r,o){s&&s.m(r,o),e=!0},p(r,[o]){s&&s.p&&(!e||o&47)&&it(s,t,r,r[5],e?lt(t,r[5],o,Dt):at(r[5]),tt)},i(r){e||(y(s,r),e=!0)},o(r){V(s,r),e=!1},d(r){s&&s.d(r)}}}function Vt(i,e,t){let{$$slots:s={},$$scope:r}=e,{deviceId:o=""}=e,n,a=!0,d,f=[];const u=async()=>{t(1,a=!0),n&&n.getTracks().forEach(g=>g.stop());const l=o?{deviceId:{exact:o}}:{facingMode:"environment"};try{t(0,n=await navigator.mediaDevices.getUserMedia({video:l})),t(1,a=!1),t(2,d="")}catch(g){t(2,d=""+g)}};return dt(async()=>{await u();const l=await navigator.mediaDevices.enumerateDevices();t(3,f=l.filter(g=>g.kind=="videoinput"))}),ft(()=>{!n||n.getTracks().forEach(l=>l.stop())}),i.$$set=l=>{"deviceId"in l&&t(4,o=l.deviceId),"$$scope"in l&&t(5,r=l.$$scope)},i.$$.update=()=>{i.$$.dirty&16&&o&&u()},[n,a,d,f,o,r,s]}class Et extends le{constructor(e){super(),ce(this,e,Vt,yt,ue,{deviceId:4})}}function zt(i){let e;return{c(){e=h("video"),this.h()},l(t){e=p(t,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),_(e).forEach(v),this.h()},h(){m(e,"style",i[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,m(e,"preload","auto"),m(e,"type","video/mp4"),m(e,"class","svelte-13uo3u7")},m(t,s){E(t,e,s),i[7](e)},p(t,s){s&2&&m(e,"style",t[1])},i:x,o:x,d(t){t&&v(e),i[7](null)}}}function St(i){let e,t,s,r,o,n=i[3]&&i[3].includes("Permission denied"),a,d,f=n&&st();const u=i[6].default,l=nt(u,i,i[5],null);return{c(){e=h("div"),t=h("div"),s=h("h2"),r=w("Loading video..."),o=I(),f&&f.c(),a=I(),l&&l.c(),this.h()},l(g){e=p(g,"DIV",{class:!0});var b=_(e);t=p(b,"DIV",{class:!0});var S=_(t);s=p(S,"H2",{class:!0});var H=_(s);r=k(H,"Loading video..."),H.forEach(v),o=D(S),f&&f.l(S),S.forEach(v),b.forEach(v),a=D(g),l&&l.l(g),this.h()},h(){m(s,"class","svelte-13uo3u7"),m(t,"class","svelte-13uo3u7"),m(e,"class","loadingVideo svelte-13uo3u7")},m(g,b){E(g,e,b),c(e,t),c(t,s),c(s,r),c(t,o),f&&f.m(t,null),E(g,a,b),l&&l.m(g,b),d=!0},p(g,b){b&8&&(n=g[3]&&g[3].includes("Permission denied")),n?f||(f=st(),f.c(),f.m(t,null)):f&&(f.d(1),f=null),l&&l.p&&(!d||b&32)&&it(l,u,g,g[5],d?lt(u,g[5],b,null):at(g[5]),null)},i(g){d||(y(l,g),d=!0)},o(g){V(l,g),d=!1},d(g){g&&v(e),f&&f.d(),g&&v(a),l&&l.d(g)}}}function st(i){let e;return{c(){e=w("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=k(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function Tt(i){let e,t,s,r;const o=[St,zt],n=[];function a(d,f){return d[2]?0:1}return e=a(i),t=n[e]=o[e](i),{c(){t.c(),s=et()},l(d){t.l(d),s=et()},m(d,f){n[e].m(d,f),E(d,s,f),r=!0},p(d,[f]){let u=e;e=a(d),e===u?n[e].p(d,f):(He(),V(n[u],1,1,()=>{n[u]=null}),Le(),t=n[e],t?t.p(d,f):(t=n[e]=o[e](d),t.c()),y(t,1),t.m(s.parentNode,s))},i(d){r||(y(t),r=!0)},o(d){V(t),r=!1},d(d){n[e].d(d),d&&v(s)}}}function Ct(i,e,t){let{$$slots:s={},$$scope:r}=e,{stream:o}=e,{style:n=""}=e,{loading:a=!0}=e,{error:d=""}=e,{videoSource:f=void 0}=e;function u(l){ee[l?"unshift":"push"](()=>{f=l,t(0,f),t(4,o),t(2,a)})}return i.$$set=l=>{"stream"in l&&t(4,o=l.stream),"style"in l&&t(1,n=l.style),"loading"in l&&t(2,a=l.loading),"error"in l&&t(3,d=l.error),"videoSource"in l&&t(0,f=l.videoSource),"$$scope"in l&&t(5,r=l.$$scope)},i.$$.update=()=>{i.$$.dirty&21&&o&&!a&&f&&f.paused&&(t(0,f.srcObject=o,f),f.play())},[f,n,a,d,o,r,s,u]}class ut extends le{constructor(e){super(),ce(this,e,Ct,Tt,ue,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function Bt(i){let e,t;return e=new It({}),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,r){B(e,s,r),t=!0},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Pt(i){let e,t,s,r;function o(a){i[11](a)}let n={error:i[15],loading:i[13],stream:i[14]};return i[1]!==void 0&&(n.videoSource=i[1]),e=new ut({props:n}),ee.push(()=>Me(e,"videoSource",o)),{c(){t=h("div"),T(e.$$.fragment),this.h()},l(a){t=p(a,"DIV",{style:!0});var d=_(t);C(e.$$.fragment,d),this.h()},h(){ae(t,"display","contents"),ae(t,"--corner-radius","1rem")},m(a,d){E(a,t,d),B(e,t,null),r=!0},p(a,d){const f={};d&32768&&(f.error=a[15]),d&8192&&(f.loading=a[13]),d&16384&&(f.stream=a[14]),!s&&d&2&&(s=!0,f.videoSource=a[1],Ne(()=>s=!1)),e.$set(f)},i(a){r||(y(e.$$.fragment,a),r=!0)},o(a){V(e.$$.fragment,a),r=!1},d(a){a&&v(t),P(e,a)}}}function Ht(i){let e;return{c(){e=w("Back home")},l(t){e=k(t,"Back home")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function Lt(i){let e,t;return e=new gt({props:{slot:"headerButton",back:!0,to:"/",$$slots:{default:[Ht]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,r){B(e,s,r),t=!0},p(s,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Mt(i){let e,t,s;return t=new ut({props:{loading:i[13],stream:i[14]}}),{c(){e=h("div"),T(t.$$.fragment),this.h()},l(r){e=p(r,"DIV",{slot:!0});var o=_(e);C(t.$$.fragment,o),o.forEach(v),this.h()},h(){m(e,"slot","background")},m(r,o){E(r,e,o),B(t,e,null),s=!0},p(r,o){const n={};o&8192&&(n.loading=r[13]),o&16384&&(n.stream=r[14]),t.$set(n)},i(r){s||(y(t.$$.fragment,r),s=!0)},o(r){V(t.$$.fragment,r),s=!1},d(r){r&&v(e),P(t)}}}function rt(i){let e,t,s;function r(n){i[10](n)}let o={options:i[16],$$slots:{default:[Nt,({option:n,index:a})=>({17:n,18:a}),({option:n,index:a})=>(n?131072:0)|(a?262144:0)]},$$scope:{ctx:i}};return i[2]!==void 0&&(o.value=i[2]),e=new pt({props:o}),ee.push(()=>Me(e,"value",r)),e.$on("change",i[8]),{c(){T(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,a){B(e,n,a),s=!0},p(n,a){const d={};a&65536&&(d.options=n[16]),a&917504&&(d.$$scope={dirty:a,ctx:n}),!t&&a&4&&(t=!0,d.value=n[2],Ne(()=>t=!1)),e.$set(d)},i(n){s||(y(e.$$.fragment,n),s=!0)},o(n){V(e.$$.fragment,n),s=!1},d(n){P(e,n)}}}function Nt(i){let e=(i[17].label||"Camera "+(i[18]+1))+"",t;return{c(){t=w(e)},l(s){t=k(s,e)},m(s,r){E(s,t,r)},p(s,r){r&393216&&e!==(e=(s[17].label||"Camera "+(s[18]+1))+"")&&vt(t,e)},d(s){s&&v(t)}}}function Ft(i){var r;let e,t,s=!i[0]&&((r=i[16])==null?void 0:r.length)>1&&rt(i);return{c(){e=h("div"),s&&s.c(),this.h()},l(o){e=p(o,"DIV",{slot:!0});var n=_(e);s&&s.l(n),n.forEach(v),this.h()},h(){m(e,"slot","options")},m(o,n){E(o,e,n),s&&s.m(e,null),t=!0},p(o,n){var a;!o[0]&&((a=o[16])==null?void 0:a.length)>1?s?(s.p(o,n),n&65537&&y(s,1)):(s=rt(o),s.c(),y(s,1),s.m(e,null)):s&&(He(),V(s,1,1,()=>{s=null}),Le())},i(o){t||(y(s),t=!0)},o(o){V(s),t=!1},d(o){o&&v(e),s&&s.d()}}}function ot(i){let e,t;return e=new ct({props:{secondary:!0,icon:ht,$$slots:{default:[Ot]},$$scope:{ctx:i}}}),e.$on("click",i[6]),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,r){B(e,s,r),t=!0},p(s,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ot(i){let e;return{c(){e=w("Image capture | Instructions")},l(t){e=k(t,"Image capture | Instructions")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function jt(i){let e;return{c(){e=w("Capture photo of map")},l(t){e=k(t,"Capture photo of map")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function Ut(i){let e,t,s,r=!i[0]&&ot(i);return t=new ct({props:{loading:i[4],icon:mt,$$slots:{default:[jt]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){r&&r.c(),e=I(),T(t.$$.fragment)},l(o){r&&r.l(o),e=D(o),C(t.$$.fragment,o)},m(o,n){r&&r.m(o,n),E(o,e,n),B(t,o,n),s=!0},p(o,n){o[0]?r&&(He(),V(r,1,1,()=>{r=null}),Le()):r?(r.p(o,n),n&1&&y(r,1)):(r=ot(o),r.c(),y(r,1),r.m(e.parentNode,e));const a={};n&16&&(a.loading=o[4]),n&524288&&(a.$$scope={dirty:n,ctx:o}),t.$set(a)},i(o){s||(y(r),y(t.$$.fragment,o),s=!0)},o(o){V(r),V(t.$$.fragment,o),s=!1},d(o){r&&r.d(o),o&&v(e),P(t,o)}}}function Gt(i){let e,t;return e=new _t({props:{fullscreen:!i[13],$$slots:{footer:[Ut],options:[Ft],background:[Mt],headerButton:[Lt],default:[Pt]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,r){B(e,s,r),t=!0},p(s,r){const o={};r&8192&&(o.fullscreen=!s[13]),r&647191&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){t||(y(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Rt(i){let e,t,s,r,o,n,a;function d(u){i[9](u)}let f={title:"scan instructions",$$slots:{default:[Bt]},$$scope:{ctx:i}};return i[0]!==void 0&&(f.visible=i[0]),e=new bt({props:f}),ee.push(()=>Me(e,"visible",d)),r=new Et({props:{deviceId:i[5],$$slots:{default:[Gt,({loading:u,stream:l,error:g,cameraOptions:b})=>({13:u,14:l,15:g,16:b}),({loading:u,stream:l,error:g,cameraOptions:b})=>(u?8192:0)|(l?16384:0)|(g?32768:0)|(b?65536:0)]},$$scope:{ctx:i}}}),{c(){T(e.$$.fragment),s=I(),T(r.$$.fragment),o=I(),n=h("canvas"),this.h()},l(u){C(e.$$.fragment,u),s=D(u),C(r.$$.fragment,u),o=D(u),n=p(u,"CANVAS",{id:!0,style:!0}),_(n).forEach(v),this.h()},h(){m(n,"id","captureCanvas"),ae(n,"display","none"),ae(n,"position","absolute")},m(u,l){B(e,u,l),E(u,s,l),B(r,u,l),E(u,o,l),E(u,n,l),i[12](n),a=!0},p(u,[l]){const g={};l&524288&&(g.$$scope={dirty:l,ctx:u}),!t&&l&1&&(t=!0,g.visible=u[0],Ne(()=>t=!1)),e.$set(g);const b={};l&32&&(b.deviceId=u[5]),l&647191&&(b.$$scope={dirty:l,ctx:u}),r.$set(b)},i(u){a||(y(e.$$.fragment,u),y(r.$$.fragment,u),a=!0)},o(u){V(e.$$.fragment,u),V(r.$$.fragment,u),a=!1},d(u){P(e,u),u&&v(s),P(r,u),u&&v(o),u&&v(n),i[12](null)}}}const es=!0;function qt(i,e,t){let s,r,o,n,a=!1,d;const f=()=>t(0,s=!s);async function u(){t(4,a=!0);const z=n.getContext("2d");t(3,n.height=r.videoHeight,n),t(3,n.width=r.videoWidth,n),z&&z.drawImage(r,0,0,n.width,n.height);const L=n.toDataURL("image/png");wt.set(L),$t("/scan/maptransform")}function l(){t(5,d=o.deviceId)}function g(z){s=z,t(0,s)}function b(z){o=z,t(2,o)}function S(z){r=z,t(1,r)}function H(z){ee[z?"unshift":"push"](()=>{n=z,t(3,n)})}return[s,r,o,n,a,d,f,u,l,g,b,S,H]}class ts extends le{constructor(e){super(),ce(this,e,qt,Rt,ue,{})}}export{ts as default,es as prerender};
