import{S as le,i as ce,s as ue,e as g,t as $,k,c as p,a as _,h as I,d as v,m as D,b as m,g as E,K as c,E as x,F as it,G as ot,H as at,I as lt,q as V,o as y,v as dt,M as ft,l as et,n as Be,p as Oe,X as ee,Y as Fe,w as T,x as C,f as ae,y as M,W as He,B as P,j as vt}from"../../chunks/index-12998d59.js";import{B as ct,b as ht,c as mt}from"../../chunks/Button-1b490879.js";import{D as gt}from"../../chunks/Dropdown-ea44566a.js";import{P as pt}from"../../chunks/Page-503a883b.js";import{M as _t}from"../../chunks/Modal-ac7c73c5.js";import{g as bt}from"../../chunks/navigation-0e6511d1.js";import{r as wt}from"../../chunks/imageStore-f0761c82.js";import"../../chunks/singletons-d1fb5791.js";import"../../chunks/index-d282005e.js";function $t(o){let e,t,s,n,i,r,a,u,f,d,l,h,b,S,B,z,O,de,fe,F,G,ve,he,N,me,ge,H,R,pe,_e,q,be,we,A,$e,ke,L,W,Ie,De,K,Ve,ye,j,X,Ee,ze,Y,Se,Te,U,J,Ce,Me,Q,Pe;return{c(){e=g("div"),t=g("h2"),s=$("Good example of contour map"),n=k(),i=g("div"),r=k(),a=g("h2"),u=$("Instructions"),f=k(),d=g("div"),l=$("Drawing"),h=k(),b=g("div"),S=g("div"),B=$("Curves should have sufficient margin"),z=k(),O=g("div"),de=$(`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),fe=k(),F=g("div"),G=g("div"),ve=$("Drawing with dark pen"),he=k(),N=g("div"),me=$(`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),ge=k(),H=g("div"),R=g("div"),pe=$("Close your curves"),_e=k(),q=g("div"),be=$("To avoid false readings, close your curves, dont leave any open-ended lines"),we=k(),A=g("div"),$e=$("Scanning"),ke=k(),L=g("div"),W=g("div"),Ie=$("Four corners visible"),De=k(),K=g("div"),Ve=$("To scan the level curves, we need to have the four corners visible"),ye=k(),j=g("div"),X=g("div"),Ee=$("Drawing should not be too far"),ze=k(),Y=g("div"),Se=$(`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Te=k(),U=g("div"),J=g("div"),Ce=$("Proper lighting"),Me=k(),Q=g("div"),Pe=$(`Level curves are hard to distinguish from background in a low light setting. Try to use natual
			daylight or a propper ceiling light for best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),this.h()},l(Z){e=p(Z,"DIV",{class:!0});var w=_(e);t=p(w,"H2",{});var Le=_(t);s=I(Le,"Good example of contour map"),Le.forEach(v),n=D(w),i=p(w,"DIV",{class:!0}),_(i).forEach(v),r=D(w),a=p(w,"H2",{});var je=_(a);u=I(je,"Instructions"),je.forEach(v),f=D(w),d=p(w,"DIV",{class:!0});var Ue=_(d);l=I(Ue,"Drawing"),Ue.forEach(v),h=D(w),b=p(w,"DIV",{class:!0});var te=_(b);S=p(te,"DIV",{class:!0});var Ge=_(S);B=I(Ge,"Curves should have sufficient margin"),Ge.forEach(v),z=D(te),O=p(te,"DIV",{class:!0});var Ne=_(O);de=I(Ne,`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),Ne.forEach(v),te.forEach(v),fe=D(w),F=p(w,"DIV",{class:!0});var se=_(F);G=p(se,"DIV",{class:!0});var Re=_(G);ve=I(Re,"Drawing with dark pen"),Re.forEach(v),he=D(se),N=p(se,"DIV",{class:!0});var qe=_(N);me=I(qe,`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),qe.forEach(v),se.forEach(v),ge=D(w),H=p(w,"DIV",{class:!0});var re=_(H);R=p(re,"DIV",{class:!0});var Ae=_(R);pe=I(Ae,"Close your curves"),Ae.forEach(v),_e=D(re),q=p(re,"DIV",{class:!0});var We=_(q);be=I(We,"To avoid false readings, close your curves, dont leave any open-ended lines"),We.forEach(v),re.forEach(v),we=D(w),A=p(w,"DIV",{class:!0});var Ke=_(A);$e=I(Ke,"Scanning"),Ke.forEach(v),ke=D(w),L=p(w,"DIV",{class:!0});var ne=_(L);W=p(ne,"DIV",{class:!0});var Xe=_(W);Ie=I(Xe,"Four corners visible"),Xe.forEach(v),De=D(ne),K=p(ne,"DIV",{class:!0});var Ye=_(K);Ve=I(Ye,"To scan the level curves, we need to have the four corners visible"),Ye.forEach(v),ne.forEach(v),ye=D(w),j=p(w,"DIV",{class:!0});var ie=_(j);X=p(ie,"DIV",{class:!0});var Je=_(X);Ee=I(Je,"Drawing should not be too far"),Je.forEach(v),ze=D(ie),Y=p(ie,"DIV",{class:!0});var Qe=_(Y);Se=I(Qe,`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Qe.forEach(v),ie.forEach(v),Te=D(w),U=p(w,"DIV",{class:!0});var oe=_(U);J=p(oe,"DIV",{class:!0});var Ze=_(J);Ce=I(Ze,"Proper lighting"),Ze.forEach(v),Me=D(oe),Q=p(oe,"DIV",{class:!0});var xe=_(Q);Pe=I(xe,`Level curves are hard to distinguish from background in a low light setting. Try to use natual
			daylight or a propper ceiling light for best results. Be careful of sharp or dark shadows on
			the drawing, as they might get interpreted as part of your drawing.`),xe.forEach(v),oe.forEach(v),w.forEach(v),this.h()},h(){m(i,"class","example svelte-nxz67r"),m(d,"class","section svelte-nxz67r"),m(S,"class","title svelte-nxz67r"),m(O,"class","description"),m(b,"class","instruction svelte-nxz67r"),m(G,"class","title svelte-nxz67r"),m(N,"class","description"),m(F,"class","instruction svelte-nxz67r"),m(R,"class","title svelte-nxz67r"),m(q,"class","description"),m(H,"class","instruction svelte-nxz67r"),m(A,"class","section svelte-nxz67r"),m(W,"class","title svelte-nxz67r"),m(K,"class","description"),m(L,"class","instruction svelte-nxz67r"),m(X,"class","title svelte-nxz67r"),m(Y,"class","description"),m(j,"class","instruction svelte-nxz67r"),m(J,"class","title svelte-nxz67r"),m(Q,"class","description"),m(U,"class","instruction svelte-nxz67r"),m(e,"class","instructions svelte-nxz67r")},m(Z,w){E(Z,e,w),c(e,t),c(t,s),c(e,n),c(e,i),c(e,r),c(e,a),c(a,u),c(e,f),c(e,d),c(d,l),c(e,h),c(e,b),c(b,S),c(S,B),c(b,z),c(b,O),c(O,de),c(e,fe),c(e,F),c(F,G),c(G,ve),c(F,he),c(F,N),c(N,me),c(e,ge),c(e,H),c(H,R),c(R,pe),c(H,_e),c(H,q),c(q,be),c(e,we),c(e,A),c(A,$e),c(e,ke),c(e,L),c(L,W),c(W,Ie),c(L,De),c(L,K),c(K,Ve),c(e,ye),c(e,j),c(j,X),c(X,Ee),c(j,ze),c(j,Y),c(Y,Se),c(e,Te),c(e,U),c(U,J),c(J,Ce),c(U,Me),c(U,Q),c(Q,Pe)},p:x,i:x,o:x,d(Z){Z&&v(e)}}}class kt extends le{constructor(e){super(),ce(this,e,null,$t,ue,{})}}const It=o=>({loading:o&2,stream:o&1,error:o&4,cameraOptions:o&8}),tt=o=>({loading:o[1],stream:o[0],error:o[2],cameraOptions:o[3]});function Dt(o){let e;const t=o[6].default,s=it(t,o,o[5],tt);return{c(){s&&s.c()},l(n){s&&s.l(n)},m(n,i){s&&s.m(n,i),e=!0},p(n,[i]){s&&s.p&&(!e||i&47)&&ot(s,t,n,n[5],e?lt(t,n[5],i,It):at(n[5]),tt)},i(n){e||(V(s,n),e=!0)},o(n){y(s,n),e=!1},d(n){s&&s.d(n)}}}function Vt(o,e,t){let{$$slots:s={},$$scope:n}=e,{deviceId:i=""}=e,r,a=!0,u,f=[];const d=async()=>{t(1,a=!0),r&&r.getTracks().forEach(h=>h.stop());const l=i?{deviceId:{exact:i}}:{facingMode:"environment"};try{t(0,r=await navigator.mediaDevices.getUserMedia({video:l})),t(1,a=!1),t(2,u="")}catch(h){t(2,u=""+h)}};return dt(async()=>{await d();const l=await navigator.mediaDevices.enumerateDevices();t(3,f=l.filter(h=>h.kind=="videoinput"))}),ft(()=>{!r||r.getTracks().forEach(l=>l.stop())}),o.$$set=l=>{"deviceId"in l&&t(4,i=l.deviceId),"$$scope"in l&&t(5,n=l.$$scope)},o.$$.update=()=>{o.$$.dirty&16&&i&&d()},[r,a,u,f,i,n,s]}class yt extends le{constructor(e){super(),ce(this,e,Vt,Dt,ue,{deviceId:4})}}function Et(o){let e;return{c(){e=g("video"),this.h()},l(t){e=p(t,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),_(e).forEach(v),this.h()},h(){m(e,"style",o[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,m(e,"preload","auto"),m(e,"type","video/mp4"),m(e,"class","svelte-wvnab8")},m(t,s){E(t,e,s),o[7](e)},p(t,s){s&2&&m(e,"style",t[1])},i:x,o:x,d(t){t&&v(e),o[7](null)}}}function zt(o){let e,t,s,n,i,r=o[3]&&o[3].includes("Permission denied"),a,u,f=r&&st();const d=o[6].default,l=it(d,o,o[5],null);return{c(){e=g("div"),t=g("div"),s=g("h1"),n=$("Loading video..."),i=k(),f&&f.c(),a=k(),l&&l.c(),this.h()},l(h){e=p(h,"DIV",{class:!0});var b=_(e);t=p(b,"DIV",{class:!0});var S=_(t);s=p(S,"H1",{class:!0});var B=_(s);n=I(B,"Loading video..."),B.forEach(v),i=D(S),f&&f.l(S),S.forEach(v),b.forEach(v),a=D(h),l&&l.l(h),this.h()},h(){m(s,"class","svelte-wvnab8"),m(t,"class","svelte-wvnab8"),m(e,"class","loadingVideo svelte-wvnab8")},m(h,b){E(h,e,b),c(e,t),c(t,s),c(s,n),c(t,i),f&&f.m(t,null),E(h,a,b),l&&l.m(h,b),u=!0},p(h,b){b&8&&(r=h[3]&&h[3].includes("Permission denied")),r?f||(f=st(),f.c(),f.m(t,null)):f&&(f.d(1),f=null),l&&l.p&&(!u||b&32)&&ot(l,d,h,h[5],u?lt(d,h[5],b,null):at(h[5]),null)},i(h){u||(V(l,h),u=!0)},o(h){y(l,h),u=!1},d(h){h&&v(e),f&&f.d(),h&&v(a),l&&l.d(h)}}}function st(o){let e;return{c(){e=$("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=I(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function St(o){let e,t,s,n;const i=[zt,Et],r=[];function a(u,f){return u[2]?0:1}return e=a(o),t=r[e]=i[e](o),{c(){t.c(),s=et()},l(u){t.l(u),s=et()},m(u,f){r[e].m(u,f),E(u,s,f),n=!0},p(u,[f]){let d=e;e=a(u),e===d?r[e].p(u,f):(Be(),y(r[d],1,1,()=>{r[d]=null}),Oe(),t=r[e],t?t.p(u,f):(t=r[e]=i[e](u),t.c()),V(t,1),t.m(s.parentNode,s))},i(u){n||(V(t),n=!0)},o(u){y(t),n=!1},d(u){r[e].d(u),u&&v(s)}}}function Tt(o,e,t){let{$$slots:s={},$$scope:n}=e,{stream:i}=e,{style:r=""}=e,{loading:a=!0}=e,{error:u=""}=e,{videoSource:f=void 0}=e;function d(l){ee[l?"unshift":"push"](()=>{f=l,t(0,f),t(4,i),t(2,a)})}return o.$$set=l=>{"stream"in l&&t(4,i=l.stream),"style"in l&&t(1,r=l.style),"loading"in l&&t(2,a=l.loading),"error"in l&&t(3,u=l.error),"videoSource"in l&&t(0,f=l.videoSource),"$$scope"in l&&t(5,n=l.$$scope)},o.$$.update=()=>{o.$$.dirty&21&&i&&!a&&f&&f.paused&&(t(0,f.srcObject=i,f),f.play())},[f,r,a,u,i,n,s,d]}class ut extends le{constructor(e){super(),ce(this,e,Tt,St,ue,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function Ct(o){let e,t;return e=new kt({}),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,n){M(e,s,n),t=!0},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Mt(o){let e,t,s,n;function i(a){o[11](a)}let r={error:o[15],loading:o[13],stream:o[14]};return o[1]!==void 0&&(r.videoSource=o[1]),e=new ut({props:r}),ee.push(()=>Fe(e,"videoSource",i)),{c(){t=g("div"),T(e.$$.fragment),this.h()},l(a){t=p(a,"DIV",{style:!0});var u=_(t);C(e.$$.fragment,u),this.h()},h(){ae(t,"display","contents"),ae(t,"--corner-radius","1rem")},m(a,u){E(a,t,u),M(e,t,null),n=!0},p(a,u){const f={};u&32768&&(f.error=a[15]),u&8192&&(f.loading=a[13]),u&16384&&(f.stream=a[14]),!s&&u&2&&(s=!0,f.videoSource=a[1],He(()=>s=!1)),e.$set(f)},i(a){n||(V(e.$$.fragment,a),n=!0)},o(a){y(e.$$.fragment,a),n=!1},d(a){a&&v(t),P(e,a)}}}function Pt(o){let e,t,s;return t=new ut({props:{loading:o[13],stream:o[14]}}),{c(){e=g("div"),T(t.$$.fragment),this.h()},l(n){e=p(n,"DIV",{slot:!0});var i=_(e);C(t.$$.fragment,i),i.forEach(v),this.h()},h(){m(e,"slot","background")},m(n,i){E(n,e,i),M(t,e,null),s=!0},p(n,i){const r={};i&8192&&(r.loading=n[13]),i&16384&&(r.stream=n[14]),t.$set(r)},i(n){s||(V(t.$$.fragment,n),s=!0)},o(n){y(t.$$.fragment,n),s=!1},d(n){n&&v(e),P(t)}}}function rt(o){let e,t,s;function n(r){o[10](r)}let i={options:o[16],$$slots:{default:[Bt,({option:r,index:a})=>({17:r,18:a}),({option:r,index:a})=>(r?131072:0)|(a?262144:0)]},$$scope:{ctx:o}};return o[2]!==void 0&&(i.value=o[2]),e=new gt({props:i}),ee.push(()=>Fe(e,"value",n)),e.$on("change",o[8]),{c(){T(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,a){M(e,r,a),s=!0},p(r,a){const u={};a&65536&&(u.options=r[16]),a&917504&&(u.$$scope={dirty:a,ctx:r}),!t&&a&4&&(t=!0,u.value=r[2],He(()=>t=!1)),e.$set(u)},i(r){s||(V(e.$$.fragment,r),s=!0)},o(r){y(e.$$.fragment,r),s=!1},d(r){P(e,r)}}}function Bt(o){let e=(o[17].label||"Camera "+(o[18]+1))+"",t;return{c(){t=$(e)},l(s){t=I(s,e)},m(s,n){E(s,t,n)},p(s,n){n&393216&&e!==(e=(s[17].label||"Camera "+(s[18]+1))+"")&&vt(t,e)},d(s){s&&v(t)}}}function Ot(o){var n;let e,t,s=!o[0]&&((n=o[16])==null?void 0:n.length)>1&&rt(o);return{c(){e=g("div"),s&&s.c(),this.h()},l(i){e=p(i,"DIV",{slot:!0});var r=_(e);s&&s.l(r),r.forEach(v),this.h()},h(){m(e,"slot","options")},m(i,r){E(i,e,r),s&&s.m(e,null),t=!0},p(i,r){var a;!i[0]&&((a=i[16])==null?void 0:a.length)>1?s?(s.p(i,r),r&65537&&V(s,1)):(s=rt(i),s.c(),V(s,1),s.m(e,null)):s&&(Be(),y(s,1,1,()=>{s=null}),Oe())},i(i){t||(V(s),t=!0)},o(i){y(s),t=!1},d(i){i&&v(e),s&&s.d()}}}function nt(o){let e,t;return e=new ct({props:{secondary:!0,icon:mt,$$slots:{default:[Ft]},$$scope:{ctx:o}}}),e.$on("click",o[6]),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,n){M(e,s,n),t=!0},p(s,n){const i={};n&524288&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ft(o){let e;return{c(){e=$("Read scan instructions")},l(t){e=I(t,"Read scan instructions")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function Ht(o){let e;return{c(){e=$("Capture photo of map")},l(t){e=I(t,"Capture photo of map")},m(t,s){E(t,e,s)},d(t){t&&v(e)}}}function Lt(o){let e,t,s,n,i=!o[0]&&nt(o);return s=new ct({props:{loading:o[4],icon:ht,$$slots:{default:[Ht]},$$scope:{ctx:o}}}),s.$on("click",o[7]),{c(){e=g("div"),i&&i.c(),t=k(),T(s.$$.fragment),this.h()},l(r){e=p(r,"DIV",{slot:!0});var a=_(e);i&&i.l(a),t=D(a),C(s.$$.fragment,a),a.forEach(v),this.h()},h(){m(e,"slot","footer")},m(r,a){E(r,e,a),i&&i.m(e,null),c(e,t),M(s,e,null),n=!0},p(r,a){r[0]?i&&(Be(),y(i,1,1,()=>{i=null}),Oe()):i?(i.p(r,a),a&1&&V(i,1)):(i=nt(r),i.c(),V(i,1),i.m(e,t));const u={};a&16&&(u.loading=r[4]),a&524288&&(u.$$scope={dirty:a,ctx:r}),s.$set(u)},i(r){n||(V(i),V(s.$$.fragment,r),n=!0)},o(r){y(i),y(s.$$.fragment,r),n=!1},d(r){r&&v(e),i&&i.d(),P(s)}}}function jt(o){let e,t;return e=new pt({props:{fullscreen:!o[13],title:"Capture the image",$$slots:{footer:[Lt],options:[Ot],background:[Pt],default:[Mt]},$$scope:{ctx:o}}}),{c(){T(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,n){M(e,s,n),t=!0},p(s,n){const i={};n&8192&&(i.fullscreen=!s[13]),n&647191&&(i.$$scope={dirty:n,ctx:s}),e.$set(i)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ut(o){let e,t,s,n,i,r,a;function u(d){o[9](d)}let f={title:"scan instructions",$$slots:{default:[Ct]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.visible=o[0]),e=new _t({props:f}),ee.push(()=>Fe(e,"visible",u)),n=new yt({props:{deviceId:o[5],$$slots:{default:[jt,({loading:d,stream:l,error:h,cameraOptions:b})=>({13:d,14:l,15:h,16:b}),({loading:d,stream:l,error:h,cameraOptions:b})=>(d?8192:0)|(l?16384:0)|(h?32768:0)|(b?65536:0)]},$$scope:{ctx:o}}}),{c(){T(e.$$.fragment),s=k(),T(n.$$.fragment),i=k(),r=g("canvas"),this.h()},l(d){C(e.$$.fragment,d),s=D(d),C(n.$$.fragment,d),i=D(d),r=p(d,"CANVAS",{id:!0,style:!0}),_(r).forEach(v),this.h()},h(){m(r,"id","captureCanvas"),ae(r,"display","none"),ae(r,"position","absolute")},m(d,l){M(e,d,l),E(d,s,l),M(n,d,l),E(d,i,l),E(d,r,l),o[12](r),a=!0},p(d,[l]){const h={};l&524288&&(h.$$scope={dirty:l,ctx:d}),!t&&l&1&&(t=!0,h.visible=d[0],He(()=>t=!1)),e.$set(h);const b={};l&32&&(b.deviceId=d[5]),l&647191&&(b.$$scope={dirty:l,ctx:d}),n.$set(b)},i(d){a||(V(e.$$.fragment,d),V(n.$$.fragment,d),a=!0)},o(d){y(e.$$.fragment,d),y(n.$$.fragment,d),a=!1},d(d){P(e,d),d&&v(s),P(n,d),d&&v(i),d&&v(r),o[12](null)}}}const Qt=!0;function Gt(o,e,t){let s,n,i,r,a=!1,u;const f=()=>t(0,s=!s);async function d(){t(4,a=!0);const z=r.getContext("2d");t(3,r.height=n.videoHeight,r),t(3,r.width=n.videoWidth,r),z&&z.drawImage(n,0,0,r.width,r.height);const O=r.toDataURL("image/png");wt.set(O),bt("/scan/maptransform")}function l(){t(5,u=i.deviceId)}function h(z){s=z,t(0,s)}function b(z){i=z,t(2,i)}function S(z){n=z,t(1,n)}function B(z){ee[z?"unshift":"push"](()=>{r=z,t(3,r)})}return[s,n,i,r,a,u,f,d,l,h,b,S,B]}class Zt extends le{constructor(e){super(),ce(this,e,Gt,Ut,ue,{})}}export{Zt as default,Qt as prerender};
