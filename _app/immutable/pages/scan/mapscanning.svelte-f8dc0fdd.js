import{S as N,i as O,s as G,e as k,t as S,k as I,c as $,a as y,h as D,d,m as V,b as g,g as b,J as p,E as P,V as te,F as Z,G as K,H as Q,I as x,q as v,o as w,v as se,W as re,l as H,n as U,p as q,X as A,w as C,x as T,f as L,y as B,B as M,Y as oe,Z as ne}from"../../chunks/index-6ef4ca18.js";import{B as F,b as le,c as ie}from"../../chunks/Button-4b8f6361.js";import{P as ae,r as ce}from"../../chunks/imageStore-794ecfdf.js";import{g as ue}from"../../chunks/navigation-0e6511d1.js";import"../../chunks/index-381b1206.js";import"../../chunks/singletons-d1fb5791.js";const W=[{title:"3 marker visible",description:"To recognize the level curves, we need to have the 3 markers fully visible"},{title:"Curves should have sufficient margin",description:"The curves should have sufficient margin between them, overlapping or close lines are hard to interpret"},{title:"Markers shoud not be too far or close",description:"Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best result try to scan the paper as close to parallel as possible"},{title:"Drawing with dark pen",description:"To recognise your level curves, we prefer a dark and thic pen. Using a lighter pen will result in inaccurate results"},{title:"Propper lighting",description:"Level curves are hard to distinguish from background in a low light setting. Try to use natual daylight or a propper ceiling light for best results."},{title:"Close your curves",description:"To avoid false readings, close your curves as much as possible"},{title:"Only one paper should be visible",description:"To avoid false readings, only one paper should be visible at a time"}];function j(n,e,t){const s=n.slice();return s[0]=e[t],s}function z(n){let e,t,s=n[0].title+"",o,r,l,c=n[0].description+"",i,a;return{c(){e=k("div"),t=k("div"),o=S(s),r=I(),l=k("div"),i=S(c),a=I(),this.h()},l(m){e=$(m,"DIV",{class:!0});var u=y(e);t=$(u,"DIV",{class:!0});var f=y(t);o=D(f,s),f.forEach(d),r=V(u),l=$(u,"DIV",{class:!0});var _=y(l);i=D(_,c),_.forEach(d),a=V(u),u.forEach(d),this.h()},h(){g(t,"class","title svelte-1fkle3y"),g(l,"class","description"),g(e,"class","instruction svelte-1fkle3y")},m(m,u){b(m,e,u),p(e,t),p(t,o),p(e,r),p(e,l),p(l,i),p(e,a)},p:P,d(m){m&&d(e)}}}function fe(n){let e,t,s,o,r,l,c,i,a,m=W,u=[];for(let f=0;f<m.length;f+=1)u[f]=z(j(n,m,f));return{c(){e=k("div"),t=k("h2"),s=S("Good example of contour map"),o=I(),r=k("div"),l=I(),c=k("h2"),i=S("Instructions"),a=I();for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=$(f,"DIV",{class:!0});var _=y(e);t=$(_,"H2",{});var h=y(t);s=D(h,"Good example of contour map"),h.forEach(d),o=V(_),r=$(_,"DIV",{class:!0}),y(r).forEach(d),l=V(_),c=$(_,"H2",{});var E=y(c);i=D(E,"Instructions"),E.forEach(d),a=V(_);for(let R=0;R<u.length;R+=1)u[R].l(_);_.forEach(d),this.h()},h(){g(r,"class","example svelte-1fkle3y"),g(e,"class","instructions svelte-1fkle3y")},m(f,_){b(f,e,_),p(e,t),p(t,s),p(e,o),p(e,r),p(e,l),p(e,c),p(c,i),p(e,a);for(let h=0;h<u.length;h+=1)u[h].m(e,null)},p(f,[_]){if(_&0){m=W;let h;for(h=0;h<m.length;h+=1){const E=j(f,m,h);u[h]?u[h].p(E,_):(u[h]=z(E),u[h].c(),u[h].m(e,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=m.length}},i:P,o:P,d(f){f&&d(e),te(u,f)}}}class de extends N{constructor(e){super(),O(this,e,null,fe,G,{})}}const _e=n=>({loading:n&2,stream:n&1,error:n&4}),J=n=>({loading:n[1],stream:n[0],error:n[2]});function me(n){let e;const t=n[4].default,s=Z(t,n,n[3],J);return{c(){s&&s.c()},l(o){s&&s.l(o)},m(o,r){s&&s.m(o,r),e=!0},p(o,[r]){s&&s.p&&(!e||r&15)&&K(s,t,o,o[3],e?x(t,o[3],r,_e):Q(o[3]),J)},i(o){e||(v(s,o),e=!0)},o(o){w(s,o),e=!1},d(o){s&&s.d(o)}}}function he(n,e,t){let{$$slots:s={},$$scope:o}=e,r,l=!0,c;const i=async()=>{try{t(1,l=!0),t(0,r=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})),t(1,l=!1),t(2,c="")}catch(a){t(2,c=""+a)}};return se(async()=>{await i()}),re(()=>{!r||r.getTracks().forEach(a=>a.stop())}),n.$$set=a=>{"$$scope"in a&&t(3,o=a.$$scope)},[r,l,c,o,s]}class pe extends N{constructor(e){super(),O(this,e,he,me,G,{})}}function ge(n){let e;return{c(){e=k("video"),this.h()},l(t){e=$(t,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),y(e).forEach(d),this.h()},h(){g(e,"style",n[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,g(e,"preload","auto"),g(e,"type","video/mp4"),g(e,"class","svelte-wvnab8")},m(t,s){b(t,e,s),n[7](e)},p(t,s){s&2&&g(e,"style",t[1])},i:P,o:P,d(t){t&&d(e),n[7](null)}}}function ve(n){let e,t,s,o,r,l=n[3]&&n[3].includes("Permission denied"),c,i,a=l&&X();const m=n[6].default,u=Z(m,n,n[5],null);return{c(){e=k("div"),t=k("div"),s=k("h1"),o=S("Loading video..."),r=I(),a&&a.c(),c=I(),u&&u.c(),this.h()},l(f){e=$(f,"DIV",{class:!0});var _=y(e);t=$(_,"DIV",{class:!0});var h=y(t);s=$(h,"H1",{class:!0});var E=y(s);o=D(E,"Loading video..."),E.forEach(d),r=V(h),a&&a.l(h),h.forEach(d),_.forEach(d),c=V(f),u&&u.l(f),this.h()},h(){g(s,"class","svelte-wvnab8"),g(t,"class","svelte-wvnab8"),g(e,"class","loadingVideo svelte-wvnab8")},m(f,_){b(f,e,_),p(e,t),p(t,s),p(s,o),p(t,r),a&&a.m(t,null),b(f,c,_),u&&u.m(f,_),i=!0},p(f,_){_&8&&(l=f[3]&&f[3].includes("Permission denied")),l?a||(a=X(),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&&u.p&&(!i||_&32)&&K(u,m,f,f[5],i?x(m,f[5],_,null):Q(f[5]),null)},i(f){i||(v(u,f),i=!0)},o(f){w(u,f),i=!1},d(f){f&&d(e),a&&a.d(),f&&d(c),u&&u.d(f)}}}function X(n){let e;return{c(){e=S("The browser is unable to access the camera, try re-enabling the camera and reload")},l(t){e=D(t,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(t,s){b(t,e,s)},d(t){t&&d(e)}}}function be(n){let e,t,s,o;const r=[ve,ge],l=[];function c(i,a){return i[2]?0:1}return e=c(n),t=l[e]=r[e](n),{c(){t.c(),s=H()},l(i){t.l(i),s=H()},m(i,a){l[e].m(i,a),b(i,s,a),o=!0},p(i,[a]){let m=e;e=c(i),e===m?l[e].p(i,a):(U(),w(l[m],1,1,()=>{l[m]=null}),q(),t=l[e],t?t.p(i,a):(t=l[e]=r[e](i),t.c()),v(t,1),t.m(s.parentNode,s))},i(i){o||(v(t),o=!0)},o(i){w(t),o=!1},d(i){l[e].d(i),i&&d(s)}}}function ke(n,e,t){let{$$slots:s={},$$scope:o}=e,{stream:r}=e,{style:l=""}=e,{loading:c=!0}=e,{error:i=""}=e,{videoSource:a=void 0}=e;function m(u){A[u?"unshift":"push"](()=>{a=u,t(0,a),t(4,r),t(2,c)})}return n.$$set=u=>{"stream"in u&&t(4,r=u.stream),"style"in u&&t(1,l=u.style),"loading"in u&&t(2,c=u.loading),"error"in u&&t(3,i=u.error),"videoSource"in u&&t(0,a=u.videoSource),"$$scope"in u&&t(5,o=u.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&r&&!c&&a&&a.paused&&(t(0,a.srcObject=r,a),a.play())},[a,l,c,i,r,o,s,m]}class ee extends N{constructor(e){super(),O(this,e,ke,be,G,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function $e(n){let e,t,s,o;function r(c){n[7](c)}let l={error:n[11],loading:n[9],stream:n[10]};return n[1]!==void 0&&(l.videoSource=n[1]),e=new ee({props:l}),A.push(()=>oe(e,"videoSource",r)),{c(){t=k("div"),C(e.$$.fragment),this.h()},l(c){t=$(c,"DIV",{style:!0});var i=y(t);T(e.$$.fragment,i),this.h()},h(){L(t,"display","contents"),L(t,"--corner-radius","1rem")},m(c,i){b(c,t,i),B(e,t,null),o=!0},p(c,i){const a={};i&2048&&(a.error=c[11]),i&512&&(a.loading=c[9]),i&1024&&(a.stream=c[10]),!s&&i&2&&(s=!0,a.videoSource=c[1],ne(()=>s=!1)),e.$set(a)},i(c){o||(v(e.$$.fragment,c),o=!0)},o(c){w(e.$$.fragment,c),o=!1},d(c){c&&d(t),M(e,c)}}}function ye(n){let e,t;return e=new de({}),{c(){C(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){B(e,s,o),t=!0},p:P,i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function we(n){let e,t,s,o;const r=[ye,$e],l=[];function c(i,a){return i[0]?0:1}return e=c(n),t=l[e]=r[e](n),{c(){t.c(),s=H()},l(i){t.l(i),s=H()},m(i,a){l[e].m(i,a),b(i,s,a),o=!0},p(i,a){let m=e;e=c(i),e===m?l[e].p(i,a):(U(),w(l[m],1,1,()=>{l[m]=null}),q(),t=l[e],t?t.p(i,a):(t=l[e]=r[e](i),t.c()),v(t,1),t.m(s.parentNode,s))},i(i){o||(v(t),o=!0)},o(i){w(t),o=!1},d(i){l[e].d(i),i&&d(s)}}}function Ie(n){let e,t,s;return t=new ee({props:{loading:n[9],stream:n[10]}}),{c(){e=k("div"),C(t.$$.fragment),this.h()},l(o){e=$(o,"DIV",{slot:!0});var r=y(e);T(t.$$.fragment,r),r.forEach(d),this.h()},h(){g(e,"slot","background")},m(o,r){b(o,e,r),B(t,e,null),s=!0},p(o,r){const l={};r&512&&(l.loading=o[9]),r&1024&&(l.stream=o[10]),t.$set(l)},i(o){s||(v(t.$$.fragment,o),s=!0)},o(o){w(t.$$.fragment,o),s=!1},d(o){o&&d(e),M(t)}}}function Y(n){let e,t,s,o;return e=new F({props:{secondary:!0,icon:le,$$slots:{default:[Ve]},$$scope:{ctx:n}}}),e.$on("click",n[5]),s=new F({props:{loading:n[3],icon:ie,$$slots:{default:[Ee]},$$scope:{ctx:n}}}),s.$on("click",n[6]),{c(){C(e.$$.fragment),t=I(),C(s.$$.fragment)},l(r){T(e.$$.fragment,r),t=V(r),T(s.$$.fragment,r)},m(r,l){B(e,r,l),b(r,t,l),B(s,r,l),o=!0},p(r,l){const c={};l&4096&&(c.$$scope={dirty:l,ctx:r}),e.$set(c);const i={};l&8&&(i.loading=r[3]),l&4096&&(i.$$scope={dirty:l,ctx:r}),s.$set(i)},i(r){o||(v(e.$$.fragment,r),v(s.$$.fragment,r),o=!0)},o(r){w(e.$$.fragment,r),w(s.$$.fragment,r),o=!1},d(r){M(e,r),r&&d(t),M(s,r)}}}function Ve(n){let e;return{c(){e=S("Read scan instructions")},l(t){e=D(t,"Read scan instructions")},m(t,s){b(t,e,s)},d(t){t&&d(e)}}}function Ee(n){let e;return{c(){e=S("Capture photo of map")},l(t){e=D(t,"Capture photo of map")},m(t,s){b(t,e,s)},d(t){t&&d(e)}}}function Se(n){let e,t,s=!n[0]&&Y(n);return{c(){e=k("div"),s&&s.c(),this.h()},l(o){e=$(o,"DIV",{slot:!0});var r=y(e);s&&s.l(r),r.forEach(d),this.h()},h(){g(e,"slot","footer")},m(o,r){b(o,e,r),s&&s.m(e,null),t=!0},p(o,r){o[0]?s&&(U(),w(s,1,1,()=>{s=null}),q()):s?(s.p(o,r),r&1&&v(s,1)):(s=Y(o),s.c(),v(s,1),s.m(e,null))},i(o){t||(v(s),t=!0)},o(o){w(s),t=!1},d(o){o&&d(e),s&&s.d()}}}function De(n){let e,t;return e=new ae({props:{title:n[4],closeButton:n[0],$$slots:{footer:[Se],background:[Ie],default:[we]},$$scope:{ctx:n}}}),e.$on("close",n[5]),{c(){C(e.$$.fragment)},l(s){T(e.$$.fragment,s)},m(s,o){B(e,s,o),t=!0},p(s,o){const r={};o&16&&(r.title=s[4]),o&1&&(r.closeButton=s[0]),o&7691&&(r.$$scope={dirty:o,ctx:s}),e.$set(r)},i(s){t||(v(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Ce(n){let e,t,s,o;return e=new pe({props:{$$slots:{default:[De,({loading:r,stream:l,error:c})=>({9:r,10:l,11:c}),({loading:r,stream:l,error:c})=>(r?512:0)|(l?1024:0)|(c?2048:0)]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment),t=I(),s=k("canvas"),this.h()},l(r){T(e.$$.fragment,r),t=V(r),s=$(r,"CANVAS",{id:!0,style:!0}),y(s).forEach(d),this.h()},h(){g(s,"id","captureCanvas"),L(s,"display","none"),L(s,"position","absolute")},m(r,l){B(e,r,l),b(r,t,l),b(r,s,l),n[8](s),o=!0},p(r,[l]){const c={};l&7707&&(c.$$scope={dirty:l,ctx:r}),e.$set(c)},i(r){o||(v(e.$$.fragment,r),o=!0)},o(r){w(e.$$.fragment,r),o=!1},d(r){M(e,r),r&&d(t),r&&d(s),n[8](null)}}}const Oe=!0;function Te(n,e,t){let s,o=!1,r,l,c=!1;const i=()=>t(0,o=!o);async function a(){t(3,c=!0);const f=l.getContext("2d");t(2,l.height=r.videoHeight,l),t(2,l.width=r.videoWidth,l),f&&f.drawImage(r,0,0,l.width,l.height);const _=l.toDataURL("image/png");ce.set(_),ue("/scan/maptransform")}function m(f){r=f,t(1,r)}function u(f){A[f?"unshift":"push"](()=>{l=f,t(2,l)})}return n.$$.update=()=>{n.$$.dirty&1&&t(4,s=o?"Instructions":"Map Scanning")},[o,r,l,c,s,i,a,m,u]}class Ge extends N{constructor(e){super(),O(this,e,Te,Ce,G,{})}}export{Ge as default,Oe as prerender};
