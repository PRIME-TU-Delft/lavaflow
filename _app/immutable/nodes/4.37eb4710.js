import{e as _e}from"../chunks/index.3158323b.js";import{S as Y,i as Q,s as F,e as R,b as d,H as G,N as me,h as m,I as U,k as E,q as y,a as S,l as M,m as L,r as w,c as A,n as H,p as D,O as q,G as v,P as N,Q as V,R as J,g as h,v as K,d as k,f as X,y as T,z,T as ee,A as O,U as te,B as I,L as ne,w as $e,u as Z}from"../chunks/index.9fac37f0.js";import{A as x}from"../chunks/ActionButton.e9d49ffd.js";import{A as de}from"../chunks/ActionMenu.841c3a82.js";import{M as be,B as he}from"../chunks/Menubar.0dea1f1b.js";import{d as ge}from"../chunks/difficultyStore.acc5b7e1.js";import{t as P,c as ve}from"../chunks/locationStore.0587958d.js";import{B as ke,I as ye,b as we,c as Ce,d as Te}from"../chunks/Preview.svelte_svelte_type_style_lang.e14d1918.js";import{P as ze}from"../chunks/P5PreviewCurves.b89f3958.js";import{c as Oe}from"../chunks/contourLineStore.bca35346.js";import{s as Ie}from"../chunks/sizeStore.9e8dcba2.js";const Be=!1,De=({params:l})=>{if(new Set(["3d","ar","web-xr"]).has(l.type))return l;throw _e(404,l.type+" is not a valid type")},it=Object.freeze(Object.defineProperty({__proto__:null,load:De,ssr:Be},Symbol.toStringTag,{value:"Module"}));function re(l,t,r){const e=l.slice();return e[8]=t[r],e[10]=r,e}function le(l){let t,r,e,n,s,o,i,a,f,u,c;function $(){return l[5](l[8])}return{c(){t=E("p"),r=y("Delete this turbine?"),e=S(),n=E("div"),s=E("button"),o=y("Yes, delete"),i=S(),a=E("button"),f=y("Cancel"),this.h()},l(p){t=M(p,"P",{class:!0});var _=L(t);r=w(_,"Delete this turbine?"),_.forEach(m),e=A(p),n=M(p,"DIV",{class:!0});var b=L(n);s=M(b,"BUTTON",{class:!0});var C=L(s);o=w(C,"Yes, delete"),C.forEach(m),i=A(b),a=M(b,"BUTTON",{class:!0});var B=L(a);f=w(B,"Cancel"),B.forEach(m),b.forEach(m),this.h()},h(){H(t,"class","mb-1 text-sm text-slate-400"),H(s,"class","bg-red-200 p-2"),H(a,"class","bg-white p-2"),H(n,"class","flex w-full gap-2 text-slate-900")},m(p,_){d(p,t,_),v(t,r),d(p,e,_),d(p,n,_),v(n,s),v(s,o),v(n,i),v(n,a),v(a,f),u||(c=[N(s,"click",V($)),N(a,"click",V(l[3]))],u=!0)},p(p,_){l=p},d(p){p&&m(t),p&&m(e),p&&m(n),u=!1,J(c)}}}function se(l){let t,r,e=l[10]+1+"",n,s,o,i,a,f=l[8].hasConfirmOpen&&le(l);function u(){return l[6](l[8])}function c(){return l[7](l[8])}return{c(){t=E("div"),r=y("Turbine "),n=y(e),s=S(),f&&f.c(),o=S(),this.h()},l($){t=M($,"DIV",{class:!0,style:!0});var p=L(t);r=w(p,"Turbine "),n=w(p,e),s=A(p),f&&f.l(p),o=A(p),p.forEach(m),this.h()},h(){H(t,"class","turbine svelte-1j1nm92"),D(t,"--pos-x",l[8].x*l[0][0]+"px"),D(t,"--pos-y",l[8].y*l[0][1]+"px"),q(t,"top",l[8].hasConfirmOpen)},m($,p){d($,t,p),v(t,r),v(t,n),v(t,s),f&&f.m(t,null),v(t,o),i||(a=[N(t,"click",V(u)),N(t,"keydown",c)],i=!0)},p($,p){l=$,l[8].hasConfirmOpen?f?f.p(l,p):(f=le(l),f.c(),f.m(t,o)):f&&(f.d(1),f=null),p&3&&D(t,"--pos-x",l[8].x*l[0][0]+"px"),p&3&&D(t,"--pos-y",l[8].y*l[0][1]+"px"),p&2&&q(t,"top",l[8].hasConfirmOpen)},d($){$&&m(t),f&&f.d(),i=!1,J(a)}}}function Ee(l){let t,r=l[1]||[],e=[];for(let n=0;n<r.length;n+=1)e[n]=se(re(l,r,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=R()},l(n){for(let s=0;s<e.length;s+=1)e[s].l(n);t=R()},m(n,s){for(let o=0;o<e.length;o+=1)e[o]&&e[o].m(n,s);d(n,t,s)},p(n,[s]){if(s&31){r=n[1]||[];let o;for(o=0;o<r.length;o+=1){const i=re(n,r,o);e[o]?e[o].p(i,s):(e[o]=se(i),e[o].c(),e[o].m(t.parentNode,t))}for(;o<e.length;o+=1)e[o].d(1);e.length=r.length}},i:G,o:G,d(n){me(e,n),n&&m(t)}}}function Me(l,t,r){let e;U(l,P,c=>r(1,e=c));let{sizeMult:n=[1,1]}=t;function s(c){P.remove(c.index)}function o(){P.closeAll()}function i(c){o(),P.toggleOpen(c.index)}const a=c=>s(c),f=c=>i(c),u=c=>i(c);return l.$$set=c=>{"sizeMult"in c&&r(0,n=c.sizeMult)},[n,e,s,o,i,a,f,u]}class Le extends Y{constructor(t){super(),Q(this,t,Me,Ee,F,{sizeMult:0})}}function oe(l){let t=l[3]+l[4],r,e,n=ie(l);return{c(){n.c(),r=R()},l(s){n.l(s),r=R()},m(s,o){n.m(s,o),d(s,r,o),e=!0},p(s,o){o&24&&F(t,t=s[3]+s[4])?(K(),k(n,1,1,G),X(),n=ie(s),n.c(),h(n,1),n.m(r.parentNode,r)):n.p(s,o)},i(s){e||(h(n),e=!0)},o(s){k(n),e=!1},d(s){s&&m(r),n.d(s)}}}function ie(l){let t,r,e,n,s,o,i,a,f,u,c,$,p;return o=new Le({props:{sizeMult:[l[3]/l[7],l[4]/l[8]]}}),f=new ze({props:{curves:l[5]?.curves}}),{c(){t=E("div"),r=E("div"),e=E("div"),n=y("Crater"),s=S(),T(o.$$.fragment),a=S(),T(f.$$.fragment),this.h()},l(_){t=M(_,"DIV",{style:!0});var b=L(t);r=M(b,"DIV",{style:!0,class:!0});var C=L(r);e=M(C,"DIV",{class:!0,style:!0});var B=L(e);n=w(B,"Crater"),B.forEach(m),s=A(C),z(o.$$.fragment,C),C.forEach(m),a=A(b),z(f.$$.fragment,b),b.forEach(m),this.h()},h(){H(e,"class","crater svelte-1jt78hw"),D(e,"--pos-y",l[6][1]*l[3]/l[7]+"px"),D(e,"--pos-x",l[6][0]*l[4]/l[8]+"px"),D(r,"aspect-ratio",l[8]+"/"+l[7]),H(r,"class","overlay svelte-1jt78hw"),ee(()=>l[13].call(r)),q(r,"tall",l[1]/l[0]>=l[8]/l[7]),D(t,"height","100%"),ee(()=>l[15].call(t))},m(_,b){d(_,t,b),v(t,r),v(r,e),v(e,n),v(r,s),O(o,r,null),l[12](r),i=te(r,l[13].bind(r)),v(t,a),O(f,t,null),u=te(t,l[15].bind(t)),c=!0,$||(p=[N(e,"click",V(l[10])),N(e,"keydown",V(l[11])),N(r,"click",l[9]),N(r,"keydown",l[14])],$=!0)},p(_,b){(!c||b&72)&&D(e,"--pos-y",_[6][1]*_[3]/_[7]+"px"),(!c||b&80)&&D(e,"--pos-x",_[6][0]*_[4]/_[8]+"px");const C={};b&24&&(C.sizeMult=[_[3]/_[7],_[4]/_[8]]),o.$set(C),(!c||b&387)&&q(r,"tall",_[1]/_[0]>=_[8]/_[7]);const B={};b&32&&(B.curves=_[5]?.curves),f.$set(B)},i(_){c||(h(o.$$.fragment,_),h(f.$$.fragment,_),c=!0)},o(_){k(o.$$.fragment,_),k(f.$$.fragment,_),c=!1},d(_){_&&m(t),I(o),l[12](null),i(),I(f),u(),$=!1,J(p)}}}function Pe(l){let t,r,e=l[5]?.curves&&oe(l);return{c(){e&&e.c(),t=R()},l(n){e&&e.l(n),t=R()},m(n,s){e&&e.m(n,s),d(n,t,s),r=!0},p(n,[s]){n[5]?.curves?e?(e.p(n,s),s&32&&h(e,1)):(e=oe(n),e.c(),h(e,1),e.m(t.parentNode,t)):e&&(K(),k(e,1,1,()=>{e=null}),X())},i(n){r||(h(e),r=!0)},o(n){k(e),r=!1},d(n){e&&e.d(n),n&&m(t)}}}function Se(l,t,r){let e,n,s,o;U(l,P,g=>r(17,e=g)),U(l,Ie,g=>r(18,n=g)),U(l,Oe,g=>r(5,s=g)),U(l,ve,g=>r(6,o=g));let{height:i,width:a}=n,[f,u]=[0,0],[c,$]=[0,0],p,_;function b(g){_=p?.getBoundingClientRect();const j=(g.x-_.left)/($/a),W=(g.y-_.top)/(c/i);if(e.find(pe=>pe.hasConfirmOpen==!0)){P.closeAll();return}if(e.length>=10){console.log("cannot place more than 10 turbines");return}j<20||j>a-20||W<20||W>i-20||P.add({x:j,y:W,index:`${j.toFixed(2)}-${W.toFixed(2)}`,hasConfirmOpen:!1})}function C(g){ne.call(this,l,g)}function B(g){ne.call(this,l,g)}function ae(g){$e[g?"unshift":"push"](()=>{p=g,r(2,p)})}function ue(){c=this.clientHeight,$=this.clientWidth,r(3,c),r(4,$)}const fe=()=>console.log("key");function ce(){f=this.clientHeight,u=this.clientWidth,r(0,f),r(1,u)}return l.$$.update=()=>{l.$$.dirty&7&&f+u&&(_=p?.getBoundingClientRect())},[f,u,p,c,$,s,o,i,a,b,C,B,ae,ue,fe,ce]}class Ae extends Y{constructor(t){super(),Q(this,t,Se,Pe,F,{})}}function He(l){let t,r,e;return t=new ye({props:{path:we}}),{c(){T(t.$$.fragment),r=y(`
		Reset turbines`)},l(n){z(t.$$.fragment,n),r=w(n,`
		Reset turbines`)},m(n,s){O(t,n,s),d(n,r,s),e=!0},p:G,i(n){e||(h(t.$$.fragment,n),e=!0)},o(n){k(t.$$.fragment,n),e=!1},d(n){I(t,n),n&&m(r)}}}function Ne(l){let t,r;return t=new ke({props:{class:"flex items-center gap-2",outline:!0,color:"red",$$slots:{default:[He]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){T(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){O(t,e,n),r=!0},p(e,n){const s={};n&32&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){I(t,e)}}}function Re(l){let t,r,e=l[0].type.toUpperCase()+"",n;return{c(){t=E("div"),r=y("Back to "),n=y(e),this.h()},l(s){t=M(s,"DIV",{slot:!0});var o=L(t);r=w(o,"Back to "),n=w(o,e),o.forEach(m),this.h()},h(){H(t,"slot","backTitle")},m(s,o){d(s,t,o),v(t,r),v(t,n)},p(s,o){o&1&&e!==(e=s[0].type.toUpperCase()+"")&&Z(n,e)},d(s){s&&m(t)}}}function Ue(l){let t;return{c(){t=y("Instructions")},l(r){t=w(r,"Instructions")},m(r,e){d(r,t,e)},d(r){r&&m(t)}}}function Ve(l){let t,r;return t=new x({props:{twClass:"w-full",href:"turbine-placement/instructions",secondary:!0,icon:Ce,$$slots:{default:[Ue]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){O(t,e,n),r=!0},p(e,n){const s={};n&32&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){I(t,e)}}}function je(l){let t,r;return t=new x({props:{href:"/visual/"+l[0].type,icon:Te,$$slots:{default:[Ge]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){O(t,e,n),r=!0},p(e,n){const s={};n&1&&(s.href="/visual/"+e[0].type),n&33&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){I(t,e)}}}function We(l){let t,r;return t=new x({props:{disabled:!0,$$slots:{default:[qe]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,n){O(t,e,n),r=!0},p(e,n){const s={};n&34&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(h(t.$$.fragment,e),r=!0)},o(e){k(t.$$.fragment,e),r=!1},d(e){I(t,e)}}}function Ge(l){let t,r=l[0].type.toUpperCase()+"",e;return{c(){t=y("Go to eruption in "),e=y(r)},l(n){t=w(n,"Go to eruption in "),e=w(n,r)},m(n,s){d(n,t,s),d(n,e,s)},p(n,s){s&1&&r!==(r=n[0].type.toUpperCase()+"")&&Z(e,r)},d(n){n&&m(t),n&&m(e)}}}function qe(l){let t,r,e;return{c(){t=y("Click map to place "),r=y(l[1]),e=y(" more turbines")},l(n){t=w(n,"Click map to place "),r=w(n,l[1]),e=w(n," more turbines")},m(n,s){d(n,t,s),d(n,r,s),d(n,e,s)},p(n,s){s&2&&Z(r,n[1])},d(n){n&&m(t),n&&m(r),n&&m(e)}}}function Fe(l){let t,r,e,n,s,o;t=new he({props:{$$slots:{default:[Ve]},$$scope:{ctx:l}}});const i=[We,je],a=[];function f(u,c){return u[1]>0?0:1}return e=f(l),n=a[e]=i[e](l),{c(){T(t.$$.fragment),r=S(),n.c(),s=R()},l(u){z(t.$$.fragment,u),r=A(u),n.l(u),s=R()},m(u,c){O(t,u,c),d(u,r,c),a[e].m(u,c),d(u,s,c),o=!0},p(u,c){const $={};c&32&&($.$$scope={dirty:c,ctx:u}),t.$set($);let p=e;e=f(u),e===p?a[e].p(u,c):(K(),k(a[p],1,1,()=>{a[p]=null}),X(),n=a[e],n?n.p(u,c):(n=a[e]=i[e](u),n.c()),h(n,1),n.m(s.parentNode,s))},i(u){o||(h(t.$$.fragment,u),h(n),o=!0)},o(u){k(t.$$.fragment,u),k(n),o=!1},d(u){I(t,u),u&&m(r),a[e].d(u),u&&m(s)}}}function Ye(l){let t,r,e,n,s,o;return t=new be({props:{back:"/visual/"+l[0].type,title:"Turbine placement",$$slots:{backTitle:[Re],default:[Ne]},$$scope:{ctx:l}}}),e=new Ae({}),s=new de({props:{$$slots:{default:[Fe]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment),r=S(),T(e.$$.fragment),n=S(),T(s.$$.fragment)},l(i){z(t.$$.fragment,i),r=A(i),z(e.$$.fragment,i),n=A(i),z(s.$$.fragment,i)},m(i,a){O(t,i,a),d(i,r,a),O(e,i,a),d(i,n,a),O(s,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.back="/visual/"+i[0].type),a&33&&(f.$$scope={dirty:a,ctx:i}),t.$set(f);const u={};a&35&&(u.$$scope={dirty:a,ctx:i}),s.$set(u)},i(i){o||(h(t.$$.fragment,i),h(e.$$.fragment,i),h(s.$$.fragment,i),o=!0)},o(i){k(t.$$.fragment,i),k(e.$$.fragment,i),k(s.$$.fragment,i),o=!1},d(i){I(t,i),i&&m(r),I(e,i),i&&m(n),I(s,i)}}}function Qe(l,t,r){let e,n,s;U(l,P,a=>r(3,n=a)),U(l,ge,a=>r(4,s=a));let{data:o}=t;function i(){P.clear()}return l.$$set=a=>{"data"in a&&r(0,o=a.data)},l.$$.update=()=>{l.$$.dirty&24&&r(1,e=s.min_steam_turbines-n.length)},[o,e,i,n,s]}class at extends Y{constructor(t){super(),Q(this,t,Qe,Ye,F,{data:0})}}export{at as component,it as universal};
