import{S as K,i as j,s as I,e as y,b as d,g as C,t as g,I as W,d as z,f as m,h as c,w as p,x as $,y as h,z as b,G as V,o as T,k as E,l as H,m as M,n as Q,p as U,a as N,c as R,J as Y,K as Z,q as S,r as P,H as B,u as x}from"../../../../chunks/index-5adb68ea.js";import{P as ee}from"../../../../chunks/P5-902ad660.js";import{B as L,I as X,b as q}from"../../../../chunks/Button-52912701.js";import{P as te}from"../../../../chunks/Page-3bb88c34.js";import{N as re}from"../../../../chunks/NavigationButton-5fbaa702.js";import{g as A}from"../../../../chunks/navigation-5b342094.js";import{a as ne}from"../../../../chunks/contourLineStore-50093bfb.js";import{g as F}from"../../../../chunks/gltfStore-1e30ae80.js";import{d as oe}from"../../../../chunks/difficultyStore-7cc4eead.js";import{d as se}from"../../../../chunks/debugStore-f048b367.js";function G(a){let t,r;return t=new ee({props:{sketch:a[1]}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,n){h(t,e,n),r=!0},p:W,i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){b(t,e)}}}function ae(a){let t=a[0],r,e,n=G(a);return{c(){n.c(),r=y()},l(s){n.l(s),r=y()},m(s,o){n.m(s,o),d(s,r,o),e=!0},p(s,[o]){o&1&&I(t,t=s[0])?(C(),g(n,1,1,W),z(),n=G(s),n.c(),m(n,1),n.m(r.parentNode,r)):n.p(s,o)},i(s){e||(m(n),e=!0)},o(s){g(n),e=!1},d(s){s&&c(r),n.d(s)}}}function le(a,t,r){let{debugMode:e=!1}=t,{foregroundWidth:n}=t,{foregroundHeight:s}=t,{curves:o}=t,{hierarchy:l}=t;const u=i=>{i.setup=()=>{i.createCanvas(n,s),i.background(230),o.forEach((f,_)=>{i.strokeWeight(1),i.stroke(30),i.fill(30),e&&i.text(`${_} (${l[_]})`,f[0][0]-10,f[0][1]-10),i.strokeWeight(4),i.noFill(),i.beginShape();for(let k of f){let w=k[0],D=k[1];i.vertex(w,D)}i.endShape(i.CLOSE)})}};return a.$$set=i=>{"debugMode"in i&&r(0,e=i.debugMode),"foregroundWidth"in i&&r(2,n=i.foregroundWidth),"foregroundHeight"in i&&r(3,s=i.foregroundHeight),"curves"in i&&r(4,o=i.curves),"hierarchy"in i&&r(5,l=i.hierarchy)},[e,u,n,s,o,l]}class ie extends K{constructor(t){super(),j(this,t,le,ae,I,{debugMode:0,foregroundWidth:2,foregroundHeight:3,curves:4,hierarchy:5})}}function J(a){let t,r,e,n;return r=new ie({props:{debugMode:a[6],curves:a[5].curves,hierarchy:a[5].hierarchy,foregroundHeight:a[1],foregroundWidth:a[0]}}),{c(){t=E("div"),p(r.$$.fragment),this.h()},l(s){t=H(s,"DIV",{class:!0});var o=M(t);$(r.$$.fragment,o),o.forEach(c),this.h()},h(){Q(t,"class","sketch svelte-1upoge"),Y(()=>a[10].call(t))},m(s,o){d(s,t,o),h(r,t,null),e=Z(t,a[10].bind(t)),n=!0},p(s,o){const l={};o&64&&(l.debugMode=s[6]),o&32&&(l.curves=s[5].curves),o&32&&(l.hierarchy=s[5].hierarchy),o&2&&(l.foregroundHeight=s[1]),o&1&&(l.foregroundWidth=s[0]),r.$set(l)},i(s){n||(m(r.$$.fragment,s),n=!0)},o(s){g(r.$$.fragment,s),n=!1},d(s){s&&c(t),b(r),e()}}}function ue(a){var n,s;let t,r,e=((n=a[5])==null?void 0:n.curves)&&((s=a[5])==null?void 0:s.hierarchy)&&J(a);return{c(){e&&e.c(),t=y()},l(o){e&&e.l(o),t=y()},m(o,l){e&&e.m(o,l),d(o,t,l),r=!0},p(o,l){var u,i;((u=o[5])==null?void 0:u.curves)&&((i=o[5])==null?void 0:i.hierarchy)?e?(e.p(o,l),l&32&&m(e,1)):(e=J(o),e.c(),m(e,1),e.m(t.parentNode,t)):e&&(C(),g(e,1,1,()=>{e=null}),z())},i(o){r||(m(e),r=!0)},o(o){g(e),r=!1},d(o){e&&e.d(o),o&&c(t)}}}function fe(a){let t;return{c(){t=S("Back to selection")},l(r){t=P(r,"Back to selection")},m(r,e){d(r,t,e)},d(r){r&&c(t)}}}function ce(a){let t,r;return t=new re({props:{slot:"headerButton",to:"/scan/maptransform",back:!0,$$slots:{default:[fe]},$$scope:{ctx:a}}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,n){h(t,e,n),r=!0},p(e,n){const s={};n&4096&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){b(t,e)}}}function me(a){let t;return{c(){t=E("div"),this.h()},l(r){t=H(r,"DIV",{slot:!0,style:!0}),M(t).forEach(c),this.h()},h(){Q(t,"slot","background"),U(t,"background","#aaa")},m(r,e){d(r,t,e)},p:W,d(r){r&&c(t)}}}function _e(a){let t,r,e,n,s;return n=new X({props:{path:q}}),{c(){t=E("span"),r=S("Visualise as 3D model"),e=N(),p(n.$$.fragment)},l(o){t=H(o,"SPAN",{});var l=M(t);r=P(l,"Visualise as 3D model"),l.forEach(c),e=R(o),$(n.$$.fragment,o)},m(o,l){d(o,t,l),B(t,r),d(o,e,l),h(n,o,l),s=!0},p:W,i(o){s||(m(n.$$.fragment,o),s=!0)},o(o){g(n.$$.fragment,o),s=!1},d(o){o&&c(t),o&&c(e),b(n,o)}}}function ge(a){let t,r;return t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[pe]},$$scope:{ctx:a}}}),t.$on("click",a[9]),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,n){h(t,e,n),r=!0},p(e,n){const s={};n&4&&(s.loading=!e[2]),n&4096&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){b(t,e)}}}function de(a){let t,r;return t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[$e]},$$scope:{ctx:a}}}),t.$on("click",a[8]),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,n){h(t,e,n),r=!0},p(e,n){const s={};n&4&&(s.loading=!e[2]),n&4112&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){b(t,e)}}}function pe(a){let t,r,e,n,s;return n=new X({props:{path:q}}),{c(){t=E("span"),r=S("Download webXR browser for AR"),e=N(),p(n.$$.fragment)},l(o){t=H(o,"SPAN",{});var l=M(t);r=P(l,"Download webXR browser for AR"),l.forEach(c),e=R(o),$(n.$$.fragment,o)},m(o,l){d(o,t,l),B(t,r),d(o,e,l),h(n,o,l),s=!0},p:W,i(o){s||(m(n.$$.fragment,o),s=!0)},o(o){g(n.$$.fragment,o),s=!1},d(o){o&&c(t),o&&c(e),b(n,o)}}}function $e(a){let t,r,e=a[4]?"! Experimental !":"",n,s,o,l;return o=new X({props:{path:q}}),{c(){t=E("span"),r=S("Visualise in AR "),n=S(e),s=N(),p(o.$$.fragment)},l(u){t=H(u,"SPAN",{});var i=M(t);r=P(i,"Visualise in AR "),n=P(i,e),i.forEach(c),s=R(u),$(o.$$.fragment,u)},m(u,i){d(u,t,i),B(t,r),B(t,n),d(u,s,i),h(o,u,i),l=!0},p(u,i){(!l||i&16)&&e!==(e=u[4]?"! Experimental !":"")&&x(n,e)},i(u){l||(m(o.$$.fragment,u),l=!0)},o(u){g(o.$$.fragment,u),l=!1},d(u){u&&c(t),u&&c(s),b(o,u)}}}function he(a){let t,r,e,n,s,o;t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[_e]},$$scope:{ctx:a}}}),t.$on("click",a[7]);const l=[de,ge],u=[];function i(f,_){return f[3]?0:1}return e=i(a),n=u[e]=l[e](a),{c(){p(t.$$.fragment),r=N(),n.c(),s=y()},l(f){$(t.$$.fragment,f),r=R(f),n.l(f),s=y()},m(f,_){h(t,f,_),d(f,r,_),u[e].m(f,_),d(f,s,_),o=!0},p(f,_){const k={};_&4&&(k.loading=!f[2]),_&4096&&(k.$$scope={dirty:_,ctx:f}),t.$set(k);let w=e;e=i(f),e===w?u[e].p(f,_):(C(),g(u[w],1,1,()=>{u[w]=null}),z(),n=u[e],n?n.p(f,_):(n=u[e]=l[e](f),n.c()),m(n,1),n.m(s.parentNode,s))},i(f){o||(m(t.$$.fragment,f),m(n),o=!0)},o(f){g(t.$$.fragment,f),g(n),o=!1},d(f){b(t,f),f&&c(r),u[e].d(f),f&&c(s)}}}function be(a){let t,r;return t=new te({props:{$$slots:{footer:[he],background:[me],headerButton:[ce],default:[ue]},$$scope:{ctx:a}}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,n){h(t,e,n),r=!0},p(e,[n]){const s={};n&4223&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){r||(m(t.$$.fragment,e),r=!0)},o(e){g(t.$$.fragment,e),r=!1},d(e){b(t,e)}}}const Be=!0;function ke(a,t,r){let e,n,s,o;V(a,ne,v=>r(5,n=v)),V(a,oe,v=>r(11,s=v)),V(a,se,v=>r(6,o=v));let l,u,i=!1,f=!1;T(async()=>{var v,O;if(!n.curves||!n.hierarchy)return A("/scan/mapscanning");await F.setup(n,s.lava_forking),F.build(n),r(3,f=(O=await((v=navigator==null?void 0:navigator.xr)==null?void 0:v.isSessionSupported("immersive-ar")))!=null?O:!1),r(2,i=!0)});const _=()=>A("/visualise/model"),k=()=>A("/visualise/ar"),w=()=>A("https://apps.apple.com/nl/app/webxr-viewer/id1295998056");function D(){l=this.clientWidth,u=this.clientHeight,r(0,l),r(1,u)}return r(4,e=/iPhone|iPod|iPad/.test((navigator==null?void 0:navigator.userAgent)||(navigator==null?void 0:navigator.platform)||"unknown")),[l,u,i,f,e,n,o,_,k,w,D]}class Ne extends K{constructor(t){super(),j(this,t,ke,be,I,{})}}export{Ne as default,Be as prerender};
