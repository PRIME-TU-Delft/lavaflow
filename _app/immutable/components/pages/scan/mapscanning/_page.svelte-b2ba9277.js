import{S as le,i as ce,s as ue,k as p,q as $,a as k,l as g,m as b,r as I,h as v,c as D,n as _,b as C,H as c,I as x,C as at,D as it,E as lt,F as ct,f as y,t as E,o as dt,Y as vt,e as et,g as Ne,d as He,N as ee,T as ie,O as Oe,w as q,x as T,p as tt,y as B,P as Fe,z as P,u as mt}from"../../../../chunks/index-5adb68ea.js";import{B as ut,c as _t,d as ht}from"../../../../chunks/Button-52912701.js";import{N as pt}from"../../../../chunks/NavigationButton-5fbaa702.js";import{D as gt}from"../../../../chunks/Dropdown-af9110fc.js";import{P as bt}from"../../../../chunks/Page-3bb88c34.js";import{M as wt}from"../../../../chunks/Modal-74a3b537.js";import{g as $t}from"../../../../chunks/navigation-5b342094.js";import{r as It}from"../../../../chunks/imageStore-ad2a8cbe.js";function kt(n){let e,s,t,r,a,o,u,f,m,i,d,l,h,S,N,V,H,fe,de,O,A,ve,me,G,_e,he,F,j,pe,ge,z,be,we,R,$e,Ie,L,W,ke,De,Y,ye,Ee,M,J,Ve,Ce,K,Se,qe,U,Q,Te,Be,X,Pe;return{c(){e=p("div"),s=p("h2"),t=$("Good example of contour map"),r=k(),a=p("div"),o=k(),u=p("h2"),f=$("Instructions"),m=k(),i=p("div"),d=$("Drawing"),l=k(),h=p("div"),S=p("div"),N=$("Curves should have sufficient margin"),V=k(),H=p("div"),fe=$(`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),de=k(),O=p("div"),A=p("div"),ve=$("Drawing with dark pen"),me=k(),G=p("div"),_e=$(`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),he=k(),F=p("div"),j=p("div"),pe=$("Close your curves"),ge=k(),z=p("div"),be=$("To avoid false readings, close your curves, dont leave any open-ended lines"),we=k(),R=p("div"),$e=$("Scanning"),Ie=k(),L=p("div"),W=p("div"),ke=$("Four corners visible"),De=k(),Y=p("div"),ye=$("To scan the level curves, we need to have the four corners visible"),Ee=k(),M=p("div"),J=p("div"),Ve=$("Drawing should not be too far"),Ce=k(),K=p("div"),Se=$(`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),qe=k(),U=p("div"),Q=p("div"),Te=$("Proper lighting"),Be=k(),X=p("div"),Pe=$(`Level curves are hard to distinguish from the background in a low light setting. Try to use
			natural daylight or a propper ceiling light for the best results. Be careful of sharp or dark
			shadows on the drawing, as they might get interpreted as part of your drawing.`),this.h()},l(Z){e=g(Z,"DIV",{class:!0});var w=b(e);s=g(w,"H2",{});var Le=b(s);t=I(Le,"Good example of contour map"),Le.forEach(v),r=D(w),a=g(w,"DIV",{class:!0}),b(a).forEach(v),o=D(w),u=g(w,"H2",{});var Me=b(u);f=I(Me,"Instructions"),Me.forEach(v),m=D(w),i=g(w,"DIV",{class:!0});var Ue=b(i);d=I(Ue,"Drawing"),Ue.forEach(v),l=D(w),h=g(w,"DIV",{class:!0});var te=b(h);S=g(te,"DIV",{class:!0});var Ae=b(S);N=I(Ae,"Curves should have sufficient margin"),Ae.forEach(v),V=D(te),H=g(te,"DIV",{class:!0});var Ge=b(H);fe=I(Ge,`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),Ge.forEach(v),te.forEach(v),de=D(w),O=g(w,"DIV",{class:!0});var se=b(O);A=g(se,"DIV",{class:!0});var je=b(A);ve=I(je,"Drawing with dark pen"),je.forEach(v),me=D(se),G=g(se,"DIV",{class:!0});var ze=b(G);_e=I(ze,`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),ze.forEach(v),se.forEach(v),he=D(w),F=g(w,"DIV",{class:!0});var re=b(F);j=g(re,"DIV",{class:!0});var Re=b(j);pe=I(Re,"Close your curves"),Re.forEach(v),ge=D(re),z=g(re,"DIV",{class:!0});var We=b(z);be=I(We,"To avoid false readings, close your curves, dont leave any open-ended lines"),We.forEach(v),re.forEach(v),we=D(w),R=g(w,"DIV",{class:!0});var Ye=b(R);$e=I(Ye,"Scanning"),Ye.forEach(v),Ie=D(w),L=g(w,"DIV",{class:!0});var oe=b(L);W=g(oe,"DIV",{class:!0});var Je=b(W);ke=I(Je,"Four corners visible"),Je.forEach(v),De=D(oe),Y=g(oe,"DIV",{class:!0});var Ke=b(Y);ye=I(Ke,"To scan the level curves, we need to have the four corners visible"),Ke.forEach(v),oe.forEach(v),Ee=D(w),M=g(w,"DIV",{class:!0});var ne=b(M);J=g(ne,"DIV",{class:!0});var Qe=b(J);Ve=I(Qe,"Drawing should not be too far"),Qe.forEach(v),Ce=D(ne),K=g(ne,"DIV",{class:!0});var Xe=b(K);Se=I(Xe,`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Xe.forEach(v),ne.forEach(v),qe=D(w),U=g(w,"DIV",{class:!0});var ae=b(U);Q=g(ae,"DIV",{class:!0});var Ze=b(Q);Te=I(Ze,"Proper lighting"),Ze.forEach(v),Be=D(ae),X=g(ae,"DIV",{class:!0});var xe=b(X);Pe=I(xe,`Level curves are hard to distinguish from the background in a low light setting. Try to use
			natural daylight or a propper ceiling light for the best results. Be careful of sharp or dark
			shadows on the drawing, as they might get interpreted as part of your drawing.`),xe.forEach(v),ae.forEach(v),w.forEach(v),this.h()},h(){_(a,"class","example svelte-1foqwan"),_(i,"class","section svelte-1foqwan"),_(S,"class","title svelte-1foqwan"),_(H,"class","description"),_(h,"class","instruction svelte-1foqwan"),_(A,"class","title svelte-1foqwan"),_(G,"class","description"),_(O,"class","instruction svelte-1foqwan"),_(j,"class","title svelte-1foqwan"),_(z,"class","description"),_(F,"class","instruction svelte-1foqwan"),_(R,"class","section svelte-1foqwan"),_(W,"class","title svelte-1foqwan"),_(Y,"class","description"),_(L,"class","instruction svelte-1foqwan"),_(J,"class","title svelte-1foqwan"),_(K,"class","description"),_(M,"class","instruction svelte-1foqwan"),_(Q,"class","title svelte-1foqwan"),_(X,"class","description"),_(U,"class","instruction svelte-1foqwan"),_(e,"class","instructions svelte-1foqwan")},m(Z,w){C(Z,e,w),c(e,s),c(s,t),c(e,r),c(e,a),c(e,o),c(e,u),c(u,f),c(e,m),c(e,i),c(i,d),c(e,l),c(e,h),c(h,S),c(S,N),c(h,V),c(h,H),c(H,fe),c(e,de),c(e,O),c(O,A),c(A,ve),c(O,me),c(O,G),c(G,_e),c(e,he),c(e,F),c(F,j),c(j,pe),c(F,ge),c(F,z),c(z,be),c(e,we),c(e,R),c(R,$e),c(e,Ie),c(e,L),c(L,W),c(W,ke),c(L,De),c(L,Y),c(Y,ye),c(e,Ee),c(e,M),c(M,J),c(J,Ve),c(M,Ce),c(M,K),c(K,Se),c(e,qe),c(e,U),c(U,Q),c(Q,Te),c(U,Be),c(U,X),c(X,Pe)},p:x,i:x,o:x,d(Z){Z&&v(e)}}}class Dt extends le{constructor(e){super(),ce(this,e,null,kt,ue,{})}}const yt=n=>({loading:n&2,stream:n&1,error:n&4,cameraOptions:n&8}),st=n=>({loading:n[1],stream:n[0],error:n[2],cameraOptions:n[3]});function Et(n){let e;const s=n[6].default,t=at(s,n,n[5],st);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,a){t&&t.m(r,a),e=!0},p(r,[a]){t&&t.p&&(!e||a&47)&&it(t,s,r,r[5],e?ct(s,r[5],a,yt):lt(r[5]),st)},i(r){e||(y(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Vt(n,e,s){let{$$slots:t={},$$scope:r}=e,{deviceId:a=""}=e,o,u=!0,f,m=[];const i=async()=>{s(1,u=!0),o&&o.getTracks().forEach(l=>l.stop());const d=a?{deviceId:{exact:a}}:{facingMode:"environment"};try{s(0,o=await navigator.mediaDevices.getUserMedia({video:d})),s(1,u=!1),s(2,f="")}catch(l){s(2,f=""+l)}};return dt(async()=>{await i();const d=await navigator.mediaDevices.enumerateDevices();s(3,m=d.filter(l=>l.kind=="videoinput"))}),vt(()=>{!o||o.getTracks().forEach(d=>d.stop())}),n.$$set=d=>{"deviceId"in d&&s(4,a=d.deviceId),"$$scope"in d&&s(5,r=d.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&a&&i()},[o,u,f,m,a,r,t]}class Ct extends le{constructor(e){super(),ce(this,e,Vt,Et,ue,{deviceId:4})}}function St(n){let e;return{c(){e=p("video"),this.h()},l(s){e=g(s,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),b(e).forEach(v),this.h()},h(){_(e,"style",n[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,_(e,"preload","auto"),_(e,"type","video/mp4"),_(e,"class","svelte-1my52b3"),ie(e,"roundCorner",n[4])},m(s,t){C(s,e,t),n[8](e)},p(s,t){t&2&&_(e,"style",s[1]),t&16&&ie(e,"roundCorner",s[4])},i:x,o:x,d(s){s&&v(e),n[8](null)}}}function qt(n){let e,s,t,r,a,o=n[3]&&n[3].includes("Permission denied"),u,f,m=o&&rt();const i=n[7].default,d=at(i,n,n[6],null);return{c(){e=p("div"),s=p("div"),t=p("h2"),r=$("Loading video..."),a=k(),m&&m.c(),u=k(),d&&d.c(),this.h()},l(l){e=g(l,"DIV",{class:!0});var h=b(e);s=g(h,"DIV",{class:!0});var S=b(s);t=g(S,"H2",{class:!0});var N=b(t);r=I(N,"Loading video..."),N.forEach(v),a=D(S),m&&m.l(S),S.forEach(v),h.forEach(v),u=D(l),d&&d.l(l),this.h()},h(){_(t,"class","svelte-1my52b3"),_(s,"class","svelte-1my52b3"),_(e,"class","loadingVideo svelte-1my52b3"),ie(e,"roundCorner",n[4])},m(l,h){C(l,e,h),c(e,s),c(s,t),c(t,r),c(s,a),m&&m.m(s,null),C(l,u,h),d&&d.m(l,h),f=!0},p(l,h){h&8&&(o=l[3]&&l[3].includes("Permission denied")),o?m||(m=rt(),m.c(),m.m(s,null)):m&&(m.d(1),m=null),(!f||h&16)&&ie(e,"roundCorner",l[4]),d&&d.p&&(!f||h&64)&&it(d,i,l,l[6],f?ct(i,l[6],h,null):lt(l[6]),null)},i(l){f||(y(d,l),f=!0)},o(l){E(d,l),f=!1},d(l){l&&v(e),m&&m.d(),l&&v(u),d&&d.d(l)}}}function rt(n){let e;return{c(){e=$("The browser is unable to access the camera, try re-enabling the camera and reload")},l(s){e=I(s,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(s,t){C(s,e,t)},d(s){s&&v(e)}}}function Tt(n){let e,s,t,r;const a=[qt,St],o=[];function u(f,m){return f[2]?0:1}return e=u(n),s=o[e]=a[e](n),{c(){s.c(),t=et()},l(f){s.l(f),t=et()},m(f,m){o[e].m(f,m),C(f,t,m),r=!0},p(f,[m]){let i=e;e=u(f),e===i?o[e].p(f,m):(Ne(),E(o[i],1,1,()=>{o[i]=null}),He(),s=o[e],s?s.p(f,m):(s=o[e]=a[e](f),s.c()),y(s,1),s.m(t.parentNode,t))},i(f){r||(y(s),r=!0)},o(f){E(s),r=!1},d(f){o[e].d(f),f&&v(t)}}}function Bt(n,e,s){let{$$slots:t={},$$scope:r}=e,{stream:a}=e,{style:o=""}=e,{loading:u=!0}=e,{error:f=""}=e,{roundCorner:m=!1}=e,{videoSource:i=void 0}=e;function d(l){ee[l?"unshift":"push"](()=>{i=l,s(0,i),s(5,a),s(2,u)})}return n.$$set=l=>{"stream"in l&&s(5,a=l.stream),"style"in l&&s(1,o=l.style),"loading"in l&&s(2,u=l.loading),"error"in l&&s(3,f=l.error),"roundCorner"in l&&s(4,m=l.roundCorner),"videoSource"in l&&s(0,i=l.videoSource),"$$scope"in l&&s(6,r=l.$$scope)},n.$$.update=()=>{n.$$.dirty&37&&a&&!u&&i&&i.paused&&(s(0,i.srcObject=a,i),i.play())},[i,o,u,f,m,a,r,t,d]}class ft extends le{constructor(e){super(),ce(this,e,Bt,Tt,ue,{stream:5,style:1,loading:2,error:3,roundCorner:4,videoSource:0})}}function Pt(n){let e,s;return e=new Dt({}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Nt(n){let e,s,t;function r(o){n[11](o)}let a={roundCorner:!0,error:n[15],loading:n[13],stream:n[14]};return n[1]!==void 0&&(a.videoSource=n[1]),e=new ft({props:a}),ee.push(()=>Oe(e,"videoSource",r)),{c(){q(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,u){B(e,o,u),t=!0},p(o,u){const f={};u&32768&&(f.error=o[15]),u&8192&&(f.loading=o[13]),u&16384&&(f.stream=o[14]),!s&&u&2&&(s=!0,f.videoSource=o[1],Fe(()=>s=!1)),e.$set(f)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){P(e,o)}}}function Ht(n){let e;return{c(){e=$("Back home")},l(s){e=I(s,"Back home")},m(s,t){C(s,e,t)},d(s){s&&v(e)}}}function Ot(n){let e,s;return e=new pt({props:{slot:"headerButton",back:!0,to:"/",$$slots:{default:[Ht]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const a={};r&524288&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Ft(n){let e,s;return e=new ft({props:{loading:n[13],stream:n[14]}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const a={};r&8192&&(a.loading=t[13]),r&16384&&(a.stream=t[14]),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function ot(n){let e,s,t;function r(o){n[10](o)}let a={options:n[16],$$slots:{default:[Lt,({option:o,index:u})=>({17:o,18:u}),({option:o,index:u})=>(o?131072:0)|(u?262144:0)]},$$scope:{ctx:n}};return n[2]!==void 0&&(a.value=n[2]),e=new gt({props:a}),ee.push(()=>Oe(e,"value",r)),e.$on("change",n[8]),{c(){q(e.$$.fragment)},l(o){T(e.$$.fragment,o)},m(o,u){B(e,o,u),t=!0},p(o,u){const f={};u&65536&&(f.options=o[16]),u&917504&&(f.$$scope={dirty:u,ctx:o}),!s&&u&4&&(s=!0,f.value=o[2],Fe(()=>s=!1)),e.$set(f)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){E(e.$$.fragment,o),t=!1},d(o){P(e,o)}}}function Lt(n){let e=(n[17].label||"Camera "+(n[18]+1))+"",s;return{c(){s=$(e)},l(t){s=I(t,e)},m(t,r){C(t,s,r)},p(t,r){r&393216&&e!==(e=(t[17].label||"Camera "+(t[18]+1))+"")&&mt(s,e)},d(t){t&&v(s)}}}function Mt(n){var r;let e,s,t=!n[0]&&((r=n[16])==null?void 0:r.length)>1&&ot(n);return{c(){e=p("div"),t&&t.c(),this.h()},l(a){e=g(a,"DIV",{slot:!0});var o=b(e);t&&t.l(o),o.forEach(v),this.h()},h(){_(e,"slot","options")},m(a,o){C(a,e,o),t&&t.m(e,null),s=!0},p(a,o){var u;!a[0]&&((u=a[16])==null?void 0:u.length)>1?t?(t.p(a,o),o&65537&&y(t,1)):(t=ot(a),t.c(),y(t,1),t.m(e,null)):t&&(Ne(),E(t,1,1,()=>{t=null}),He())},i(a){s||(y(t),s=!0)},o(a){E(t),s=!1},d(a){a&&v(e),t&&t.d()}}}function nt(n){let e,s;return e=new ut({props:{secondary:!0,icon:ht,$$slots:{default:[Ut]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const a={};r&524288&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Ut(n){let e;return{c(){e=$("Image capture | Instructions")},l(s){e=I(s,"Image capture | Instructions")},m(s,t){C(s,e,t)},d(s){s&&v(e)}}}function At(n){let e;return{c(){e=$("Capture photo of map")},l(s){e=I(s,"Capture photo of map")},m(s,t){C(s,e,t)},d(s){s&&v(e)}}}function Gt(n){let e,s,t,r=!n[0]&&nt(n);return s=new ut({props:{loading:n[4],icon:_t,$$slots:{default:[At]},$$scope:{ctx:n}}}),s.$on("click",n[7]),{c(){r&&r.c(),e=k(),q(s.$$.fragment)},l(a){r&&r.l(a),e=D(a),T(s.$$.fragment,a)},m(a,o){r&&r.m(a,o),C(a,e,o),B(s,a,o),t=!0},p(a,o){a[0]?r&&(Ne(),E(r,1,1,()=>{r=null}),He()):r?(r.p(a,o),o&1&&y(r,1)):(r=nt(a),r.c(),y(r,1),r.m(e.parentNode,e));const u={};o&16&&(u.loading=a[4]),o&524288&&(u.$$scope={dirty:o,ctx:a}),s.$set(u)},i(a){t||(y(r),y(s.$$.fragment,a),t=!0)},o(a){E(r),E(s.$$.fragment,a),t=!1},d(a){r&&r.d(a),a&&v(e),P(s,a)}}}function jt(n){let e,s;return e=new bt({props:{fullscreen:!n[13],$$slots:{footer:[Gt],options:[Mt],background:[Ft],headerButton:[Ot],default:[Nt]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const a={};r&8192&&(a.fullscreen=!t[13]),r&647191&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function zt(n){let e,s,t,r,a,o,u;function f(i){n[9](i)}let m={title:"scan instructions",$$slots:{default:[Pt]},$$scope:{ctx:n}};return n[0]!==void 0&&(m.visible=n[0]),e=new wt({props:m}),ee.push(()=>Oe(e,"visible",f)),r=new Ct({props:{deviceId:n[5],$$slots:{default:[jt,({loading:i,stream:d,error:l,cameraOptions:h})=>({13:i,14:d,15:l,16:h}),({loading:i,stream:d,error:l,cameraOptions:h})=>(i?8192:0)|(d?16384:0)|(l?32768:0)|(h?65536:0)]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment),t=k(),q(r.$$.fragment),a=k(),o=p("canvas"),this.h()},l(i){T(e.$$.fragment,i),t=D(i),T(r.$$.fragment,i),a=D(i),o=g(i,"CANVAS",{id:!0,style:!0}),b(o).forEach(v),this.h()},h(){_(o,"id","captureCanvas"),tt(o,"display","none"),tt(o,"position","absolute")},m(i,d){B(e,i,d),C(i,t,d),B(r,i,d),C(i,a,d),C(i,o,d),n[12](o),u=!0},p(i,[d]){const l={};d&524288&&(l.$$scope={dirty:d,ctx:i}),!s&&d&1&&(s=!0,l.visible=i[0],Fe(()=>s=!1)),e.$set(l);const h={};d&32&&(h.deviceId=i[5]),d&647191&&(h.$$scope={dirty:d,ctx:i}),r.$set(h)},i(i){u||(y(e.$$.fragment,i),y(r.$$.fragment,i),u=!0)},o(i){E(e.$$.fragment,i),E(r.$$.fragment,i),u=!1},d(i){P(e,i),i&&v(t),P(r,i),i&&v(a),i&&v(o),n[12](null)}}}const es=!0;function Rt(n,e,s){let t=!1,r,a,o,u=!1,f;const m=()=>s(0,t=!t);async function i(){s(4,u=!0);const V=o.getContext("2d");s(3,o.height=r.videoHeight,o),s(3,o.width=r.videoWidth,o),V&&V.drawImage(r,0,0,o.width,o.height);const H=o.toDataURL("image/png");It.set(H),$t("/scan/maptransform")}function d(){s(5,f=a.deviceId)}function l(V){t=V,s(0,t)}function h(V){a=V,s(2,a)}function S(V){r=V,s(1,r)}function N(V){ee[V?"unshift":"push"](()=>{o=V,s(3,o)})}return[t,r,a,o,u,f,m,i,d,l,h,S,N]}class ts extends le{constructor(e){super(),ce(this,e,Rt,zt,ue,{})}}export{ts as default,es as prerender};
