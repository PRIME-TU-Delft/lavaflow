import{S as le,i as ce,s as ue,k as _,q as $,a as k,l as h,m as g,r as I,h as v,c as D,n as p,b as V,H as c,I as x,C as nt,D as at,E as it,F as lt,f as y,t as E,o as ft,Y as dt,e as et,g as Ne,d as He,N as ee,O as Oe,w as C,x as T,p as ie,y as B,P as Fe,z as P,u as vt}from"../../../../chunks/index-5adb68ea.js";import{N as mt,B as ct,m as pt,a as _t}from"../../../../chunks/NavigationButton-c1f93d2e.js";import{D as ht}from"../../../../chunks/Dropdown-af9110fc.js";import{P as gt}from"../../../../chunks/Page-9ad24f39.js";import{M as bt,r as wt}from"../../../../chunks/imageStore-f8432440.js";import{g as $t}from"../../../../chunks/navigation-5b342094.js";function It(n){let e,s,t,r,o,a,i,f,d,u,l,m,b,q,N,S,H,fe,de,O,A,ve,me,G,pe,_e,F,j,he,ge,z,be,we,R,$e,Ie,L,W,ke,De,Y,ye,Ee,M,J,Ve,Se,K,qe,Ce,U,Q,Te,Be,X,Pe;return{c(){e=_("div"),s=_("h2"),t=$("Good example of contour map"),r=k(),o=_("div"),a=k(),i=_("h2"),f=$("Instructions"),d=k(),u=_("div"),l=$("Drawing"),m=k(),b=_("div"),q=_("div"),N=$("Curves should have sufficient margin"),S=k(),H=_("div"),fe=$(`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),de=k(),O=_("div"),A=_("div"),ve=$("Drawing with dark pen"),me=k(),G=_("div"),pe=$(`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),_e=k(),F=_("div"),j=_("div"),he=$("Close your curves"),ge=k(),z=_("div"),be=$("To avoid false readings, close your curves, dont leave any open-ended lines"),we=k(),R=_("div"),$e=$("Scanning"),Ie=k(),L=_("div"),W=_("div"),ke=$("Four corners visible"),De=k(),Y=_("div"),ye=$("To scan the level curves, we need to have the four corners visible"),Ee=k(),M=_("div"),J=_("div"),Ve=$("Drawing should not be too far"),Se=k(),K=_("div"),qe=$(`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Ce=k(),U=_("div"),Q=_("div"),Te=$("Proper lighting"),Be=k(),X=_("div"),Pe=$(`Level curves are hard to distinguish from the background in a low light setting. Try to use
			natural daylight or a propper ceiling light for the best results. Be careful of sharp or dark
			shadows on the drawing, as they might get interpreted as part of your drawing.`),this.h()},l(Z){e=h(Z,"DIV",{class:!0});var w=g(e);s=h(w,"H2",{});var Le=g(s);t=I(Le,"Good example of contour map"),Le.forEach(v),r=D(w),o=h(w,"DIV",{class:!0}),g(o).forEach(v),a=D(w),i=h(w,"H2",{});var Me=g(i);f=I(Me,"Instructions"),Me.forEach(v),d=D(w),u=h(w,"DIV",{class:!0});var Ue=g(u);l=I(Ue,"Drawing"),Ue.forEach(v),m=D(w),b=h(w,"DIV",{class:!0});var te=g(b);q=h(te,"DIV",{class:!0});var Ae=g(q);N=I(Ae,"Curves should have sufficient margin"),Ae.forEach(v),S=D(te),H=h(te,"DIV",{class:!0});var Ge=g(H);fe=I(Ge,`The curves should have sufficient margin between them, overlapping or close lines are hard to
			interpret`),Ge.forEach(v),te.forEach(v),de=D(w),O=h(w,"DIV",{class:!0});var se=g(O);A=h(se,"DIV",{class:!0});var je=g(A);ve=I(je,"Drawing with dark pen"),je.forEach(v),me=D(se),G=h(se,"DIV",{class:!0});var ze=g(G);pe=I(ze,`To recognise your level curves, we prefer a dark and thick marker. Using a lighter pen will
			likely not work`),ze.forEach(v),se.forEach(v),_e=D(w),F=h(w,"DIV",{class:!0});var re=g(F);j=h(re,"DIV",{class:!0});var Re=g(j);he=I(Re,"Close your curves"),Re.forEach(v),ge=D(re),z=h(re,"DIV",{class:!0});var We=g(z);be=I(We,"To avoid false readings, close your curves, dont leave any open-ended lines"),We.forEach(v),re.forEach(v),we=D(w),R=h(w,"DIV",{class:!0});var Ye=g(R);$e=I(Ye,"Scanning"),Ye.forEach(v),Ie=D(w),L=h(w,"DIV",{class:!0});var oe=g(L);W=h(oe,"DIV",{class:!0});var Je=g(W);ke=I(Je,"Four corners visible"),Je.forEach(v),De=D(oe),Y=h(oe,"DIV",{class:!0});var Ke=g(Y);ye=I(Ke,"To scan the level curves, we need to have the four corners visible"),Ke.forEach(v),oe.forEach(v),Ee=D(w),M=h(w,"DIV",{class:!0});var ne=g(M);J=h(ne,"DIV",{class:!0});var Qe=g(J);Ve=I(Qe,"Drawing should not be too far"),Qe.forEach(v),Se=D(ne),K=h(ne,"DIV",{class:!0});var Xe=g(K);qe=I(Xe,`Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best
			result try to scan the paper as close to parallel as possible. This is easiest if you put your
			drawing on a table instead of holding it.`),Xe.forEach(v),ne.forEach(v),Ce=D(w),U=h(w,"DIV",{class:!0});var ae=g(U);Q=h(ae,"DIV",{class:!0});var Ze=g(Q);Te=I(Ze,"Proper lighting"),Ze.forEach(v),Be=D(ae),X=h(ae,"DIV",{class:!0});var xe=g(X);Pe=I(xe,`Level curves are hard to distinguish from the background in a low light setting. Try to use
			natural daylight or a propper ceiling light for the best results. Be careful of sharp or dark
			shadows on the drawing, as they might get interpreted as part of your drawing.`),xe.forEach(v),ae.forEach(v),w.forEach(v),this.h()},h(){p(o,"class","example svelte-1foqwan"),p(u,"class","section svelte-1foqwan"),p(q,"class","title svelte-1foqwan"),p(H,"class","description"),p(b,"class","instruction svelte-1foqwan"),p(A,"class","title svelte-1foqwan"),p(G,"class","description"),p(O,"class","instruction svelte-1foqwan"),p(j,"class","title svelte-1foqwan"),p(z,"class","description"),p(F,"class","instruction svelte-1foqwan"),p(R,"class","section svelte-1foqwan"),p(W,"class","title svelte-1foqwan"),p(Y,"class","description"),p(L,"class","instruction svelte-1foqwan"),p(J,"class","title svelte-1foqwan"),p(K,"class","description"),p(M,"class","instruction svelte-1foqwan"),p(Q,"class","title svelte-1foqwan"),p(X,"class","description"),p(U,"class","instruction svelte-1foqwan"),p(e,"class","instructions svelte-1foqwan")},m(Z,w){V(Z,e,w),c(e,s),c(s,t),c(e,r),c(e,o),c(e,a),c(e,i),c(i,f),c(e,d),c(e,u),c(u,l),c(e,m),c(e,b),c(b,q),c(q,N),c(b,S),c(b,H),c(H,fe),c(e,de),c(e,O),c(O,A),c(A,ve),c(O,me),c(O,G),c(G,pe),c(e,_e),c(e,F),c(F,j),c(j,he),c(F,ge),c(F,z),c(z,be),c(e,we),c(e,R),c(R,$e),c(e,Ie),c(e,L),c(L,W),c(W,ke),c(L,De),c(L,Y),c(Y,ye),c(e,Ee),c(e,M),c(M,J),c(J,Ve),c(M,Se),c(M,K),c(K,qe),c(e,Ce),c(e,U),c(U,Q),c(Q,Te),c(U,Be),c(U,X),c(X,Pe)},p:x,i:x,o:x,d(Z){Z&&v(e)}}}class kt extends le{constructor(e){super(),ce(this,e,null,It,ue,{})}}const Dt=n=>({loading:n&2,stream:n&1,error:n&4,cameraOptions:n&8}),tt=n=>({loading:n[1],stream:n[0],error:n[2],cameraOptions:n[3]});function yt(n){let e;const s=n[6].default,t=nt(s,n,n[5],tt);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,o){t&&t.m(r,o),e=!0},p(r,[o]){t&&t.p&&(!e||o&47)&&at(t,s,r,r[5],e?lt(s,r[5],o,Dt):it(r[5]),tt)},i(r){e||(y(t,r),e=!0)},o(r){E(t,r),e=!1},d(r){t&&t.d(r)}}}function Et(n,e,s){let{$$slots:t={},$$scope:r}=e,{deviceId:o=""}=e,a,i=!0,f,d=[];const u=async()=>{s(1,i=!0),a&&a.getTracks().forEach(m=>m.stop());const l=o?{deviceId:{exact:o}}:{facingMode:"environment"};try{s(0,a=await navigator.mediaDevices.getUserMedia({video:l})),s(1,i=!1),s(2,f="")}catch(m){s(2,f=""+m)}};return ft(async()=>{await u();const l=await navigator.mediaDevices.enumerateDevices();s(3,d=l.filter(m=>m.kind=="videoinput"))}),dt(()=>{!a||a.getTracks().forEach(l=>l.stop())}),n.$$set=l=>{"deviceId"in l&&s(4,o=l.deviceId),"$$scope"in l&&s(5,r=l.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&o&&u()},[a,i,f,d,o,r,t]}class Vt extends le{constructor(e){super(),ce(this,e,Et,yt,ue,{deviceId:4})}}function St(n){let e;return{c(){e=_("video"),this.h()},l(s){e=h(s,"VIDEO",{style:!0,preload:!0,type:!0,class:!0}),g(e).forEach(v),this.h()},h(){p(e,"style",n[1]),e.loop=!0,e.playsInline=!0,e.autoplay=!1,e.controls=!1,p(e,"preload","auto"),p(e,"type","video/mp4"),p(e,"class","svelte-13uo3u7")},m(s,t){V(s,e,t),n[7](e)},p(s,t){t&2&&p(e,"style",s[1])},i:x,o:x,d(s){s&&v(e),n[7](null)}}}function qt(n){let e,s,t,r,o,a=n[3]&&n[3].includes("Permission denied"),i,f,d=a&&st();const u=n[6].default,l=nt(u,n,n[5],null);return{c(){e=_("div"),s=_("div"),t=_("h2"),r=$("Loading video..."),o=k(),d&&d.c(),i=k(),l&&l.c(),this.h()},l(m){e=h(m,"DIV",{class:!0});var b=g(e);s=h(b,"DIV",{class:!0});var q=g(s);t=h(q,"H2",{class:!0});var N=g(t);r=I(N,"Loading video..."),N.forEach(v),o=D(q),d&&d.l(q),q.forEach(v),b.forEach(v),i=D(m),l&&l.l(m),this.h()},h(){p(t,"class","svelte-13uo3u7"),p(s,"class","svelte-13uo3u7"),p(e,"class","loadingVideo svelte-13uo3u7")},m(m,b){V(m,e,b),c(e,s),c(s,t),c(t,r),c(s,o),d&&d.m(s,null),V(m,i,b),l&&l.m(m,b),f=!0},p(m,b){b&8&&(a=m[3]&&m[3].includes("Permission denied")),a?d||(d=st(),d.c(),d.m(s,null)):d&&(d.d(1),d=null),l&&l.p&&(!f||b&32)&&at(l,u,m,m[5],f?lt(u,m[5],b,null):it(m[5]),null)},i(m){f||(y(l,m),f=!0)},o(m){E(l,m),f=!1},d(m){m&&v(e),d&&d.d(),m&&v(i),l&&l.d(m)}}}function st(n){let e;return{c(){e=$("The browser is unable to access the camera, try re-enabling the camera and reload")},l(s){e=I(s,"The browser is unable to access the camera, try re-enabling the camera and reload")},m(s,t){V(s,e,t)},d(s){s&&v(e)}}}function Ct(n){let e,s,t,r;const o=[qt,St],a=[];function i(f,d){return f[2]?0:1}return e=i(n),s=a[e]=o[e](n),{c(){s.c(),t=et()},l(f){s.l(f),t=et()},m(f,d){a[e].m(f,d),V(f,t,d),r=!0},p(f,[d]){let u=e;e=i(f),e===u?a[e].p(f,d):(Ne(),E(a[u],1,1,()=>{a[u]=null}),He(),s=a[e],s?s.p(f,d):(s=a[e]=o[e](f),s.c()),y(s,1),s.m(t.parentNode,t))},i(f){r||(y(s),r=!0)},o(f){E(s),r=!1},d(f){a[e].d(f),f&&v(t)}}}function Tt(n,e,s){let{$$slots:t={},$$scope:r}=e,{stream:o}=e,{style:a=""}=e,{loading:i=!0}=e,{error:f=""}=e,{videoSource:d=void 0}=e;function u(l){ee[l?"unshift":"push"](()=>{d=l,s(0,d),s(4,o),s(2,i)})}return n.$$set=l=>{"stream"in l&&s(4,o=l.stream),"style"in l&&s(1,a=l.style),"loading"in l&&s(2,i=l.loading),"error"in l&&s(3,f=l.error),"videoSource"in l&&s(0,d=l.videoSource),"$$scope"in l&&s(5,r=l.$$scope)},n.$$.update=()=>{n.$$.dirty&21&&o&&!i&&d&&d.paused&&(s(0,d.srcObject=o,d),d.play())},[d,a,i,f,o,r,t,u]}class ut extends le{constructor(e){super(),ce(this,e,Tt,Ct,ue,{stream:4,style:1,loading:2,error:3,videoSource:0})}}function Bt(n){let e,s;return e=new kt({}),{c(){C(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Pt(n){let e,s,t,r;function o(i){n[11](i)}let a={error:n[15],loading:n[13],stream:n[14]};return n[1]!==void 0&&(a.videoSource=n[1]),e=new ut({props:a}),ee.push(()=>Oe(e,"videoSource",o)),{c(){s=_("div"),C(e.$$.fragment),this.h()},l(i){s=h(i,"DIV",{style:!0});var f=g(s);T(e.$$.fragment,f),this.h()},h(){ie(s,"display","contents"),ie(s,"--corner-radius","1rem")},m(i,f){V(i,s,f),B(e,s,null),r=!0},p(i,f){const d={};f&32768&&(d.error=i[15]),f&8192&&(d.loading=i[13]),f&16384&&(d.stream=i[14]),!t&&f&2&&(t=!0,d.videoSource=i[1],Fe(()=>t=!1)),e.$set(d)},i(i){r||(y(e.$$.fragment,i),r=!0)},o(i){E(e.$$.fragment,i),r=!1},d(i){i&&e&&v(s),P(e,i)}}}function Nt(n){let e;return{c(){e=$("Back home")},l(s){e=I(s,"Back home")},m(s,t){V(s,e,t)},d(s){s&&v(e)}}}function Ht(n){let e,s;return e=new mt({props:{slot:"headerButton",back:!0,to:"/",$$slots:{default:[Nt]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Ot(n){let e,s;return e=new ut({props:{loading:n[13],stream:n[14]}}),{c(){C(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const o={};r&8192&&(o.loading=t[13]),r&16384&&(o.stream=t[14]),e.$set(o)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function rt(n){let e,s,t;function r(a){n[10](a)}let o={options:n[16],$$slots:{default:[Ft,({option:a,index:i})=>({17:a,18:i}),({option:a,index:i})=>(a?131072:0)|(i?262144:0)]},$$scope:{ctx:n}};return n[2]!==void 0&&(o.value=n[2]),e=new ht({props:o}),ee.push(()=>Oe(e,"value",r)),e.$on("change",n[8]),{c(){C(e.$$.fragment)},l(a){T(e.$$.fragment,a)},m(a,i){B(e,a,i),t=!0},p(a,i){const f={};i&65536&&(f.options=a[16]),i&917504&&(f.$$scope={dirty:i,ctx:a}),!s&&i&4&&(s=!0,f.value=a[2],Fe(()=>s=!1)),e.$set(f)},i(a){t||(y(e.$$.fragment,a),t=!0)},o(a){E(e.$$.fragment,a),t=!1},d(a){P(e,a)}}}function Ft(n){let e=(n[17].label||"Camera "+(n[18]+1))+"",s;return{c(){s=$(e)},l(t){s=I(t,e)},m(t,r){V(t,s,r)},p(t,r){r&393216&&e!==(e=(t[17].label||"Camera "+(t[18]+1))+"")&&vt(s,e)},d(t){t&&v(s)}}}function Lt(n){var r;let e,s,t=!n[0]&&((r=n[16])==null?void 0:r.length)>1&&rt(n);return{c(){e=_("div"),t&&t.c(),this.h()},l(o){e=h(o,"DIV",{slot:!0});var a=g(e);t&&t.l(a),a.forEach(v),this.h()},h(){p(e,"slot","options")},m(o,a){V(o,e,a),t&&t.m(e,null),s=!0},p(o,a){var i;!o[0]&&((i=o[16])==null?void 0:i.length)>1?t?(t.p(o,a),a&65537&&y(t,1)):(t=rt(o),t.c(),y(t,1),t.m(e,null)):t&&(Ne(),E(t,1,1,()=>{t=null}),He())},i(o){s||(y(t),s=!0)},o(o){E(t),s=!1},d(o){o&&v(e),t&&t.d()}}}function ot(n){let e,s;return e=new ct({props:{secondary:!0,icon:_t,$$slots:{default:[Mt]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){C(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function Mt(n){let e;return{c(){e=$("Image capture | Instructions")},l(s){e=I(s,"Image capture | Instructions")},m(s,t){V(s,e,t)},d(s){s&&v(e)}}}function Ut(n){let e;return{c(){e=$("Capture photo of map")},l(s){e=I(s,"Capture photo of map")},m(s,t){V(s,e,t)},d(s){s&&v(e)}}}function At(n){let e,s,t,r=!n[0]&&ot(n);return s=new ct({props:{loading:n[4],icon:pt,$$slots:{default:[Ut]},$$scope:{ctx:n}}}),s.$on("click",n[7]),{c(){r&&r.c(),e=k(),C(s.$$.fragment)},l(o){r&&r.l(o),e=D(o),T(s.$$.fragment,o)},m(o,a){r&&r.m(o,a),V(o,e,a),B(s,o,a),t=!0},p(o,a){o[0]?r&&(Ne(),E(r,1,1,()=>{r=null}),He()):r?(r.p(o,a),a&1&&y(r,1)):(r=ot(o),r.c(),y(r,1),r.m(e.parentNode,e));const i={};a&16&&(i.loading=o[4]),a&524288&&(i.$$scope={dirty:a,ctx:o}),s.$set(i)},i(o){t||(y(r),y(s.$$.fragment,o),t=!0)},o(o){E(r),E(s.$$.fragment,o),t=!1},d(o){r&&r.d(o),o&&v(e),P(s,o)}}}function Gt(n){let e,s;return e=new gt({props:{fullscreen:!n[13],$$slots:{footer:[At],options:[Lt],background:[Ot],headerButton:[Ht],default:[Pt]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,r){B(e,t,r),s=!0},p(t,r){const o={};r&8192&&(o.fullscreen=!t[13]),r&647191&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){s||(y(e.$$.fragment,t),s=!0)},o(t){E(e.$$.fragment,t),s=!1},d(t){P(e,t)}}}function jt(n){let e,s,t,r,o,a,i;function f(u){n[9](u)}let d={title:"scan instructions",$$slots:{default:[Bt]},$$scope:{ctx:n}};return n[0]!==void 0&&(d.visible=n[0]),e=new bt({props:d}),ee.push(()=>Oe(e,"visible",f)),r=new Vt({props:{deviceId:n[5],$$slots:{default:[Gt,({loading:u,stream:l,error:m,cameraOptions:b})=>({13:u,14:l,15:m,16:b}),({loading:u,stream:l,error:m,cameraOptions:b})=>(u?8192:0)|(l?16384:0)|(m?32768:0)|(b?65536:0)]},$$scope:{ctx:n}}}),{c(){C(e.$$.fragment),t=k(),C(r.$$.fragment),o=k(),a=_("canvas"),this.h()},l(u){T(e.$$.fragment,u),t=D(u),T(r.$$.fragment,u),o=D(u),a=h(u,"CANVAS",{id:!0,style:!0}),g(a).forEach(v),this.h()},h(){p(a,"id","captureCanvas"),ie(a,"display","none"),ie(a,"position","absolute")},m(u,l){B(e,u,l),V(u,t,l),B(r,u,l),V(u,o,l),V(u,a,l),n[12](a),i=!0},p(u,[l]){const m={};l&524288&&(m.$$scope={dirty:l,ctx:u}),!s&&l&1&&(s=!0,m.visible=u[0],Fe(()=>s=!1)),e.$set(m);const b={};l&32&&(b.deviceId=u[5]),l&647191&&(b.$$scope={dirty:l,ctx:u}),r.$set(b)},i(u){i||(y(e.$$.fragment,u),y(r.$$.fragment,u),i=!0)},o(u){E(e.$$.fragment,u),E(r.$$.fragment,u),i=!1},d(u){P(e,u),u&&v(t),P(r,u),u&&v(o),u&&v(a),n[12](null)}}}const Xt=!0;function zt(n,e,s){let t=!1,r,o,a,i=!1,f;const d=()=>s(0,t=!t);async function u(){s(4,i=!0);const S=a.getContext("2d");s(3,a.height=r.videoHeight,a),s(3,a.width=r.videoWidth,a),S&&S.drawImage(r,0,0,a.width,a.height);const H=a.toDataURL("image/png");wt.set(H),$t("/scan/maptransform")}function l(){s(5,f=o.deviceId)}function m(S){t=S,s(0,t)}function b(S){o=S,s(2,o)}function q(S){r=S,s(1,r)}function N(S){ee[S?"unshift":"push"](()=>{a=S,s(3,a)})}return[t,r,o,a,i,f,d,u,l,m,b,q,N]}class Zt extends le{constructor(e){super(),ce(this,e,zt,jt,ue,{})}}export{Zt as default,Xt as prerender};
