var K=Object.defineProperty;var Q=(r,t,e)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var w=(r,t,e)=>(Q(r,typeof t!="symbol"?t+"":t,e),e);import{w as V}from"./index.b231765a.mjs";import{d as Z}from"./difficultyStore.73951052.mjs";import{c as T,t as tt}from"./locationStore.c13cff09.mjs";import{J as P}from"./index.525666b8.mjs";class et{constructor(t,e,o,_,s,i,p,h,d,j,f){w(this,"tree");w(this,"rows");w(this,"columns");w(this,"width");w(this,"height");w(this,"curve_point_separation");w(this,"svc_distance");w(this,"catmull_clark_iterations");w(this,"lava_path_length");w(this,"lava_path_fork_val");w(this,"smoothing_operations");this.tree=t,this.rows=e,this.columns=o,this.width=_,this.height=s,this.curve_point_separation=i,this.svc_distance=p,this.catmull_clark_iterations=h,this.lava_path_length=d,this.lava_path_fork_val=j,this.smoothing_operations=f}apply_to_api(t){t.base(this.tree,this.curve_point_separation),t.set_basic_parameters(this.rows,this.columns,this.width,this.height),t.set_svc_parameters(this.svc_distance),t.set_catmull_clark_parameters(this.catmull_clark_iterations),t.set_lava_path_parameters(this.lava_path_length,this.lava_path_fork_val);for(const e of this.smoothing_operations)e.apply_to_api(t)}}let n;const H=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});H.decode();let x=null;function E(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(n.memory.buffer)),x}function y(r,t){return H.decode(E().subarray(r,r+t))}const u=new Array(128).fill(void 0);u.push(void 0,null,!0,!1);let S=u.length;function l(r){S===u.length&&u.push(u.length+1);const t=S;return S=u[t],u[t]=r,t}function a(r){return u[r]}function rt(r){r<132||(u[r]=S,S=r)}function g(r){const t=a(r);return rt(r),t}function k(r){return r==null}let A=null;function nt(){return(A===null||A.byteLength===0)&&(A=new Float64Array(n.memory.buffer)),A}let O=null;function c(){return(O===null||O.byteLength===0)&&(O=new Int32Array(n.memory.buffer)),O}let M=0;const W=new TextEncoder("utf-8"),ot=typeof W.encodeInto=="function"?function(r,t){return W.encodeInto(r,t)}:function(r,t){const e=W.encode(r);return t.set(e),{read:r.length,written:e.length}};function D(r,t,e){if(e===void 0){const p=W.encode(r),h=t(p.length);return E().subarray(h,h+p.length).set(p),M=p.length,h}let o=r.length,_=t(o);const s=E();let i=0;for(;i<o;i++){const p=r.charCodeAt(i);if(p>127)break;s[_+i]=p}if(i!==o){i!==0&&(r=r.slice(i)),_=e(_,o,o=i+r.length*3);const p=E().subarray(_+i,_+o),h=ot(r,p);i+=h.written}return M=i,_}let I=null;function _t(){return(I===null||I.byteLength===0)&&(I=new BigInt64Array(n.memory.buffer)),I}function J(r){const t=typeof r;if(t=="number"||t=="boolean"||r==null)return`${r}`;if(t=="string")return`"${r}"`;if(t=="symbol"){const _=r.description;return _==null?"Symbol":`Symbol(${_})`}if(t=="function"){const _=r.name;return typeof _=="string"&&_.length>0?`Function(${_})`:"Function"}if(Array.isArray(r)){const _=r.length;let s="[";_>0&&(s+=J(r[0]));for(let i=1;i<_;i++)s+=", "+J(r[i]);return s+="]",s}const e=/\[object ([^\]]+)\]/.exec(toString.call(r));let o;if(e.length>1)o=e[1];else return toString.call(r);if(o=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:o}let m=128;function q(r){if(m==1)throw new Error("out of js stack");return u[--m]=r,m}function v(r,t){if(!(r instanceof t))throw new Error(`expected instance of ${t.name}`);return r.ptr}function G(r,t){try{return r.apply(this,t)}catch(e){n.__wbindgen_exn_store(l(e))}}class z{static __wrap(t){const e=Object.create(z.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_altitudegradientpair_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_new(s,q(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return z.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),u[m++]=void 0}}debug(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_debug(o,this.ptr);var t=c()[o/4+0],e=c()[o/4+1];return y(t,e)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,e)}}to_js(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_to_js(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class U{static __wrap(t){const e=Object.create(U.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_lavapathturbineinput_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.lavapathturbineinput_new(s,q(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return U.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),u[m++]=void 0}}}class b{static __wrap(t){const e=Object.create(b.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionapi_free(t)}get rows(){return n.__wbg_get_modelconstructionapi_rows(this.ptr)>>>0}set rows(t){n.__wbg_set_modelconstructionapi_rows(this.ptr,t)}get columns(){return n.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set columns(t){n.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get width(){return n.__wbg_get_modelconstructionapi_width(this.ptr)}set width(t){n.__wbg_set_modelconstructionapi_width(this.ptr,t)}get height(){return n.__wbg_get_modelconstructionapi_height(this.ptr)}set height(t){n.__wbg_set_modelconstructionapi_height(this.ptr,t)}get altitude_step(){return n.__wbg_get_modelconstructionapi_altitude_step(this.ptr)}set altitude_step(t){n.__wbg_set_modelconstructionapi_altitude_step(this.ptr,t)}get curve_point_separation(){return n.__wbg_get_modelconstructionapi_curve_point_separation(this.ptr)}set curve_point_separation(t){n.__wbg_set_modelconstructionapi_curve_point_separation(this.ptr,t)}get svc_distance(){return n.__wbg_get_modelconstructionapi_svc_distance(this.ptr)}set svc_distance(t){n.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}get catmull_clark_iterations(){return n.__wbg_get_modelconstructionapi_catmull_clark_iterations(this.ptr)>>>0}set catmull_clark_iterations(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}get lava_path_length(){return n.__wbg_get_modelconstructionapi_lava_path_length(this.ptr)>>>0}set lava_path_length(t){n.__wbg_set_modelconstructionapi_lava_path_length(this.ptr,t)}get lava_path_fork_val(){return n.__wbg_get_modelconstructionapi_lava_path_fork_val(this.ptr)}set lava_path_fork_val(t){n.__wbg_set_modelconstructionapi_lava_path_fork_val(this.ptr,t)}constructor(){const t=n.modelconstructionapi_new();return b.__wrap(t)}set_basic_parameters(t,e,o,_){n.modelconstructionapi_set_basic_parameters(this.ptr,t,e,o,_)}set_svc_parameters(t){n.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}set_catmull_clark_parameters(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}set_lava_path_parameters(t,e){n.modelconstructionapi_set_lava_path_parameters(this.ptr,t,e)}base(t,e){v(t,B);var o=t.__destroy_into_raw();n.modelconstructionapi_base(this.ptr,o,e)}build(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_build(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return L.__wrap(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}get_altitude_and_gradient_for_point(t,e){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_get_altitude_and_gradient_for_point(i,this.ptr,t,e);var o=c()[i/4+0],_=c()[i/4+1],s=c()[i/4+2];if(s)throw g(_);return z.__wrap(o)}finally{n.__wbindgen_add_to_stack_pointer(16)}}compute_player_points(t){v(t,U);var e=t.__destroy_into_raw();return n.modelconstructionapi_compute_player_points(this.ptr,e)>>>0}apply_smooth_to_layer(t,e,o,_,s){n.modelconstructionapi_apply_smooth_to_layer(this.ptr,t,e,o,_,s)}set_altitude_for_layer(t,e,o){n.modelconstructionapi_set_altitude_for_layer(this.ptr,t,e,o)}apply_smooth_to_altitude_group(t,e,o,_,s){n.modelconstructionapi_apply_smooth_to_altitude_group(this.ptr,t,e,o,_,s)}increase_altitude_for_altitude_group(t,e,o){n.modelconstructionapi_increase_altitude_for_altitude_group(this.ptr,t,e,o)}apply_smooth_to_middle_layers(t,e,o,_){n.modelconstructionapi_apply_smooth_to_middle_layers(this.ptr,t,e,o,_)}apply_smooth_to_mountain_tops(t,e,o,_){n.modelconstructionapi_apply_smooth_to_mountain_tops(this.ptr,t,e,o,_)}increase_altitude_for_mountain_tops(t,e){n.modelconstructionapi_increase_altitude_for_mountain_tops(this.ptr,t,e)}apply_smooth_to_all(t,e,o,_){n.modelconstructionapi_apply_smooth_to_all(this.ptr,t,e,o,_)}correct_for_altitude_constraints_to_all_layers(){n.modelconstructionapi_correct_for_altitude_constraints_to_all_layers(this.ptr)}}class L{static __wrap(t){const e=Object.create(L.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionresult_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_new(s,q(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return L.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),u[m++]=void 0}}debug(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_debug(o,this.ptr);var t=c()[o/4+0],e=c()[o/4+1];return y(t,e)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,e)}}to_js(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_to_js(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class B{static __wrap(t){const e=Object.create(B.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_opencvtree_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_new(s,q(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return B.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),u[m++]=void 0}}debug(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_debug(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtolayer_free(t)}get layer(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_altitude_group(this.ptr)>>>0}set layer(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_altitude_group(this.ptr,t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_strength(this.ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.ptr,t)}constructor(t,e,o,_,s){const i=n.smoothingoperationapplysmoothtoaltitudegroup_new(t,e,o,_,s);return R.__wrap(i)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtolayer_apply_to_api(this.ptr,t.ptr)}}class ${static __wrap(t){const e=Object.create($.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomiddlelayers_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_coverage(this.ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_coverage(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr,t)}constructor(t,e,o,_){const s=n.smoothingoperationapplysmoothtoall_new(t,e,o,_);return $.__wrap(s)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtomiddlelayers_apply_to_api(this.ptr,t.ptr)}}class F{static __wrap(t){const e=Object.create(F.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomountaintops_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_coverage(this.ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_coverage(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr,t)}constructor(t,e,o,_){const s=n.smoothingoperationapplysmoothtoall_new(t,e,o,_);return F.__wrap(s)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtomountaintops_apply_to_api(this.ptr,t.ptr)}}class N{static __wrap(t){const e=Object.create(N.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationincreasealtitudeformountaintops_free(t)}get percentage_of_altitude_step(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set percentage_of_altitude_step(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr,t)}constructor(t,e){const o=n.smoothingoperationincreasealtitudeformountaintops_new(t,e);return N.__wrap(o)}apply_to_api(t){v(t,b),n.smoothingoperationincreasealtitudeformountaintops_apply_to_api(this.ptr,t.ptr)}}async function st(r,t){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,t)}catch(o){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const e=await r.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(r,t);return e instanceof WebAssembly.Instance?{instance:e,module:r}:e}}function it(){const r={};return r.wbg={},r.wbg.__wbindgen_string_new=function(t,e){const o=y(t,e);return l(o)},r.wbg.__wbindgen_object_drop_ref=function(t){g(t)},r.wbg.__wbindgen_object_clone_ref=function(t){const e=a(t);return l(e)},r.wbg.__wbindgen_is_undefined=function(t){return a(t)===void 0},r.wbg.__wbindgen_in=function(t,e){return a(t)in a(e)},r.wbg.__wbindgen_number_get=function(t,e){const o=a(e),_=typeof o=="number"?o:void 0;nt()[t/8+1]=k(_)?0:_,c()[t/4+0]=!k(_)},r.wbg.__wbindgen_is_bigint=function(t){return typeof a(t)=="bigint"},r.wbg.__wbindgen_bigint_from_i64=function(t){return l(t)},r.wbg.__wbindgen_jsval_eq=function(t,e){return a(t)===a(e)},r.wbg.__wbindgen_bigint_from_u64=function(t){const e=BigInt.asUintN(64,t);return l(e)},r.wbg.__wbindgen_string_get=function(t,e){const o=a(e),_=typeof o=="string"?o:void 0;var s=k(_)?0:D(_,n.__wbindgen_malloc,n.__wbindgen_realloc),i=M;c()[t/4+1]=i,c()[t/4+0]=s},r.wbg.__wbindgen_is_object=function(t){const e=a(t);return typeof e=="object"&&e!==null},r.wbg.__wbindgen_error_new=function(t,e){const o=new Error(y(t,e));return l(o)},r.wbg.__wbindgen_number_new=function(t){return l(t)},r.wbg.__wbindgen_jsval_loose_eq=function(t,e){return a(t)==a(e)},r.wbg.__wbindgen_boolean_get=function(t){const e=a(t);return typeof e=="boolean"?e?1:0:2},r.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(t,e){const o=a(t)[a(e)];return l(o)},r.wbg.__wbg_set_841ac57cff3d672b=function(t,e,o){a(t)[g(e)]=g(o)},r.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return l(t)},r.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const o=a(e).stack,_=D(o,n.__wbindgen_malloc,n.__wbindgen_realloc),s=M;c()[t/4+1]=s,c()[t/4+0]=_},r.wbg.__wbg_error_f851667af71bcfc6=function(t,e){try{console.error(y(t,e))}finally{n.__wbindgen_free(t,e)}},r.wbg.__wbg_log_7bb108d119bafbc1=function(t){console.log(a(t))},r.wbg.__wbg_get_27fe3dac1c4d0224=function(t,e){const o=a(t)[e>>>0];return l(o)},r.wbg.__wbg_length_e498fbc24f9c1d4f=function(t){return a(t).length},r.wbg.__wbg_new_b525de17f44a8943=function(){const t=new Array;return l(t)},r.wbg.__wbindgen_is_function=function(t){return typeof a(t)=="function"},r.wbg.__wbg_next_b7d530c04fd8b217=function(t){const e=a(t).next;return l(e)},r.wbg.__wbg_next_88560ec06a094dea=function(){return G(function(t){const e=a(t).next();return l(e)},arguments)},r.wbg.__wbg_done_1ebec03bbd919843=function(t){return a(t).done},r.wbg.__wbg_value_6ac8da5cc5b3efda=function(t){const e=a(t).value;return l(e)},r.wbg.__wbg_iterator_55f114446221aa5a=function(){return l(Symbol.iterator)},r.wbg.__wbg_get_baf4855f9a986186=function(){return G(function(t,e){const o=Reflect.get(a(t),a(e));return l(o)},arguments)},r.wbg.__wbg_call_95d1ea488d03e4e8=function(){return G(function(t,e){const o=a(t).call(a(e));return l(o)},arguments)},r.wbg.__wbg_new_f9876326328f45ed=function(){const t=new Object;return l(t)},r.wbg.__wbg_set_17224bc548dd1d7b=function(t,e,o){a(t)[e>>>0]=g(o)},r.wbg.__wbg_isArray_39d28997bf6b96b4=function(t){return Array.isArray(a(t))},r.wbg.__wbg_instanceof_ArrayBuffer_a69f02ee4c4f5065=function(t){let e;try{e=a(t)instanceof ArrayBuffer}catch{e=!1}return e},r.wbg.__wbg_isSafeInteger_8c4789029e885159=function(t){return Number.isSafeInteger(a(t))},r.wbg.__wbg_buffer_cf65c07de34b9a08=function(t){const e=a(t).buffer;return l(e)},r.wbg.__wbg_new_537b7341ce90bb31=function(t){const e=new Uint8Array(a(t));return l(e)},r.wbg.__wbg_set_17499e8aa4003ebd=function(t,e,o){a(t).set(a(e),o>>>0)},r.wbg.__wbg_length_27a2afe8ab42b09f=function(t){return a(t).length},r.wbg.__wbg_instanceof_Uint8Array_01cebe79ca606cca=function(t){let e;try{e=a(t)instanceof Uint8Array}catch{e=!1}return e},r.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const o=a(e),_=typeof o=="bigint"?o:void 0;_t()[t/8+1]=k(_)?BigInt(0):_,c()[t/4+0]=!k(_)},r.wbg.__wbindgen_debug_string=function(t,e){const o=J(a(e)),_=D(o,n.__wbindgen_malloc,n.__wbindgen_realloc),s=M;c()[t/4+1]=s,c()[t/4+0]=_},r.wbg.__wbindgen_throw=function(t,e){throw new Error(y(t,e))},r.wbg.__wbindgen_memory=function(){const t=n.memory;return l(t)},r}function at(r,t){return n=r.exports,X.__wbindgen_wasm_module=t,I=null,A=null,O=null,x=null,n}async function X(r){typeof r>"u"&&(r="assets/wasm_bg.wasm");const t=it();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));const{instance:e,module:o}=await st(await r,t);return at(e,o)}function ct(r){return r*(180/Math.PI)}function pt(r){function t(){return r.gradient.map(e=>Math.abs(e)).reduce((e,o)=>Math.max(e,o))}return(r.altitude+t())*1.07}function C(r){const t=new Blob([r],{type:"application/json"});return URL.createObjectURL(t)}function lt(){const{subscribe:r,set:t}=V();let e,o,_=!1,s;return{subscribe:r,set:t,setup:async(i,p)=>{_||(await X(),_=!0,console.log("initialized wasm")),o=i.size;const h=new B({pixels_per_curve:i.curves,parent_relations:i.hierarchy});e=new b,new et(h,45,45,i.size.width,i.size.height,5,Math.max(i.size.width,i.size.height)/(45*1.5),1,20,p,[new R(0,.3,5,1,!1),new $(.7,3,5,!1),new N(.25,!0),new F(1,8,1,!1)]).apply_to_api(e)},build:i=>{s=e.build().to_js(),s.gltf_url=C(s.gltf),s.lava_gltf_url=C(s.lava_gltf),s.craters=s.craters.map(p=>[p[0]*i.size.width/100,p[1]*i.size.height/100]),T.set(s.craters[0]),t(s)},getAltitudeAndGradient:(i,p=1,h=!0)=>{if(!e)return{x:0,y:0,altitude:0,gradient:[0,0,0]};let[d,j]=[i.x,i.y];h&&(d=Math.abs(i.x*100*p/o.width),j=Math.abs(i.y*100*p/o.height)),console.log({adjustedX:d,adjustedY:j});const f=e.get_altitude_and_gradient_for_point(d,j).to_js();return f.gradient.map(Y=>ct(Y)),f.altitude=pt(f),console.log({altitudeGradientPair:f}),f},computePlayerPoints:i=>{if(!e)return 0;const{width:p,height:h}=o;return e.compute_player_points(new U({lava_paths:s.lava_paths,turbines:P(tt).map(d=>[d.x/p*100,d.y/h*100]),max_lava_distance:P(Z).max_lava_distance,max_points_total:i}))}}}const bt=lt();export{bt as g};
