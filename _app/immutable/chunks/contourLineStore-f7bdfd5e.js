import{w as U}from"./index-bcbe7d6b.js";const x=4;class T{constructor(t,e,r,n=0,_=0){this.dragging=!1,this.enable_selection=!1,this.last_selected=!0,this.drag_translated=!1,this.too_close_to_crater=!1,this.too_close_to_other_target=!1,this.x=t,this.y=e,this.old_x=t,this.old_y=e,this.size=r,this.offsetX=n,this.offsetY=_}enableSelection(){this.enable_selection=!0}disableSelection(){this.enable_selection=!1}update(t,e,r,n,_,i){if(!!this.dragging&&!(t.mouseX<=0||t.mouseY<=0)&&!(t.mouseX>=t.width||t.mouseY>=t.height)){if(this.x=t.mouseX+this.offsetX,this.y=t.mouseY+this.offsetY,this.translateForDragging(),e!=null&&r!=null){this.too_close_to_crater=!1;for(let a=0;a<e.length;a++){const l=e[a][0]-this.x,h=e[a][1]-this.y;if(Math.sqrt(l*l+h*h)<=r){this.too_close_to_crater=!0;break}}}if(n!=null&&_!=null){this.too_close_to_other_target=!1;for(let a=0;a<n.length;a++){if(i!=null&&i==a)continue;const l=n[a].x-this.x,h=n[a].y-this.y;if(Math.sqrt(l*l+h*h)<=_){this.too_close_to_other_target=!0;break}}}}}setPosition(t,e){this.x=t,this.y=e}translateForDragging(){this.dragging&&!this.drag_translated&&(this.y-=50,this.drag_translated=!0)}translateBackAfterDragging(){this.drag_translated&&(this.drag_translated=!1)}displayWarningMessage(t,e){t.noStroke(),t.fill(51),t.textSize(15),t.textAlign(t.CENTER);const r=t.textWidth(e);t.rectMode(t.CORNER),t.rect(this.x-r/2-5,this.y-35,r+10,20),t.strokeWeight(1),t.fill(255),t.text(e,this.x,this.y-20)}drawRect(t,e){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(x),t.rect(this.x-e/2,this.y-e/2,e,e),this.translateBackAfterDragging()}drawCircle(t,e,r){this.translateForDragging(),r!=null&&(t.strokeWeight(.5),t.stroke(0),t.fill(200),t.rectMode(t.CORNER),t.rect(this.x,this.y-e/2,50,e),t.fill(0),t.textAlign(t.CENTER),t.textSize(15),t.text("#"+r,this.x+30,this.y+5)),t.fill(255),this.enable_selection&&this.last_selected&&t.fill(0,140,220),this.too_close_to_crater?(this.displayWarningMessage(t,"Too close to the crater"),t.fill(255,0,0)):this.too_close_to_other_target&&(this.displayWarningMessage(t,"Too close to another turbine"),t.fill(255,0,0)),t.stroke(0),t.strokeWeight(x),t.ellipse(this.x,this.y,e),this.translateBackAfterDragging()}drawTriangle(t,e){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(x),t.triangle(this.x-e/2,this.y+e/2,this.x+e/2,this.y+e/2,this.x,this.y-e/2),this.translateBackAfterDragging()}drawCross(t,e){this.translateForDragging(),t.stroke(0),t.strokeWeight(x*2),t.line(this.x-e/2,this.y-e/2,this.x+e/2,this.y+e/2),t.line(this.x+e/2,this.y-e/2,this.x-e/2,this.y+e/2),this.translateBackAfterDragging()}deselect(){this.last_selected=!1}pressed(t){const e=t.mouseX>this.x-this.size/2&&t.mouseX<this.x+this.size/2,r=t.mouseY>this.y-this.size/2&&t.mouseY<this.y+this.size/2;return e&&r?(this.dragging=!0,this.offsetX=this.x-t.mouseX,this.offsetY=this.y-t.mouseY,this.old_x=this.x,this.old_y=this.y,this.last_selected=!0,!0):!1}released(){this.dragging=!1,this.translateBackAfterDragging(),(this.too_close_to_crater||this.too_close_to_other_target)&&(this.x=this.old_x,this.y=this.old_y,this.too_close_to_crater=!1,this.too_close_to_other_target=!1)}}class J{constructor(t,e,r,n,_,i,a,l,h,u,m){this.tree=t,this.rows=e,this.columns=r,this.width=n,this.height=_,this.curve_point_separation=i,this.svc_distance=a,this.catmull_clark_iterations=l,this.lava_path_length=h,this.lava_path_fork_val=u,this.smoothing_operations=m}apply_to_api(t){t.base(this.tree,this.curve_point_separation),t.set_basic_parameters(this.rows,this.columns,this.width,this.height),t.set_svc_parameters(this.svc_distance),t.set_catmull_clark_parameters(this.catmull_clark_iterations),t.set_lava_path_parameters(this.lava_path_length,this.lava_path_fork_val);for(const e of this.smoothing_operations)e.apply_to_api(t)}}let o;const C=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});C.decode();let k;function j(){return k.byteLength===0&&(k=new Uint8Array(o.memory.buffer)),k}function f(s,t){return C.decode(j().subarray(s,s+t))}const p=new Array(32).fill(void 0);p.push(void 0,null,!0,!1);let y=p.length;function N(s){y===p.length&&p.push(p.length+1);const t=y;return y=p[t],p[t]=s,t}function O(s){return p[s]}function q(s){s<36||(p[s]=y,y=s)}function g(s){const t=O(s);return q(s),t}let D=0;const W=new TextEncoder("utf-8"),G=typeof W.encodeInto=="function"?function(s,t){return W.encodeInto(s,t)}:function(s,t){const e=W.encode(s);return t.set(e),{read:s.length,written:e.length}};function Y(s,t,e){if(e===void 0){const a=W.encode(s),l=t(a.length);return j().subarray(l,l+a.length).set(a),D=a.length,l}let r=s.length,n=t(r);const _=j();let i=0;for(;i<r;i++){const a=s.charCodeAt(i);if(a>127)break;_[n+i]=a}if(i!==r){i!==0&&(s=s.slice(i)),n=e(n,r,r=i+s.length*3);const a=j().subarray(n+i,n+r);i+=G(s,a).written}return D=i,n}let A;function c(){return A.byteLength===0&&(A=new Int32Array(o.memory.buffer)),A}let w=32;function X(s){if(w==1)throw new Error("out of js stack");return p[--w]=s,w}function v(s,t){if(!(s instanceof t))throw new Error(`expected instance of ${t.name}`);return s.ptr}class E{static __wrap(t){const e=Object.create(E.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_altitudegradientpair_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_new(_,X(t));var e=c()[_/4+0],r=c()[_/4+1],n=c()[_/4+2];if(n)throw g(r);return E.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),p[w++]=void 0}}debug(){try{const r=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_debug(r,this.ptr);var t=c()[r/4+0],e=c()[r/4+1];return f(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}to_js(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_to_js(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1],r=c()[n/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class d{static __wrap(t){const e=Object.create(d.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_modelconstructionapi_free(t)}get rows(){return o.__wbg_get_modelconstructionapi_rows(this.ptr)>>>0}set rows(t){o.__wbg_set_modelconstructionapi_rows(this.ptr,t)}get columns(){return o.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set columns(t){o.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get width(){return o.__wbg_get_modelconstructionapi_width(this.ptr)}set width(t){o.__wbg_set_modelconstructionapi_width(this.ptr,t)}get height(){return o.__wbg_get_modelconstructionapi_height(this.ptr)}set height(t){o.__wbg_set_modelconstructionapi_height(this.ptr,t)}get altitude_step(){return o.__wbg_get_modelconstructionapi_altitude_step(this.ptr)}set altitude_step(t){o.__wbg_set_modelconstructionapi_altitude_step(this.ptr,t)}get curve_point_separation(){return o.__wbg_get_modelconstructionapi_curve_point_separation(this.ptr)}set curve_point_separation(t){o.__wbg_set_modelconstructionapi_curve_point_separation(this.ptr,t)}get svc_distance(){return o.__wbg_get_modelconstructionapi_svc_distance(this.ptr)}set svc_distance(t){o.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}get catmull_clark_iterations(){return o.__wbg_get_modelconstructionapi_catmull_clark_iterations(this.ptr)>>>0}set catmull_clark_iterations(t){o.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}get lava_path_length(){return o.__wbg_get_modelconstructionapi_lava_path_length(this.ptr)>>>0}set lava_path_length(t){o.__wbg_set_modelconstructionapi_lava_path_length(this.ptr,t)}get lava_path_fork_val(){return o.__wbg_get_modelconstructionapi_lava_path_fork_val(this.ptr)}set lava_path_fork_val(t){o.__wbg_set_modelconstructionapi_lava_path_fork_val(this.ptr,t)}constructor(){const t=o.modelconstructionapi_new();return d.__wrap(t)}set_basic_parameters(t,e,r,n){o.modelconstructionapi_set_basic_parameters(this.ptr,t,e,r,n)}set_svc_parameters(t){o.modelconstructionapi_set_svc_parameters(this.ptr,t)}set_catmull_clark_parameters(t){o.modelconstructionapi_set_catmull_clark_parameters(this.ptr,t)}set_lava_path_parameters(t,e){o.modelconstructionapi_set_lava_path_parameters(this.ptr,t,e)}base(t,e){v(t,b);var r=t.ptr;t.ptr=0,o.modelconstructionapi_base(this.ptr,r,e)}build(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionapi_build(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1],r=c()[n/4+2];if(r)throw g(e);return R.__wrap(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}get_altitude_and_gradient_for_point(t,e){try{const i=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionapi_get_altitude_and_gradient_for_point(i,this.ptr,t,e);var r=c()[i/4+0],n=c()[i/4+1],_=c()[i/4+2];if(_)throw g(n);return E.__wrap(r)}finally{o.__wbindgen_add_to_stack_pointer(16)}}apply_smooth_to_layer(t,e,r,n,_){o.modelconstructionapi_apply_smooth_to_layer(this.ptr,t,e,r,n,_)}set_altitude_for_layer(t,e,r){o.modelconstructionapi_set_altitude_for_layer(this.ptr,t,e,r)}apply_smooth_to_altitude_group(t,e,r,n,_){o.modelconstructionapi_apply_smooth_to_altitude_group(this.ptr,t,e,r,n,_)}increase_altitude_for_altitude_group(t,e,r){o.modelconstructionapi_increase_altitude_for_altitude_group(this.ptr,t,e,r)}apply_smooth_to_middle_layers(t,e,r,n){o.modelconstructionapi_apply_smooth_to_middle_layers(this.ptr,t,e,r,n)}apply_smooth_to_mountain_tops(t,e,r,n){o.modelconstructionapi_apply_smooth_to_mountain_tops(this.ptr,t,e,r,n)}increase_altitude_for_mountain_tops(t,e){o.modelconstructionapi_increase_altitude_for_mountain_tops(this.ptr,t,e)}apply_smooth_to_all(t,e,r,n){o.modelconstructionapi_apply_smooth_to_all(this.ptr,t,e,r,n)}correct_for_altitude_constraints_to_all_layers(){o.modelconstructionapi_correct_for_altitude_constraints_to_all_layers(this.ptr)}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_modelconstructionresult_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_new(_,X(t));var e=c()[_/4+0],r=c()[_/4+1],n=c()[_/4+2];if(n)throw g(r);return R.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),p[w++]=void 0}}debug(){try{const r=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_debug(r,this.ptr);var t=c()[r/4+0],e=c()[r/4+1];return f(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}to_js(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_to_js(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1],r=c()[n/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class b{static __wrap(t){const e=Object.create(b.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_opencvtree_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.opencvtree_new(_,X(t));var e=c()[_/4+0],r=c()[_/4+1],n=c()[_/4+2];if(n)throw g(r);return b.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),p[w++]=void 0}}debug(){try{const n=o.__wbindgen_add_to_stack_pointer(-16);o.opencvtree_debug(n,this.ptr);var t=c()[n/4+0],e=c()[n/4+1],r=c()[n/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtolayer_free(t)}get layer(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_layer(this.ptr)>>>0}set layer(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_layer(this.ptr,t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_allow_svc_change(this.ptr,t)}constructor(t,e,r,n,_){const i=o.smoothingoperationapplysmoothtolayer_new(t,e,r,n,_);return I.__wrap(i)}apply_to_api(t){v(t,d),o.smoothingoperationapplysmoothtolayer_apply_to_api(this.ptr,t.ptr)}}class L{static __wrap(t){const e=Object.create(L.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtomiddlelayers_free(t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_allow_svc_change(this.ptr,t)}constructor(t,e,r,n){const _=o.smoothingoperationapplysmoothtomiddlelayers_new(t,e,r,n);return L.__wrap(_)}apply_to_api(t){v(t,d),o.smoothingoperationapplysmoothtomiddlelayers_apply_to_api(this.ptr,t.ptr)}}class B{static __wrap(t){const e=Object.create(B.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtomountaintops_free(t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_allow_svc_change(this.ptr,t)}constructor(t,e,r,n){const _=o.smoothingoperationapplysmoothtomountaintops_new(t,e,r,n);return B.__wrap(_)}apply_to_api(t){v(t,d),o.smoothingoperationapplysmoothtomountaintops_apply_to_api(this.ptr,t.ptr)}}class M{static __wrap(t){const e=Object.create(M.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationincreasealtitudeformountaintops_free(t)}get percentage_of_altitude_step(){return o.__wbg_get_smoothingoperationincreasealtitudeformountaintops_percentage_of_altitude_step(this.ptr)}set percentage_of_altitude_step(t){o.__wbg_set_smoothingoperationincreasealtitudeformountaintops_percentage_of_altitude_step(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr,t)}constructor(t,e){const r=o.smoothingoperationincreasealtitudeformountaintops_new(t,e);return M.__wrap(r)}apply_to_api(t){v(t,d),o.smoothingoperationincreasealtitudeformountaintops_apply_to_api(this.ptr,t.ptr)}}async function H(s,t){if(typeof Response=="function"&&s instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(s,t)}catch(r){if(s.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await s.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(s,t);return e instanceof WebAssembly.Instance?{instance:e,module:s}:e}}function P(){const s={};return s.wbg={},s.wbg.__wbindgen_string_new=function(t,e){const r=f(t,e);return N(r)},s.wbg.__wbindgen_object_drop_ref=function(t){g(t)},s.wbg.__wbindgen_json_parse=function(t,e){const r=JSON.parse(f(t,e));return N(r)},s.wbg.__wbindgen_json_serialize=function(t,e){const r=O(e),n=JSON.stringify(r===void 0?null:r),_=Y(n,o.__wbindgen_malloc,o.__wbindgen_realloc),i=D;c()[t/4+1]=i,c()[t/4+0]=_},s.wbg.__wbg_new_693216e109162396=function(){const t=new Error;return N(t)},s.wbg.__wbg_stack_0ddaca5d1abfb52f=function(t,e){const r=O(e).stack,n=Y(r,o.__wbindgen_malloc,o.__wbindgen_realloc),_=D;c()[t/4+1]=_,c()[t/4+0]=n},s.wbg.__wbg_error_09919627ac0992f5=function(t,e){try{console.error(f(t,e))}finally{o.__wbindgen_free(t,e)}},s.wbg.__wbg_log_7761a8b8a8c1864e=function(t){console.log(O(t))},s.wbg.__wbindgen_throw=function(t,e){throw new Error(f(t,e))},s}function K(s,t){return o=s.exports,S.__wbindgen_wasm_module=t,A=new Int32Array(o.memory.buffer),k=new Uint8Array(o.memory.buffer),o}async function S(s){typeof s=="undefined"&&(s="/_app/immutable/assets/wasm_bg.wasm");const t=P();(typeof s=="string"||typeof Request=="function"&&s instanceof Request||typeof URL=="function"&&s instanceof URL)&&(s=fetch(s));const{instance:e,module:r}=await H(await s,t);return K(e,r)}function $(s){return s.map(t=>{const e=new T(t.x,t.y,t.size,t.offsetX,t.offsetY);return e.enableSelection(),e.deselect(),e})}function F(s,t){function e(){if(typeof window!="undefined"){const a=localStorage==null?void 0:localStorage.getItem(s);try{if(a){const l=JSON.parse(a);return t(l)}}catch{return[]}}return[]}function r(a){typeof window!="undefined"&&localStorage.setItem(s,JSON.stringify(a))}const{subscribe:n,update:_,set:i}=U(e());return{subscribe:n,clear:()=>i([]),set:a=>{i(a),r(a)},add:a=>_(l=>{const h=[...l,a];return r(h),h}),remove:a=>_(l=>{const h=l.filter((u,m)=>m!==a);return r(h),h})}}const Q=F("targets",$),V=F("craters",s=>s);function Z(s){return s*(180/Math.PI)}function z(s){let t=s.altitude;return t+=.02*s.gradient.map(e=>Math.abs(e)).reduce((e,r)=>Math.max(e,r)),t+1}function tt(s){const t=new Blob([s],{type:"application/json"});return URL.createObjectURL(t)}function et(){const{subscribe:s,set:t}=U();let e,r,n=!1,_;return{subscribe:s,set:t,setup:async i=>{n||(await S(),n=!0),r=i.size;const a=new b({pixels_per_curve:i.curves,parent_relations:i.hierarchy});e=new d,new J(a,45,45,i.size.width,i.size.height,5,50,1,20,.2,[new I(0,.9,5,1,!1),new L(.7,3,5,!1),new M(2,!1),new B(1,8,1,!1)]).apply_to_api(e)},build:()=>{_=e.build().to_js(),_.gltf_url=tt(_.gltf),V.set(_.craters),t(_)},getAlitituteAndGradient:(i,a=!1)=>{if(!e)return{x:0,y:0,altitude:0,gradient:[0,0,0]};let[l,h]=[i.x,i.y];a||(l=i.x/r.width*100,h=i.y/r.height*100);const u=e.get_altitude_and_gradient_for_point(l,h).to_js();return u.gradient.map(m=>Z(m)),u.altitude=z(u),u}}}const st=et();function ot(){const{subscribe:s,set:t}=U();let e=!1;if(!e&&typeof window!="undefined"){const r=localStorage==null?void 0:localStorage.getItem("contourlines");r&&(t(JSON.parse(r)),e=!0)}return{subscribe:s,set:r=>{localStorage.setItem("contourlines",JSON.stringify(r)),t(r),Q.clear(),e=!0}}}const nt=ot();export{T as D,V as a,nt as c,st as g,Q as t};
