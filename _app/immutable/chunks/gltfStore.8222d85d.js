var K=Object.defineProperty;var Q=(e,t,_)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:_}):e[t]=_;var b=(e,t,_)=>(Q(e,typeof t!="symbol"?t+"":t,_),_);import{w as T}from"./index.204dd160.js";import{d as V}from"./difficultyStore.acc5b7e1.js";import{c as Z,t as tt}from"./locationStore.0587958d.js";import{J as P}from"./index.9fac37f0.js";class _t{constructor(t,_,r,o,s,i,g,u,h,j,f){b(this,"tree");b(this,"rows");b(this,"columns");b(this,"width");b(this,"height");b(this,"curve_point_separation");b(this,"svc_distance");b(this,"catmull_clark_iterations");b(this,"lava_path_length");b(this,"lava_path_fork_val");b(this,"smoothing_operations");this.tree=t,this.rows=_,this.columns=r,this.width=o,this.height=s,this.curve_point_separation=i,this.svc_distance=g,this.catmull_clark_iterations=u,this.lava_path_length=h,this.lava_path_fork_val=j,this.smoothing_operations=f}apply_to_api(t){t.base(this.tree,this.curve_point_separation),t.set_basic_parameters(this.rows,this.columns,this.width,this.height),t.set_svc_parameters(this.svc_distance),t.set_catmull_clark_parameters(this.catmull_clark_iterations),t.set_lava_path_parameters(this.lava_path_length,this.lava_path_fork_val);for(const _ of this.smoothing_operations)_.apply_to_api(t)}}let n;const H=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&H.decode();let x=null;function B(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(n.memory.buffer)),x}function y(e,t){return e=e>>>0,H.decode(B().subarray(e,e+t))}const w=new Array(128).fill(void 0);w.push(void 0,null,!0,!1);let S=w.length;function l(e){S===w.length&&w.push(w.length+1);const t=S;return S=w[t],w[t]=e,t}function a(e){return w[e]}function et(e){e<132||(w[e]=S,S=e)}function p(e){const t=a(e);return et(e),t}function k(e){return e==null}let A=null;function nt(){return(A===null||A.byteLength===0)&&(A=new Float64Array(n.memory.buffer)),A}let O=null;function c(){return(O===null||O.byteLength===0)&&(O=new Int32Array(n.memory.buffer)),O}let I=0;const W=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},rt=typeof W.encodeInto=="function"?function(e,t){return W.encodeInto(e,t)}:function(e,t){const _=W.encode(e);return t.set(_),{read:e.length,written:_.length}};function q(e,t,_){if(_===void 0){const g=W.encode(e),u=t(g.length,1)>>>0;return B().subarray(u,u+g.length).set(g),I=g.length,u}let r=e.length,o=t(r,1)>>>0;const s=B();let i=0;for(;i<r;i++){const g=e.charCodeAt(i);if(g>127)break;s[o+i]=g}if(i!==r){i!==0&&(e=e.slice(i)),o=_(o,r,r=i+e.length*3,1)>>>0;const g=B().subarray(o+i,o+r),u=rt(e,g);i+=u.written}return I=i,o}let E=null;function ot(){return(E===null||E.byteLength===0)&&(E=new BigInt64Array(n.memory.buffer)),E}function J(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(t=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let s="[";o>0&&(s+=J(e[0]));for(let i=1;i<o;i++)s+=", "+J(e[i]);return s+="]",s}const _=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(_.length>1)r=_[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}let m=128;function N(e){if(m==1)throw new Error("out of js stack");return w[--m]=e,m}function v(e,t){if(!(e instanceof t))throw new Error(`expected instance of ${t.name}`);return e.ptr}function G(e,t){try{return e.apply(this,t)}catch(_){n.__wbindgen_exn_store(l(_))}}class z{static __wrap(t){t=t>>>0;const _=Object.create(z.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_altitudegradientpair_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_new(s,N(t));var _=c()[s/4+0],r=c()[s/4+1],o=c()[s/4+2];if(o)throw p(r);return z.__wrap(_)}finally{n.__wbindgen_add_to_stack_pointer(16),w[m++]=void 0}}debug(){let t,_;try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_debug(s,this.__wbg_ptr);var r=c()[s/4+0],o=c()[s/4+1];return t=r,_=o,y(r,o)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,_,1)}}to_js(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_to_js(o,this.__wbg_ptr);var t=c()[o/4+0],_=c()[o/4+1],r=c()[o/4+2];if(r)throw p(_);return p(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class M{static __wrap(t){t=t>>>0;const _=Object.create(M.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_lavapathturbineinput_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.lavapathturbineinput_new(s,N(t));var _=c()[s/4+0],r=c()[s/4+1],o=c()[s/4+2];if(o)throw p(r);return M.__wrap(_)}finally{n.__wbindgen_add_to_stack_pointer(16),w[m++]=void 0}}}class d{static __wrap(t){t=t>>>0;const _=Object.create(d.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionapi_free(t)}get rows(){return n.__wbg_get_modelconstructionapi_rows(this.__wbg_ptr)>>>0}set rows(t){n.__wbg_set_modelconstructionapi_rows(this.__wbg_ptr,t)}get columns(){return n.__wbg_get_modelconstructionapi_columns(this.__wbg_ptr)>>>0}set columns(t){n.__wbg_set_modelconstructionapi_columns(this.__wbg_ptr,t)}get width(){return n.__wbg_get_modelconstructionapi_width(this.__wbg_ptr)}set width(t){n.__wbg_set_modelconstructionapi_width(this.__wbg_ptr,t)}get height(){return n.__wbg_get_modelconstructionapi_height(this.__wbg_ptr)}set height(t){n.__wbg_set_modelconstructionapi_height(this.__wbg_ptr,t)}get altitude_step(){return n.__wbg_get_modelconstructionapi_altitude_step(this.__wbg_ptr)}set altitude_step(t){n.__wbg_set_modelconstructionapi_altitude_step(this.__wbg_ptr,t)}get curve_point_separation(){return n.__wbg_get_modelconstructionapi_curve_point_separation(this.__wbg_ptr)}set curve_point_separation(t){n.__wbg_set_modelconstructionapi_curve_point_separation(this.__wbg_ptr,t)}get svc_distance(){return n.__wbg_get_modelconstructionapi_svc_distance(this.__wbg_ptr)}set svc_distance(t){n.__wbg_set_modelconstructionapi_svc_distance(this.__wbg_ptr,t)}get catmull_clark_iterations(){return n.__wbg_get_modelconstructionapi_catmull_clark_iterations(this.__wbg_ptr)>>>0}set catmull_clark_iterations(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.__wbg_ptr,t)}get lava_path_length(){return n.__wbg_get_modelconstructionapi_lava_path_length(this.__wbg_ptr)>>>0}set lava_path_length(t){n.__wbg_set_modelconstructionapi_lava_path_length(this.__wbg_ptr,t)}get lava_path_fork_val(){return n.__wbg_get_modelconstructionapi_lava_path_fork_val(this.__wbg_ptr)}set lava_path_fork_val(t){n.__wbg_set_modelconstructionapi_lava_path_fork_val(this.__wbg_ptr,t)}constructor(){const t=n.modelconstructionapi_new();return d.__wrap(t)}set_basic_parameters(t,_,r,o){n.modelconstructionapi_set_basic_parameters(this.__wbg_ptr,t,_,r,o)}set_svc_parameters(t){n.__wbg_set_modelconstructionapi_svc_distance(this.__wbg_ptr,t)}set_catmull_clark_parameters(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.__wbg_ptr,t)}set_lava_path_parameters(t,_){n.modelconstructionapi_set_lava_path_parameters(this.__wbg_ptr,t,_)}base(t,_){v(t,U);var r=t.__destroy_into_raw();n.modelconstructionapi_base(this.__wbg_ptr,r,_)}build(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_build(o,this.__wbg_ptr);var t=c()[o/4+0],_=c()[o/4+1],r=c()[o/4+2];if(r)throw p(_);return L.__wrap(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}get_altitude_and_gradient_for_point(t,_){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_get_altitude_and_gradient_for_point(i,this.__wbg_ptr,t,_);var r=c()[i/4+0],o=c()[i/4+1],s=c()[i/4+2];if(s)throw p(o);return z.__wrap(r)}finally{n.__wbindgen_add_to_stack_pointer(16)}}compute_player_points(t){v(t,M);var _=t.__destroy_into_raw();return n.modelconstructionapi_compute_player_points(this.__wbg_ptr,_)>>>0}apply_smooth_to_layer(t,_,r,o,s){n.modelconstructionapi_apply_smooth_to_layer(this.__wbg_ptr,t,_,r,o,s)}set_altitude_for_layer(t,_,r){n.modelconstructionapi_set_altitude_for_layer(this.__wbg_ptr,t,_,r)}apply_smooth_to_altitude_group(t,_,r,o,s){n.modelconstructionapi_apply_smooth_to_altitude_group(this.__wbg_ptr,t,_,r,o,s)}increase_altitude_for_altitude_group(t,_,r){n.modelconstructionapi_increase_altitude_for_altitude_group(this.__wbg_ptr,t,_,r)}apply_smooth_to_middle_layers(t,_,r,o){n.modelconstructionapi_apply_smooth_to_middle_layers(this.__wbg_ptr,t,_,r,o)}apply_smooth_to_mountain_tops(t,_,r,o){n.modelconstructionapi_apply_smooth_to_mountain_tops(this.__wbg_ptr,t,_,r,o)}increase_altitude_for_mountain_tops(t,_){n.modelconstructionapi_increase_altitude_for_mountain_tops(this.__wbg_ptr,t,_)}apply_smooth_to_all(t,_,r,o){n.modelconstructionapi_apply_smooth_to_all(this.__wbg_ptr,t,_,r,o)}correct_for_altitude_constraints_to_all_layers(){n.modelconstructionapi_correct_for_altitude_constraints_to_all_layers(this.__wbg_ptr)}}class L{static __wrap(t){t=t>>>0;const _=Object.create(L.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionresult_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_new(s,N(t));var _=c()[s/4+0],r=c()[s/4+1],o=c()[s/4+2];if(o)throw p(r);return L.__wrap(_)}finally{n.__wbindgen_add_to_stack_pointer(16),w[m++]=void 0}}debug(){let t,_;try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_debug(s,this.__wbg_ptr);var r=c()[s/4+0],o=c()[s/4+1];return t=r,_=o,y(r,o)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,_,1)}}to_js(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_to_js(o,this.__wbg_ptr);var t=c()[o/4+0],_=c()[o/4+1],r=c()[o/4+2];if(r)throw p(_);return p(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class U{static __wrap(t){t=t>>>0;const _=Object.create(U.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_opencvtree_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_new(s,N(t));var _=c()[s/4+0],r=c()[s/4+1],o=c()[s/4+2];if(o)throw p(r);return U.__wrap(_)}finally{n.__wbindgen_add_to_stack_pointer(16),w[m++]=void 0}}debug(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_debug(o,this.__wbg_ptr);var t=c()[o/4+0],_=c()[o/4+1],r=c()[o/4+2];if(r)throw p(_);return p(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class R{static __wrap(t){t=t>>>0;const _=Object.create(R.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtolayer_free(t)}get layer(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_altitude_group(this.__wbg_ptr)>>>0}set layer(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_altitude_group(this.__wbg_ptr,t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_strength(this.__wbg_ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_strength(this.__wbg_ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.__wbg_ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.__wbg_ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.__wbg_ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.__wbg_ptr,t)}constructor(t,_,r,o,s){const i=n.smoothingoperationapplysmoothtoaltitudegroup_new(t,_,r,o,s);return R.__wrap(i)}apply_to_api(t){v(t,d),n.smoothingoperationapplysmoothtolayer_apply_to_api(this.__wbg_ptr,t.__wbg_ptr)}}class ${static __wrap(t){t=t>>>0;const _=Object.create($.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomiddlelayers_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_coverage(this.__wbg_ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_coverage(this.__wbg_ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.__wbg_ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.__wbg_ptr,t)}constructor(t,_,r,o){const s=n.smoothingoperationapplysmoothtoall_new(t,_,r,o);return $.__wrap(s)}apply_to_api(t){v(t,d),n.smoothingoperationapplysmoothtomiddlelayers_apply_to_api(this.__wbg_ptr,t.__wbg_ptr)}}class F{static __wrap(t){t=t>>>0;const _=Object.create(F.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomountaintops_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_coverage(this.__wbg_ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_coverage(this.__wbg_ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.__wbg_ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.__wbg_ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.__wbg_ptr,t)}constructor(t,_,r,o){const s=n.smoothingoperationapplysmoothtoall_new(t,_,r,o);return F.__wrap(s)}apply_to_api(t){v(t,d),n.smoothingoperationapplysmoothtomountaintops_apply_to_api(this.__wbg_ptr,t.__wbg_ptr)}}class D{static __wrap(t){t=t>>>0;const _=Object.create(D.prototype);return _.__wbg_ptr=t,_}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationincreasealtitudeformountaintops_free(t)}get percentage_of_altitude_step(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr)}set percentage_of_altitude_step(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.__wbg_ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.__wbg_ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.__wbg_ptr,t)}constructor(t,_){const r=n.smoothingoperationincreasealtitudeformountaintops_new(t,_);return D.__wrap(r)}apply_to_api(t){v(t,d),n.smoothingoperationincreasealtitudeformountaintops_apply_to_api(this.__wbg_ptr,t.__wbg_ptr)}}async function st(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const _=await e.arrayBuffer();return await WebAssembly.instantiate(_,t)}else{const _=await WebAssembly.instantiate(e,t);return _ instanceof WebAssembly.Instance?{instance:_,module:e}:_}}function it(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,_){const r=y(t,_);return l(r)},e.wbg.__wbindgen_object_drop_ref=function(t){p(t)},e.wbg.__wbindgen_object_clone_ref=function(t){const _=a(t);return l(_)},e.wbg.__wbindgen_error_new=function(t,_){const r=new Error(y(t,_));return l(r)},e.wbg.__wbindgen_is_undefined=function(t){return a(t)===void 0},e.wbg.__wbindgen_in=function(t,_){return a(t)in a(_)},e.wbg.__wbindgen_number_get=function(t,_){const r=a(_),o=typeof r=="number"?r:void 0;nt()[t/8+1]=k(o)?0:o,c()[t/4+0]=!k(o)},e.wbg.__wbindgen_is_bigint=function(t){return typeof a(t)=="bigint"},e.wbg.__wbindgen_bigint_from_i64=function(t){return l(t)},e.wbg.__wbindgen_jsval_eq=function(t,_){return a(t)===a(_)},e.wbg.__wbindgen_bigint_from_u64=function(t){const _=BigInt.asUintN(64,t);return l(_)},e.wbg.__wbindgen_string_get=function(t,_){const r=a(_),o=typeof r=="string"?r:void 0;var s=k(o)?0:q(o,n.__wbindgen_malloc,n.__wbindgen_realloc),i=I;c()[t/4+1]=i,c()[t/4+0]=s},e.wbg.__wbindgen_is_object=function(t){const _=a(t);return typeof _=="object"&&_!==null},e.wbg.__wbindgen_jsval_loose_eq=function(t,_){return a(t)==a(_)},e.wbg.__wbindgen_boolean_get=function(t){const _=a(t);return typeof _=="boolean"?_?1:0:2},e.wbg.__wbindgen_number_new=function(t){return l(t)},e.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(t,_){const r=a(t)[a(_)];return l(r)},e.wbg.__wbg_set_841ac57cff3d672b=function(t,_,r){a(t)[p(_)]=p(r)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return l(t)},e.wbg.__wbg_stack_658279fe44541cf6=function(t,_){const r=a(_).stack,o=q(r,n.__wbindgen_malloc,n.__wbindgen_realloc),s=I;c()[t/4+1]=s,c()[t/4+0]=o},e.wbg.__wbg_error_f851667af71bcfc6=function(t,_){let r,o;try{r=t,o=_,console.error(y(t,_))}finally{n.__wbindgen_free(r,o,1)}},e.wbg.__wbg_log_1d3ae0273d8f4f8a=function(t){console.log(a(t))},e.wbg.__wbg_get_44be0491f933a435=function(t,_){const r=a(t)[_>>>0];return l(r)},e.wbg.__wbg_length_fff51ee6522a1a18=function(t){return a(t).length},e.wbg.__wbg_new_898a68150f225f2e=function(){const t=new Array;return l(t)},e.wbg.__wbindgen_is_function=function(t){return typeof a(t)=="function"},e.wbg.__wbg_next_526fc47e980da008=function(t){const _=a(t).next;return l(_)},e.wbg.__wbg_next_ddb3312ca1c4e32a=function(){return G(function(t){const _=a(t).next();return l(_)},arguments)},e.wbg.__wbg_done_5c1f01fb660d73b5=function(t){return a(t).done},e.wbg.__wbg_value_1695675138684bd5=function(t){const _=a(t).value;return l(_)},e.wbg.__wbg_iterator_97f0c81209c6c35a=function(){return l(Symbol.iterator)},e.wbg.__wbg_get_97b561fb56f034b5=function(){return G(function(t,_){const r=Reflect.get(a(t),a(_));return l(r)},arguments)},e.wbg.__wbg_call_cb65541d95d71282=function(){return G(function(t,_){const r=a(t).call(a(_));return l(r)},arguments)},e.wbg.__wbg_new_b51585de1b234aff=function(){const t=new Object;return l(t)},e.wbg.__wbg_set_502d29070ea18557=function(t,_,r){a(t)[_>>>0]=p(r)},e.wbg.__wbg_isArray_4c24b343cb13cfb1=function(t){return Array.isArray(a(t))},e.wbg.__wbg_instanceof_ArrayBuffer_39ac22089b74fddb=function(t){let _;try{_=a(t)instanceof ArrayBuffer}catch{_=!1}return _},e.wbg.__wbg_isSafeInteger_bb8e18dd21c97288=function(t){return Number.isSafeInteger(a(t))},e.wbg.__wbg_buffer_085ec1f694018c4f=function(t){const _=a(t).buffer;return l(_)},e.wbg.__wbg_new_8125e318e6245eed=function(t){const _=new Uint8Array(a(t));return l(_)},e.wbg.__wbg_set_5cf90238115182c3=function(t,_,r){a(t).set(a(_),r>>>0)},e.wbg.__wbg_length_72e2208bbc0efc61=function(t){return a(t).length},e.wbg.__wbg_instanceof_Uint8Array_d8d9cb2b8e8ac1d4=function(t){let _;try{_=a(t)instanceof Uint8Array}catch{_=!1}return _},e.wbg.__wbindgen_bigint_get_as_i64=function(t,_){const r=a(_),o=typeof r=="bigint"?r:void 0;ot()[t/8+1]=k(o)?BigInt(0):o,c()[t/4+0]=!k(o)},e.wbg.__wbindgen_debug_string=function(t,_){const r=J(a(_)),o=q(r,n.__wbindgen_malloc,n.__wbindgen_realloc),s=I;c()[t/4+1]=s,c()[t/4+0]=o},e.wbg.__wbindgen_throw=function(t,_){throw new Error(y(t,_))},e.wbg.__wbindgen_memory=function(){const t=n.memory;return l(t)},e}function at(e,t){return n=e.exports,X.__wbindgen_wasm_module=t,E=null,A=null,O=null,x=null,n}async function X(e){if(n!==void 0)return n;typeof e>"u"&&(e="assets/wasm_bg.wasm");const t=it();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:_,module:r}=await st(await e,t);return at(_,r)}function ct(e){return e*(180/Math.PI)}function gt(e){function t(){return e.gradient.map(_=>Math.abs(_)).reduce((_,r)=>Math.max(_,r))}return(e.altitude+t())*1.07}function C(e){const t=new Blob([e],{type:"application/json"});return URL.createObjectURL(t)}function lt(){const{subscribe:e,set:t}=T();let _,r,o=!1,s;return{subscribe:e,set:t,setup:async(i,g)=>{o||(await X(),o=!0,console.log("initialized wasm")),r=i.size;const u=new U({pixels_per_curve:i.curves,parent_relations:i.hierarchy});_=new d,new _t(u,45,45,i.size.width,i.size.height,5,Math.max(i.size.width,i.size.height)/(45*1.5),1,20,g,[new R(0,.3,5,1,!1),new $(.7,3,5,!1),new D(.25,!0),new F(1,8,1,!1)]).apply_to_api(_)},build:i=>{s=_.build().to_js(),s.gltf_url=C(s.gltf),s.lava_gltf_url=C(s.lava_gltf),s.craters=s.craters.map(g=>[g[0]*i.size.width/100,g[1]*i.size.height/100]),Z.set(s.craters[0]),t(s)},getAltitudeAndGradient:(i,g=1,u=!0)=>{if(!_)return{x:0,y:0,altitude:0,gradient:[0,0,0]};let[h,j]=[i.x,i.y];u&&(h=Math.abs(i.x*100*g/r.width),j=Math.abs(i.y*100*g/r.height)),console.log({adjustedX:h,adjustedY:j});const f=_.get_altitude_and_gradient_for_point(h,j).to_js();return f.gradient.map(Y=>ct(Y)),f.altitude=gt(f),console.log({altitudeGradientPair:f}),f},computePlayerPoints:i=>{if(!_)return 0;const{width:g,height:u}=r;return _.compute_player_points(new M({lava_paths:s.lava_paths,turbines:P(tt).map(h=>[h.x/g*100,h.y/u*100]),max_lava_distance:P(V).max_lava_distance,max_points_total:i}))}}}const dt=lt();export{dt as g};
