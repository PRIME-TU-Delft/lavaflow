var Y=Object.defineProperty;var K=(r,t,e)=>t in r?Y(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var w=(r,t,e)=>(K(r,typeof t!="symbol"?t+"":t,e),e);import{a1 as C,B as Q}from"./index-5adb68ea.js";import{c as V,t as Z}from"./contourLineStore-ac16300d.js";import{d as T}from"./difficultyStore-7cc4eead.js";class tt{constructor(t,e,o,_,s,i,l,u,d,m,q){w(this,"tree");w(this,"rows");w(this,"columns");w(this,"width");w(this,"height");w(this,"curve_point_separation");w(this,"svc_distance");w(this,"catmull_clark_iterations");w(this,"lava_path_length");w(this,"lava_path_fork_val");w(this,"smoothing_operations");this.tree=t,this.rows=e,this.columns=o,this.width=_,this.height=s,this.curve_point_separation=i,this.svc_distance=l,this.catmull_clark_iterations=u,this.lava_path_length=d,this.lava_path_fork_val=m,this.smoothing_operations=q}apply_to_api(t){t.base(this.tree,this.curve_point_separation),t.set_basic_parameters(this.rows,this.columns,this.width,this.height),t.set_svc_parameters(this.svc_distance),t.set_catmull_clark_parameters(this.catmull_clark_iterations),t.set_lava_path_parameters(this.lava_path_length,this.lava_path_fork_val);for(const e of this.smoothing_operations)e.apply_to_api(t)}}let n;const J=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});J.decode();let O=new Uint8Array;function S(){return O.byteLength===0&&(O=new Uint8Array(n.memory.buffer)),O}function y(r,t){return J.decode(S().subarray(r,r+t))}const h=new Array(32).fill(void 0);h.push(void 0,null,!0,!1);let k=h.length;function p(r){k===h.length&&h.push(h.length+1);const t=k;return k=h[t],h[t]=r,t}function a(r){return h[r]}function et(r){r<36||(h[r]=k,k=r)}function g(r){const t=a(r);return et(r),t}function j(r){return r==null}let U=new Float64Array;function rt(){return U.byteLength===0&&(U=new Float64Array(n.memory.buffer)),U}let B=new Int32Array;function c(){return B.byteLength===0&&(B=new Int32Array(n.memory.buffer)),B}let A=0;const E=new TextEncoder("utf-8"),nt=typeof E.encodeInto=="function"?function(r,t){return E.encodeInto(r,t)}:function(r,t){const e=E.encode(r);return t.set(e),{read:r.length,written:e.length}};function D(r,t,e){if(e===void 0){const l=E.encode(r),u=t(l.length);return S().subarray(u,u+l.length).set(l),A=l.length,u}let o=r.length,_=t(o);const s=S();let i=0;for(;i<o;i++){const l=r.charCodeAt(i);if(l>127)break;s[_+i]=l}if(i!==o){i!==0&&(r=r.slice(i)),_=e(_,o,o=i+r.length*3);const l=S().subarray(_+i,_+o),u=nt(r,l);i+=u.written}return A=i,_}let M=new BigInt64Array;function ot(){return M.byteLength===0&&(M=new BigInt64Array(n.memory.buffer)),M}function P(r){const t=typeof r;if(t=="number"||t=="boolean"||r==null)return`${r}`;if(t=="string")return`"${r}"`;if(t=="symbol"){const _=r.description;return _==null?"Symbol":`Symbol(${_})`}if(t=="function"){const _=r.name;return typeof _=="string"&&_.length>0?`Function(${_})`:"Function"}if(Array.isArray(r)){const _=r.length;let s="[";_>0&&(s+=P(r[0]));for(let i=1;i<_;i++)s+=", "+P(r[i]);return s+="]",s}const e=/\[object ([^\]]+)\]/.exec(toString.call(r));let o;if(e.length>1)o=e[1];else return toString.call(r);if(o=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:o}let f=32;function N(r){if(f==1)throw new Error("out of js stack");return h[--f]=r,f}function v(r,t){if(!(r instanceof t))throw new Error(`expected instance of ${t.name}`);return r.ptr}function G(r,t){try{return r.apply(this,t)}catch(e){n.__wbindgen_exn_store(p(e))}}class W{static __wrap(t){const e=Object.create(W.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_altitudegradientpair_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_new(s,N(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return W.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),h[f++]=void 0}}debug(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_debug(o,this.ptr);var t=c()[o/4+0],e=c()[o/4+1];return y(t,e)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,e)}}to_js(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.altitudegradientpair_to_js(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class x{static __wrap(t){const e=Object.create(x.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_lavapathturbineinput_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.lavapathturbineinput_new(s,N(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return x.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),h[f++]=void 0}}}class b{static __wrap(t){const e=Object.create(b.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionapi_free(t)}get rows(){return n.__wbg_get_modelconstructionapi_rows(this.ptr)>>>0}set rows(t){n.__wbg_set_modelconstructionapi_rows(this.ptr,t)}get columns(){return n.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set columns(t){n.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get width(){return n.__wbg_get_modelconstructionapi_width(this.ptr)}set width(t){n.__wbg_set_modelconstructionapi_width(this.ptr,t)}get height(){return n.__wbg_get_modelconstructionapi_height(this.ptr)}set height(t){n.__wbg_set_modelconstructionapi_height(this.ptr,t)}get altitude_step(){return n.__wbg_get_modelconstructionapi_altitude_step(this.ptr)}set altitude_step(t){n.__wbg_set_modelconstructionapi_altitude_step(this.ptr,t)}get curve_point_separation(){return n.__wbg_get_modelconstructionapi_curve_point_separation(this.ptr)}set curve_point_separation(t){n.__wbg_set_modelconstructionapi_curve_point_separation(this.ptr,t)}get svc_distance(){return n.__wbg_get_modelconstructionapi_svc_distance(this.ptr)}set svc_distance(t){n.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}get catmull_clark_iterations(){return n.__wbg_get_modelconstructionapi_catmull_clark_iterations(this.ptr)>>>0}set catmull_clark_iterations(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}get lava_path_length(){return n.__wbg_get_modelconstructionapi_lava_path_length(this.ptr)>>>0}set lava_path_length(t){n.__wbg_set_modelconstructionapi_lava_path_length(this.ptr,t)}get lava_path_fork_val(){return n.__wbg_get_modelconstructionapi_lava_path_fork_val(this.ptr)}set lava_path_fork_val(t){n.__wbg_set_modelconstructionapi_lava_path_fork_val(this.ptr,t)}constructor(){const t=n.modelconstructionapi_new();return b.__wrap(t)}set_basic_parameters(t,e,o,_){n.modelconstructionapi_set_basic_parameters(this.ptr,t,e,o,_)}set_svc_parameters(t){n.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}set_catmull_clark_parameters(t){n.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}set_lava_path_parameters(t,e){n.modelconstructionapi_set_lava_path_parameters(this.ptr,t,e)}base(t,e){v(t,I);var o=t.ptr;t.ptr=0,n.modelconstructionapi_base(this.ptr,o,e)}build(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_build(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return z.__wrap(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}get_altitude_and_gradient_for_point(t,e){try{const i=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionapi_get_altitude_and_gradient_for_point(i,this.ptr,t,e);var o=c()[i/4+0],_=c()[i/4+1],s=c()[i/4+2];if(s)throw g(_);return W.__wrap(o)}finally{n.__wbindgen_add_to_stack_pointer(16)}}compute_player_points(t){v(t,x);var e=t.ptr;return t.ptr=0,n.modelconstructionapi_compute_player_points(this.ptr,e)>>>0}apply_smooth_to_layer(t,e,o,_,s){n.modelconstructionapi_apply_smooth_to_layer(this.ptr,t,e,o,_,s)}set_altitude_for_layer(t,e,o){n.modelconstructionapi_set_altitude_for_layer(this.ptr,t,e,o)}apply_smooth_to_altitude_group(t,e,o,_,s){n.modelconstructionapi_apply_smooth_to_altitude_group(this.ptr,t,e,o,_,s)}increase_altitude_for_altitude_group(t,e,o){n.modelconstructionapi_increase_altitude_for_altitude_group(this.ptr,t,e,o)}apply_smooth_to_middle_layers(t,e,o,_){n.modelconstructionapi_apply_smooth_to_middle_layers(this.ptr,t,e,o,_)}apply_smooth_to_mountain_tops(t,e,o,_){n.modelconstructionapi_apply_smooth_to_mountain_tops(this.ptr,t,e,o,_)}increase_altitude_for_mountain_tops(t,e){n.modelconstructionapi_increase_altitude_for_mountain_tops(this.ptr,t,e)}apply_smooth_to_all(t,e,o,_){n.modelconstructionapi_apply_smooth_to_all(this.ptr,t,e,o,_)}correct_for_altitude_constraints_to_all_layers(){n.modelconstructionapi_correct_for_altitude_constraints_to_all_layers(this.ptr)}}class z{static __wrap(t){const e=Object.create(z.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_modelconstructionresult_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_new(s,N(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return z.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),h[f++]=void 0}}debug(){try{const o=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_debug(o,this.ptr);var t=c()[o/4+0],e=c()[o/4+1];return y(t,e)}finally{n.__wbindgen_add_to_stack_pointer(16),n.__wbindgen_free(t,e)}}to_js(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.modelconstructionresult_to_js(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_opencvtree_free(t)}constructor(t){try{const s=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_new(s,N(t));var e=c()[s/4+0],o=c()[s/4+1],_=c()[s/4+2];if(_)throw g(o);return I.__wrap(e)}finally{n.__wbindgen_add_to_stack_pointer(16),h[f++]=void 0}}debug(){try{const _=n.__wbindgen_add_to_stack_pointer(-16);n.opencvtree_debug(_,this.ptr);var t=c()[_/4+0],e=c()[_/4+1],o=c()[_/4+2];if(o)throw g(e);return g(t)}finally{n.__wbindgen_add_to_stack_pointer(16)}}}class F{static __wrap(t){const e=Object.create(F.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtolayer_free(t)}get layer(){return n.__wbg_get_modelconstructionapi_rows(this.ptr)>>>0}set layer(t){n.__wbg_set_modelconstructionapi_rows(this.ptr,t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_strength(this.ptr,t)}get coverage(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set coverage(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoaltitudegroup_allow_svc_change(this.ptr,t)}constructor(t,e,o,_,s){const i=n.smoothingoperationapplysmoothtoaltitudegroup_new(t,e,o,_,s);return F.__wrap(i)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtolayer_apply_to_api(this.ptr,t.ptr)}}class L{static __wrap(t){const e=Object.create(L.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomiddlelayers_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get coverage(){return n.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set coverage(t){n.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr,t)}constructor(t,e,o,_){const s=n.smoothingoperationapplysmoothtoall_new(t,e,o,_);return L.__wrap(s)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtomiddlelayers_apply_to_api(this.ptr,t.ptr)}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationapplysmoothtomountaintops_free(t)}get strength(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set strength(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get coverage(){return n.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set coverage(t){n.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get svc_weight(){return n.__wbg_get_smoothingoperationapplysmoothtoall_svc_weight(this.ptr)>>>0}set svc_weight(t){n.__wbg_set_smoothingoperationapplysmoothtoall_svc_weight(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationapplysmoothtoall_allow_svc_change(this.ptr,t)}constructor(t,e,o,_){const s=n.smoothingoperationapplysmoothtoall_new(t,e,o,_);return R.__wrap(s)}apply_to_api(t){v(t,b),n.smoothingoperationapplysmoothtomountaintops_apply_to_api(this.ptr,t.ptr)}}class ${static __wrap(t){const e=Object.create($.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();n.__wbg_smoothingoperationincreasealtitudeformountaintops_free(t)}get percentage_of_altitude_step(){return n.__wbg_get_smoothingoperationapplysmoothtoall_strength(this.ptr)}set percentage_of_altitude_step(t){n.__wbg_set_smoothingoperationapplysmoothtoall_strength(this.ptr,t)}get allow_svc_change(){return n.__wbg_get_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){n.__wbg_set_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr,t)}constructor(t,e){const o=n.smoothingoperationincreasealtitudeformountaintops_new(t,e);return $.__wrap(o)}apply_to_api(t){v(t,b),n.smoothingoperationincreasealtitudeformountaintops_apply_to_api(this.ptr,t.ptr)}}async function _t(r,t){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,t)}catch(o){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const e=await r.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(r,t);return e instanceof WebAssembly.Instance?{instance:e,module:r}:e}}function st(){const r={};return r.wbg={},r.wbg.__wbindgen_string_new=function(t,e){const o=y(t,e);return p(o)},r.wbg.__wbindgen_object_drop_ref=function(t){g(t)},r.wbg.__wbindgen_object_clone_ref=function(t){const e=a(t);return p(e)},r.wbg.__wbindgen_is_undefined=function(t){return a(t)===void 0},r.wbg.__wbindgen_in=function(t,e){return a(t)in a(e)},r.wbg.__wbindgen_number_get=function(t,e){const o=a(e),_=typeof o=="number"?o:void 0;rt()[t/8+1]=j(_)?0:_,c()[t/4+0]=!j(_)},r.wbg.__wbindgen_is_bigint=function(t){return typeof a(t)=="bigint"},r.wbg.__wbindgen_bigint_from_i64=function(t){return p(t)},r.wbg.__wbindgen_jsval_eq=function(t,e){return a(t)===a(e)},r.wbg.__wbindgen_bigint_from_u64=function(t){const e=BigInt.asUintN(64,t);return p(e)},r.wbg.__wbindgen_string_get=function(t,e){const o=a(e),_=typeof o=="string"?o:void 0;var s=j(_)?0:D(_,n.__wbindgen_malloc,n.__wbindgen_realloc),i=A;c()[t/4+1]=i,c()[t/4+0]=s},r.wbg.__wbindgen_is_object=function(t){const e=a(t);return typeof e=="object"&&e!==null},r.wbg.__wbindgen_error_new=function(t,e){const o=new Error(y(t,e));return p(o)},r.wbg.__wbindgen_number_new=function(t){return p(t)},r.wbg.__wbindgen_jsval_loose_eq=function(t,e){return a(t)==a(e)},r.wbg.__wbindgen_boolean_get=function(t){const e=a(t);return typeof e=="boolean"?e?1:0:2},r.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(t,e){const o=a(t)[a(e)];return p(o)},r.wbg.__wbg_set_20cbc34131e76824=function(t,e,o){a(t)[g(e)]=g(o)},r.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return p(t)},r.wbg.__wbg_stack_658279fe44541cf6=function(t,e){const o=a(e).stack,_=D(o,n.__wbindgen_malloc,n.__wbindgen_realloc),s=A;c()[t/4+1]=s,c()[t/4+0]=_},r.wbg.__wbg_error_f851667af71bcfc6=function(t,e){try{console.error(y(t,e))}finally{n.__wbindgen_free(t,e)}},r.wbg.__wbg_log_4b5638ad60bdc54a=function(t){console.log(a(t))},r.wbg.__wbg_get_57245cc7d7c7619d=function(t,e){const o=a(t)[e>>>0];return p(o)},r.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(t){return a(t).length},r.wbg.__wbg_new_1d9a920c6bfc44a8=function(){const t=new Array;return p(t)},r.wbg.__wbindgen_is_function=function(t){return typeof a(t)=="function"},r.wbg.__wbg_next_579e583d33566a86=function(t){const e=a(t).next;return p(e)},r.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return G(function(t){const e=a(t).next();return p(e)},arguments)},r.wbg.__wbg_done_1b73b0672e15f234=function(t){return a(t).done},r.wbg.__wbg_value_1ccc36bc03462d71=function(t){const e=a(t).value;return p(e)},r.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return p(Symbol.iterator)},r.wbg.__wbg_get_765201544a2b6869=function(){return G(function(t,e){const o=Reflect.get(a(t),a(e));return p(o)},arguments)},r.wbg.__wbg_call_97ae9d8645dc388b=function(){return G(function(t,e){const o=a(t).call(a(e));return p(o)},arguments)},r.wbg.__wbg_new_0b9bfdd97583284e=function(){const t=new Object;return p(t)},r.wbg.__wbg_set_a68214f35c417fa9=function(t,e,o){a(t)[e>>>0]=g(o)},r.wbg.__wbg_isArray_27c46c67f498e15d=function(t){return Array.isArray(a(t))},r.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(t){let e;try{e=a(t)instanceof ArrayBuffer}catch{e=!1}return e},r.wbg.__wbg_isSafeInteger_dfa0593e8d7ac35a=function(t){return Number.isSafeInteger(a(t))},r.wbg.__wbg_buffer_3f3d764d4747d564=function(t){const e=a(t).buffer;return p(e)},r.wbg.__wbg_new_8c3f0052272a457a=function(t){const e=new Uint8Array(a(t));return p(e)},r.wbg.__wbg_set_83db9690f9353e79=function(t,e,o){a(t).set(a(e),o>>>0)},r.wbg.__wbg_length_9e1ae1900cb0fbd5=function(t){return a(t).length},r.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(t){let e;try{e=a(t)instanceof Uint8Array}catch{e=!1}return e},r.wbg.__wbindgen_bigint_get_as_i64=function(t,e){const o=a(e),_=typeof o=="bigint"?o:void 0;ot()[t/8+1]=j(_)?0n:_,c()[t/4+0]=!j(_)},r.wbg.__wbindgen_debug_string=function(t,e){const o=P(a(e)),_=D(o,n.__wbindgen_malloc,n.__wbindgen_realloc),s=A;c()[t/4+1]=s,c()[t/4+0]=_},r.wbg.__wbindgen_throw=function(t,e){throw new Error(y(t,e))},r.wbg.__wbindgen_memory=function(){const t=n.memory;return p(t)},r}function it(r,t){return n=r.exports,X.__wbindgen_wasm_module=t,M=new BigInt64Array,U=new Float64Array,B=new Int32Array,O=new Uint8Array,n}async function X(r){typeof r>"u"&&(r="assets/wasm_bg.wasm");const t=st();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));const{instance:e,module:o}=await _t(await r,t);return it(e,o)}function at(r){return r*(180/Math.PI)}function ct(r){let t=r.altitude;return t+=1*r.gradient.map(e=>Math.abs(e)).reduce((e,o)=>Math.max(e,o)),t*1.07}function H(r){const t=new Blob([r],{type:"application/json"});return URL.createObjectURL(t)}function pt(){const{subscribe:r,set:t}=Q();let e,o,_=!1,s;return{subscribe:r,set:t,setup:async(i,l)=>{_||(await X(),_=!0),o=i.size;const u=new I({pixels_per_curve:i.curves,parent_relations:i.hierarchy});e=new b,new tt(u,45,45,i.size.width,i.size.height,5,Math.max(i.size.width,i.size.height)/(45*1.5),1,20,l,[new F(0,.3,5,1,!1),new L(.7,3,5,!1),new $(.25,!0),new R(1,8,1,!1)]).apply_to_api(e)},build:i=>{s=e.build().to_js(),s.gltf_url=H(s.gltf),s.lava_gltf_url=H(s.lava_gltf),s.craters=s.craters.map(l=>[l[0]*i.size.width/100,l[1]*i.size.height/100]),V.set(s.craters),t(s)},getAlitituteAndGradient:(i,l=!1)=>{if(!e)return{x:0,y:0,altitude:0,gradient:[0,0,0]};let[u,d]=[i.x,i.y];l||(u=i.x/o.width*100,d=i.y/o.height*100);const m=e.get_altitude_and_gradient_for_point(u,d).to_js();return m.gradient.map(q=>at(q)),m.altitude=ct(m),m},computePlayerPoints:i=>{if(!e)return 0;const{width:l,height:u}=o;return e.compute_player_points(new x({lava_paths:s.lava_paths,turbines:C(Z).map(d=>[d.x/l*100,d.y/u*100]),max_lava_distance:C(T).max_lava_distance,max_points_total:i}))}}}const wt=pt();export{wt as g};
