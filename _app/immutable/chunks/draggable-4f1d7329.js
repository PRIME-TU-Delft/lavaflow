class f{constructor(t,s,i,h=0,a=0){this.dragging=!1,this.enable_selection=!1,this.last_selected=!0,this.drag_translated=!1,this.too_close_to_crater=!1,this.too_close_to_other_target=!1,this.x=t,this.y=s,this.old_x=t,this.old_y=s,this.size=i,this.offsetX=h,this.offsetY=a}enableSelection(){this.enable_selection=!0}disableSelection(){this.enable_selection=!1}update(t,s,i,h,a,r){if(!!this.dragging&&!(t.mouseX<=0||t.mouseY<=0)&&!(t.mouseX>=t.width||t.mouseY>=t.height)){if(this.x=t.mouseX+this.offsetX,this.y=t.mouseY+this.offsetY,this.translateForDragging(),s!=null&&i!=null){this.too_close_to_crater=!1;for(let e=0;e<s.length;e++){let o=s[e][0]-this.x,l=s[e][1]-this.y;if(Math.sqrt(o*o+l*l)<=i){this.too_close_to_crater=!0;break}}}if(h!=null&&a!=null){this.too_close_to_other_target=!1;for(let e=0;e<h.length;e++){if(r!=null&&r==e)continue;let o=h[e].x-this.x,l=h[e].y-this.y;if(Math.sqrt(o*o+l*l)<=a){this.too_close_to_other_target=!0;break}}}}}setPosition(t,s){this.x=t,this.y=s}translateForDragging(){this.dragging&&!this.drag_translated&&(this.y-=50,this.drag_translated=!0)}translateBackAfterDragging(){this.drag_translated&&(this.drag_translated=!1)}displayWarningMessage(t,s){t.noStroke(),t.fill(51),t.textSize(15),t.textAlign(t.CENTER);let i=t.textWidth(s);t.rect(this.x-i/2-5,this.y-35,i+10,20),t.strokeWeight(1),t.fill(255),t.text(s,this.x,this.y-20)}drawRect(t,s){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(4),t.rect(this.x-s/2,this.y-s/2,s,s),this.translateBackAfterDragging()}drawCircle(t,s,i){this.translateForDragging(),i!=null&&(t.strokeWeight(.5),t.stroke(0),t.fill(200),t.rect(this.x,this.y-s/2,50,s),t.fill(0),t.textAlign(t.CENTER),t.textSize(15),t.text("#"+i,this.x+30,this.y+5)),t.fill(255),this.enable_selection&&this.last_selected&&t.fill(0,140,220),this.too_close_to_crater?(this.displayWarningMessage(t,"Too close to the crater"),t.fill(255,0,0)):this.too_close_to_other_target&&(this.displayWarningMessage(t,"Too close to another turbine"),t.fill(255,0,0)),t.stroke(0),t.strokeWeight(4),t.ellipse(this.x,this.y,s),this.translateBackAfterDragging()}drawTriangle(t,s){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(4),t.triangle(this.x-s/2,this.y+s/2,this.x+s/2,this.y+s/2,this.x,this.y-s/2),this.translateBackAfterDragging()}drawCross(t,s){this.translateForDragging(),t.stroke(0),t.strokeWeight(4*2),t.line(this.x-s/2,this.y-s/2,this.x+s/2,this.y+s/2),t.line(this.x+s/2,this.y-s/2,this.x-s/2,this.y+s/2),this.translateBackAfterDragging()}deselect(){this.last_selected=!1}pressed(t){const s=t.mouseX>this.x-this.size/2&&t.mouseX<this.x+this.size/2,i=t.mouseY>this.y-this.size/2&&t.mouseY<this.y+this.size/2;return s&&i?(this.dragging=!0,this.offsetX=this.x-t.mouseX,this.offsetY=this.y-t.mouseY,this.old_x=this.x,this.old_y=this.y,this.last_selected=!0,!0):!1}released(){this.dragging=!1,this.translateBackAfterDragging(),(this.too_close_to_crater||this.too_close_to_other_target)&&(this.x=this.old_x,this.y=this.old_y,this.too_close_to_crater=!1,this.too_close_to_other_target=!1)}}export{f as D};
