import{w as Y}from"./index-f8726bb3.js";const v=4;class T{constructor(t,e,r,s=0,_=0){this.dragging=!1,this.enable_selection=!1,this.last_selected=!0,this.drag_translated=!1,this.too_close_to_crater=!1,this.too_close_to_other_target=!1,this.x=t,this.y=e,this.old_x=t,this.old_y=e,this.size=r,this.offsetX=s,this.offsetY=_}enableSelection(){this.enable_selection=!0}disableSelection(){this.enable_selection=!1}update(t,e,r,s,_,i){if(!!this.dragging&&!(t.mouseX<=0||t.mouseY<=0)&&!(t.mouseX>=t.width||t.mouseY>=t.height)){if(this.x=t.mouseX+this.offsetX,this.y=t.mouseY+this.offsetY,this.translateForDragging(),e!=null&&r!=null){this.too_close_to_crater=!1;for(let a=0;a<e.length;a++){let l=e[a][0]-this.x,p=e[a][1]-this.y;if(Math.sqrt(l*l+p*p)<=r){this.too_close_to_crater=!0;break}}}if(s!=null&&_!=null){this.too_close_to_other_target=!1;for(let a=0;a<s.length;a++){if(i!=null&&i==a)continue;let l=s[a].x-this.x,p=s[a].y-this.y;if(Math.sqrt(l*l+p*p)<=_){this.too_close_to_other_target=!0;break}}}}}setPosition(t,e){this.x=t,this.y=e}translateForDragging(){this.dragging&&!this.drag_translated&&(this.y-=50,this.drag_translated=!0)}translateBackAfterDragging(){this.drag_translated&&(this.drag_translated=!1)}displayWarningMessage(t,e){t.noStroke(),t.fill(51),t.textSize(15),t.textAlign(t.CENTER);let r=t.textWidth(e);t.rect(this.x-r/2-5,this.y-35,r+10,20),t.strokeWeight(1),t.fill(255),t.text(e,this.x,this.y-20)}drawRect(t,e){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(v),t.rect(this.x-e/2,this.y-e/2,e,e),this.translateBackAfterDragging()}drawCircle(t,e,r){this.translateForDragging(),r!=null&&(t.strokeWeight(.5),t.stroke(0),t.fill(200),t.rect(this.x,this.y-e/2,50,e),t.fill(0),t.textAlign(t.CENTER),t.textSize(15),t.text("#"+r,this.x+30,this.y+5)),t.fill(255),this.enable_selection&&this.last_selected&&t.fill(0,140,220),this.too_close_to_crater?(this.displayWarningMessage(t,"Too close to the crater"),t.fill(255,0,0)):this.too_close_to_other_target&&(this.displayWarningMessage(t,"Too close to another turbine"),t.fill(255,0,0)),t.stroke(0),t.strokeWeight(v),t.ellipse(this.x,this.y,e),this.translateBackAfterDragging()}drawTriangle(t,e){this.translateForDragging(),t.stroke(0),t.fill(255),t.strokeWeight(v),t.triangle(this.x-e/2,this.y+e/2,this.x+e/2,this.y+e/2,this.x,this.y-e/2),this.translateBackAfterDragging()}drawCross(t,e){this.translateForDragging(),t.stroke(0),t.strokeWeight(v*2),t.line(this.x-e/2,this.y-e/2,this.x+e/2,this.y+e/2),t.line(this.x+e/2,this.y-e/2,this.x-e/2,this.y+e/2),this.translateBackAfterDragging()}deselect(){this.last_selected=!1}pressed(t){const e=t.mouseX>this.x-this.size/2&&t.mouseX<this.x+this.size/2,r=t.mouseY>this.y-this.size/2&&t.mouseY<this.y+this.size/2;return e&&r?(this.dragging=!0,this.offsetX=this.x-t.mouseX,this.offsetY=this.y-t.mouseY,this.old_x=this.x,this.old_y=this.y,this.last_selected=!0,!0):!1}released(){this.dragging=!1,this.translateBackAfterDragging(),(this.too_close_to_crater||this.too_close_to_other_target)&&(this.x=this.old_x,this.y=this.old_y,this.too_close_to_crater=!1,this.too_close_to_other_target=!1)}}class J{constructor(t,e,r,s,_,i,a,l,p,d,M){this.tree=t,this.rows=e,this.columns=r,this.width=s,this.height=_,this.curve_point_separation=i,this.svc_distance=a,this.catmull_clark_iterations=l,this.lava_path_length=p,this.lava_path_fork_val=d,this.smoothing_operations=M}apply_to_api(t){t.base(this.tree,this.curve_point_separation),t.set_basic_parameters(this.rows,this.columns,this.width,this.height),t.set_svc_parameters(this.svc_distance),t.set_catmull_clark_parameters(this.catmull_clark_iterations),t.set_lava_path_parameters(this.lava_path_length,this.lava_path_fork_val);for(let e of this.smoothing_operations)e.apply_to_api(t)}}let o;const S=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});S.decode();let x=null;function j(){return(x===null||x.buffer!==o.memory.buffer)&&(x=new Uint8Array(o.memory.buffer)),x}function f(n,t){return S.decode(j().subarray(n,n+t))}const h=new Array(32).fill(void 0);h.push(void 0,null,!0,!1);let m=h.length;function X(n){m===h.length&&h.push(h.length+1);const t=m;return m=h[t],h[t]=n,t}function W(n){return h[n]}function q(n){n<36||(h[n]=m,m=n)}function g(n){const t=W(n);return q(n),t}let D=0;const O=new TextEncoder("utf-8"),G=typeof O.encodeInto=="function"?function(n,t){return O.encodeInto(n,t)}:function(n,t){const e=O.encode(n);return t.set(e),{read:n.length,written:e.length}};function N(n,t,e){if(e===void 0){const a=O.encode(n),l=t(a.length);return j().subarray(l,l+a.length).set(a),D=a.length,l}let r=n.length,s=t(r);const _=j();let i=0;for(;i<r;i++){const a=n.charCodeAt(i);if(a>127)break;_[s+i]=a}if(i!==r){i!==0&&(n=n.slice(i)),s=e(s,r,r=i+n.length*3);const a=j().subarray(s+i,s+r);i+=G(n,a).written}return D=i,s}let k=null;function c(){return(k===null||k.buffer!==o.memory.buffer)&&(k=new Int32Array(o.memory.buffer)),k}let w=32;function U(n){if(w==1)throw new Error("out of js stack");return h[--w]=n,w}function b(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`);return n.ptr}class A{static __wrap(t){const e=Object.create(A.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_altitudegradientpair_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_new(_,U(t));var e=c()[_/4+0],r=c()[_/4+1],s=c()[_/4+2];if(s)throw g(r);return A.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),h[w++]=void 0}}debug(){try{const r=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_debug(r,this.ptr);var t=c()[r/4+0],e=c()[r/4+1];return f(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}to_js(){try{const s=o.__wbindgen_add_to_stack_pointer(-16);o.altitudegradientpair_to_js(s,this.ptr);var t=c()[s/4+0],e=c()[s/4+1],r=c()[s/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class u{static __wrap(t){const e=Object.create(u.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_modelconstructionapi_free(t)}get rows(){return o.__wbg_get_modelconstructionapi_rows(this.ptr)>>>0}set rows(t){o.__wbg_set_modelconstructionapi_rows(this.ptr,t)}get columns(){return o.__wbg_get_modelconstructionapi_columns(this.ptr)>>>0}set columns(t){o.__wbg_set_modelconstructionapi_columns(this.ptr,t)}get width(){return o.__wbg_get_modelconstructionapi_width(this.ptr)}set width(t){o.__wbg_set_modelconstructionapi_width(this.ptr,t)}get height(){return o.__wbg_get_modelconstructionapi_height(this.ptr)}set height(t){o.__wbg_set_modelconstructionapi_height(this.ptr,t)}get altitude_step(){return o.__wbg_get_modelconstructionapi_altitude_step(this.ptr)}set altitude_step(t){o.__wbg_set_modelconstructionapi_altitude_step(this.ptr,t)}get curve_point_separation(){return o.__wbg_get_modelconstructionapi_curve_point_separation(this.ptr)}set curve_point_separation(t){o.__wbg_set_modelconstructionapi_curve_point_separation(this.ptr,t)}get svc_distance(){return o.__wbg_get_modelconstructionapi_svc_distance(this.ptr)}set svc_distance(t){o.__wbg_set_modelconstructionapi_svc_distance(this.ptr,t)}get catmull_clark_iterations(){return o.__wbg_get_modelconstructionapi_catmull_clark_iterations(this.ptr)>>>0}set catmull_clark_iterations(t){o.__wbg_set_modelconstructionapi_catmull_clark_iterations(this.ptr,t)}get lava_path_length(){return o.__wbg_get_modelconstructionapi_lava_path_length(this.ptr)>>>0}set lava_path_length(t){o.__wbg_set_modelconstructionapi_lava_path_length(this.ptr,t)}get lava_path_fork_val(){return o.__wbg_get_modelconstructionapi_lava_path_fork_val(this.ptr)}set lava_path_fork_val(t){o.__wbg_set_modelconstructionapi_lava_path_fork_val(this.ptr,t)}constructor(){const t=o.modelconstructionapi_new();return u.__wrap(t)}set_basic_parameters(t,e,r,s){o.modelconstructionapi_set_basic_parameters(this.ptr,t,e,r,s)}set_svc_parameters(t){o.modelconstructionapi_set_svc_parameters(this.ptr,t)}set_catmull_clark_parameters(t){o.modelconstructionapi_set_catmull_clark_parameters(this.ptr,t)}set_lava_path_parameters(t,e){o.modelconstructionapi_set_lava_path_parameters(this.ptr,t,e)}base(t,e){b(t,y);var r=t.ptr;t.ptr=0,o.modelconstructionapi_base(this.ptr,r,e)}build(){try{const s=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionapi_build(s,this.ptr);var t=c()[s/4+0],e=c()[s/4+1],r=c()[s/4+2];if(r)throw g(e);return E.__wrap(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}get_altitude_and_gradient_for_point(t,e){try{const i=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionapi_get_altitude_and_gradient_for_point(i,this.ptr,t,e);var r=c()[i/4+0],s=c()[i/4+1],_=c()[i/4+2];if(_)throw g(s);return A.__wrap(r)}finally{o.__wbindgen_add_to_stack_pointer(16)}}apply_smooth_to_layer(t,e,r,s,_){o.modelconstructionapi_apply_smooth_to_layer(this.ptr,t,e,r,s,_)}set_altitude_for_layer(t,e,r){o.modelconstructionapi_set_altitude_for_layer(this.ptr,t,e,r)}apply_smooth_to_altitude_group(t,e,r,s,_){o.modelconstructionapi_apply_smooth_to_altitude_group(this.ptr,t,e,r,s,_)}increase_altitude_for_altitude_group(t,e,r){o.modelconstructionapi_increase_altitude_for_altitude_group(this.ptr,t,e,r)}apply_smooth_to_middle_layers(t,e,r,s){o.modelconstructionapi_apply_smooth_to_middle_layers(this.ptr,t,e,r,s)}apply_smooth_to_mountain_tops(t,e,r,s){o.modelconstructionapi_apply_smooth_to_mountain_tops(this.ptr,t,e,r,s)}increase_altitude_for_mountain_tops(t,e){o.modelconstructionapi_increase_altitude_for_mountain_tops(this.ptr,t,e)}apply_smooth_to_all(t,e,r,s){o.modelconstructionapi_apply_smooth_to_all(this.ptr,t,e,r,s)}correct_for_altitude_constraints_to_all_layers(){o.modelconstructionapi_correct_for_altitude_constraints_to_all_layers(this.ptr)}}class E{static __wrap(t){const e=Object.create(E.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_modelconstructionresult_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_new(_,U(t));var e=c()[_/4+0],r=c()[_/4+1],s=c()[_/4+2];if(s)throw g(r);return E.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),h[w++]=void 0}}debug(){try{const r=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_debug(r,this.ptr);var t=c()[r/4+0],e=c()[r/4+1];return f(t,e)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,e)}}to_js(){try{const s=o.__wbindgen_add_to_stack_pointer(-16);o.modelconstructionresult_to_js(s,this.ptr);var t=c()[s/4+0],e=c()[s/4+1],r=c()[s/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class y{static __wrap(t){const e=Object.create(y.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_opencvtree_free(t)}constructor(t){try{const _=o.__wbindgen_add_to_stack_pointer(-16);o.opencvtree_new(_,U(t));var e=c()[_/4+0],r=c()[_/4+1],s=c()[_/4+2];if(s)throw g(r);return y.__wrap(e)}finally{o.__wbindgen_add_to_stack_pointer(16),h[w++]=void 0}}debug(){try{const s=o.__wbindgen_add_to_stack_pointer(-16);o.opencvtree_debug(s,this.ptr);var t=c()[s/4+0],e=c()[s/4+1],r=c()[s/4+2];if(r)throw g(e);return g(t)}finally{o.__wbindgen_add_to_stack_pointer(16)}}}class B{static __wrap(t){const e=Object.create(B.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtolayer_free(t)}get layer(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_layer(this.ptr)>>>0}set layer(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_layer(this.ptr,t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtolayer_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtolayer_allow_svc_change(this.ptr,t)}constructor(t,e,r,s,_){const i=o.smoothingoperationapplysmoothtolayer_new(t,e,r,s,_);return B.__wrap(i)}apply_to_api(t){b(t,u),o.smoothingoperationapplysmoothtolayer_apply_to_api(this.ptr,t.ptr)}}class L{static __wrap(t){const e=Object.create(L.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtomiddlelayers_free(t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtomiddlelayers_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtomiddlelayers_allow_svc_change(this.ptr,t)}constructor(t,e,r,s){const _=o.smoothingoperationapplysmoothtomiddlelayers_new(t,e,r,s);return L.__wrap(_)}apply_to_api(t){b(t,u),o.smoothingoperationapplysmoothtomiddlelayers_apply_to_api(this.ptr,t.ptr)}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationapplysmoothtomountaintops_free(t)}get strength(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_strength(this.ptr)}set strength(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_strength(this.ptr,t)}get coverage(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_coverage(this.ptr)>>>0}set coverage(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_coverage(this.ptr,t)}get svc_weight(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_svc_weight(this.ptr)>>>0}set svc_weight(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_svc_weight(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationapplysmoothtomountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationapplysmoothtomountaintops_allow_svc_change(this.ptr,t)}constructor(t,e,r,s){const _=o.smoothingoperationapplysmoothtomountaintops_new(t,e,r,s);return I.__wrap(_)}apply_to_api(t){b(t,u),o.smoothingoperationapplysmoothtomountaintops_apply_to_api(this.ptr,t.ptr)}}class R{static __wrap(t){const e=Object.create(R.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();o.__wbg_smoothingoperationincreasealtitudeformountaintops_free(t)}get percentage_of_altitude_step(){return o.__wbg_get_smoothingoperationincreasealtitudeformountaintops_percentage_of_altitude_step(this.ptr)}set percentage_of_altitude_step(t){o.__wbg_set_smoothingoperationincreasealtitudeformountaintops_percentage_of_altitude_step(this.ptr,t)}get allow_svc_change(){return o.__wbg_get_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr)!==0}set allow_svc_change(t){o.__wbg_set_smoothingoperationincreasealtitudeformountaintops_allow_svc_change(this.ptr,t)}constructor(t,e){const r=o.smoothingoperationincreasealtitudeformountaintops_new(t,e);return R.__wrap(r)}apply_to_api(t){b(t,u),o.smoothingoperationincreasealtitudeformountaintops_apply_to_api(this.ptr,t.ptr)}}async function H(n,t){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,t)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const e=await n.arrayBuffer();return await WebAssembly.instantiate(e,t)}else{const e=await WebAssembly.instantiate(n,t);return e instanceof WebAssembly.Instance?{instance:e,module:n}:e}}async function C(n){typeof n=="undefined"&&(n="/_app/immutable/assets/wasm_bg.wasm");const t={};t.wbg={},t.wbg.__wbindgen_string_new=function(s,_){const i=f(s,_);return X(i)},t.wbg.__wbindgen_object_drop_ref=function(s){g(s)},t.wbg.__wbindgen_json_parse=function(s,_){const i=JSON.parse(f(s,_));return X(i)},t.wbg.__wbindgen_json_serialize=function(s,_){const i=W(_),a=JSON.stringify(i===void 0?null:i),l=N(a,o.__wbindgen_malloc,o.__wbindgen_realloc),p=D;c()[s/4+1]=p,c()[s/4+0]=l},t.wbg.__wbg_new_693216e109162396=function(){const s=new Error;return X(s)},t.wbg.__wbg_stack_0ddaca5d1abfb52f=function(s,_){const i=W(_).stack,a=N(i,o.__wbindgen_malloc,o.__wbindgen_realloc),l=D;c()[s/4+1]=l,c()[s/4+0]=a},t.wbg.__wbg_error_09919627ac0992f5=function(s,_){try{console.error(f(s,_))}finally{o.__wbindgen_free(s,_)}},t.wbg.__wbg_log_e8ba7b992c7ad0eb=function(s){console.log(W(s))},t.wbg.__wbindgen_throw=function(s,_){throw new Error(f(s,_))},(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:e,module:r}=await H(await n,t);return o=e.exports,C.__wbindgen_wasm_module=r,o}function P(n){return n.map(t=>{const e=new T(t.x,t.y,t.size,t.offsetX,t.offsetY);return e.enableSelection(),e.deselect(),e})}function F(n,t){function e(){if(typeof window!="undefined"){const a=localStorage==null?void 0:localStorage.getItem(n);try{if(a){const l=JSON.parse(a);return t(l)}}catch{return[]}}return[]}function r(a){typeof window!="undefined"&&localStorage.setItem(n,JSON.stringify(a))}const{subscribe:s,update:_,set:i}=Y(e());return{subscribe:s,clear:()=>i([]),set:a=>{i(a),r(a)},add:a=>_(l=>{const p=[...l,a];return r(p),p}),remove:a=>_(l=>{const p=l.filter((d,M)=>M!==a);return r(p),p})}}const K=F("targets",P),$=F("craters",n=>n);function Q(n){return n*(180/Math.PI)}function V(n){let t=n.altitude;return t+=.02*n.gradient.map(e=>Math.abs(e)).reduce((e,r)=>Math.max(e,r)),t+1}function Z(n){const t=new Blob([n],{type:"application/json"});return URL.createObjectURL(t)}function z(){const{subscribe:n,set:t}=Y();let e,r,s=!1,_;return{subscribe:n,set:t,setup:async i=>{s||(await C(),s=!0),r=i.size;const a=new y({pixels_per_curve:i.curves,parent_relations:i.hierarchy});e=new u,new J(a,45,45,i.size.width,i.size.height,5,50,1,20,.2,[new B(0,.9,5,1,!1),new L(.7,3,5,!1),new R(2,!1),new I(1,8,1,!1)]).apply_to_api(e)},build:()=>{_=e.build().to_js(),_.gltf_url=Z(_.gltf),$.set(_.craters),t(_)},getAlitituteAndGradient:i=>{if(!e)return{x:0,y:0,altitude:0,gradient:[0,0,0]};const a=i.x/r.width*100,l=i.y/r.height*100,p=e.get_altitude_and_gradient_for_point(a,l).to_js();return p.gradient.map(d=>Q(d)),p.altitude=V(p),p}}}const ot=z();function tt(){const{subscribe:n,set:t}=Y();let e=!1;if(!e&&typeof window!="undefined"){const r=localStorage==null?void 0:localStorage.getItem("contourlines");r&&(t(JSON.parse(r)),e=!0)}return{subscribe:n,set:r=>{localStorage.setItem("contourlines",JSON.stringify(r)),t(r),K.clear(),e=!0}}}const rt=tt();export{T as D,$ as a,rt as c,ot as g,K as t};
