import{S as J,i as K,s as I,e as w,b as d,v as C,d as g,I as W,f as z,g as m,h as c,y as p,z as $,A as h,B as b,G as V,o as Q,k as A,l as B,m as E,n as j,p as T,a as N,c as R,J as U,K as Y,q as S,r as P,H as M,u as Z}from"../chunks/index.814eb393.js";import{P as x}from"../chunks/P5.5cae249c.js";import{B as L,I as X,d as q}from"../chunks/Button.a451a3d0.js";import{P as ee}from"../chunks/Page.50b125a6.js";import{N as te}from"../chunks/NavigationButton.3cbf88d0.js";import{g as H}from"../chunks/navigation.c8ab2ecc.js";import{a as re}from"../chunks/contourLineStore.53cb49e1.js";import{g as O}from"../chunks/gltfStore.390f1a7b.js";import{d as ne}from"../chunks/difficultyStore.77cd2ff2.js";import{d as oe}from"../chunks/debugStore.95233f8f.js";function F(a){let t,n;return t=new x({props:{sketch:a[1]}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){h(t,e,r),n=!0},p:W,i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function se(a){let t=a[0],n,e,r=F(a);return{c(){r.c(),n=w()},l(o){r.l(o),n=w()},m(o,s){r.m(o,s),d(o,n,s),e=!0},p(o,[s]){s&1&&I(t,t=o[0])?(C(),g(r,1,1,W),z(),r=F(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){e||(m(r),e=!0)},o(o){g(r),e=!1},d(o){o&&c(n),r.d(o)}}}function ae(a,t,n){let{debugMode:e=!1}=t,{foregroundWidth:r}=t,{foregroundHeight:o}=t,{curves:s}=t,{hierarchy:i}=t;const f=l=>{l.setup=()=>{l.createCanvas(r,o),l.background(230),s.forEach((u,_)=>{l.strokeWeight(1),l.stroke(30),l.fill(30),e&&l.text(`${_} (${i[_]})`,u[0][0]-10,u[0][1]-10),l.strokeWeight(4),l.noFill(),l.beginShape();for(let k of u){let v=k[0],D=k[1];l.vertex(v,D)}l.endShape(l.CLOSE)})}};return a.$$set=l=>{"debugMode"in l&&n(0,e=l.debugMode),"foregroundWidth"in l&&n(2,r=l.foregroundWidth),"foregroundHeight"in l&&n(3,o=l.foregroundHeight),"curves"in l&&n(4,s=l.curves),"hierarchy"in l&&n(5,i=l.hierarchy)},[e,f,r,o,s,i]}class le extends J{constructor(t){super(),K(this,t,ae,se,I,{debugMode:0,foregroundWidth:2,foregroundHeight:3,curves:4,hierarchy:5})}}function G(a){let t,n,e,r;return n=new le({props:{debugMode:a[6],curves:a[5].curves,hierarchy:a[5].hierarchy,foregroundHeight:a[1],foregroundWidth:a[0]}}),{c(){t=A("div"),p(n.$$.fragment),this.h()},l(o){t=B(o,"DIV",{class:!0});var s=E(t);$(n.$$.fragment,s),s.forEach(c),this.h()},h(){j(t,"class","sketch svelte-1upoge"),U(()=>a[10].call(t))},m(o,s){d(o,t,s),h(n,t,null),e=Y(t,a[10].bind(t)),r=!0},p(o,s){const i={};s&64&&(i.debugMode=o[6]),s&32&&(i.curves=o[5].curves),s&32&&(i.hierarchy=o[5].hierarchy),s&2&&(i.foregroundHeight=o[1]),s&1&&(i.foregroundWidth=o[0]),n.$set(i)},i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&c(t),b(n),e()}}}function ie(a){let t,n,e=a[5]?.curves&&a[5]?.hierarchy&&G(a);return{c(){e&&e.c(),t=w()},l(r){e&&e.l(r),t=w()},m(r,o){e&&e.m(r,o),d(r,t,o),n=!0},p(r,o){r[5]?.curves&&r[5]?.hierarchy?e?(e.p(r,o),o&32&&m(e,1)):(e=G(r),e.c(),m(e,1),e.m(t.parentNode,t)):e&&(C(),g(e,1,1,()=>{e=null}),z())},i(r){n||(m(e),n=!0)},o(r){g(e),n=!1},d(r){e&&e.d(r),r&&c(t)}}}function ue(a){let t;return{c(){t=S("Back to selection")},l(n){t=P(n,"Back to selection")},m(n,e){d(n,t,e)},d(n){n&&c(t)}}}function fe(a){let t,n;return t=new te({props:{slot:"headerButton",to:"/scan/maptransform",back:!0,$$slots:{default:[ue]},$$scope:{ctx:a}}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){h(t,e,r),n=!0},p(e,r){const o={};r&4096&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ce(a){let t;return{c(){t=A("div"),this.h()},l(n){t=B(n,"DIV",{slot:!0,style:!0}),E(t).forEach(c),this.h()},h(){j(t,"slot","background"),T(t,"background","#aaa")},m(n,e){d(n,t,e)},p:W,d(n){n&&c(t)}}}function me(a){let t,n,e,r,o;return r=new X({props:{path:q}}),{c(){t=A("span"),n=S("Visualise as 3D model"),e=N(),p(r.$$.fragment)},l(s){t=B(s,"SPAN",{});var i=E(t);n=P(i,"Visualise as 3D model"),i.forEach(c),e=R(s),$(r.$$.fragment,s)},m(s,i){d(s,t,i),M(t,n),d(s,e,i),h(r,s,i),o=!0},p:W,i(s){o||(m(r.$$.fragment,s),o=!0)},o(s){g(r.$$.fragment,s),o=!1},d(s){s&&c(t),s&&c(e),b(r,s)}}}function _e(a){let t,n;return t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[de]},$$scope:{ctx:a}}}),t.$on("click",a[9]),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){h(t,e,r),n=!0},p(e,r){const o={};r&4&&(o.loading=!e[2]),r&4096&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ge(a){let t,n;return t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[pe]},$$scope:{ctx:a}}}),t.$on("click",a[8]),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){h(t,e,r),n=!0},p(e,r){const o={};r&4&&(o.loading=!e[2]),r&4112&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function de(a){let t,n,e,r,o;return r=new X({props:{path:q}}),{c(){t=A("span"),n=S("Download webXR browser for AR"),e=N(),p(r.$$.fragment)},l(s){t=B(s,"SPAN",{});var i=E(t);n=P(i,"Download webXR browser for AR"),i.forEach(c),e=R(s),$(r.$$.fragment,s)},m(s,i){d(s,t,i),M(t,n),d(s,e,i),h(r,s,i),o=!0},p:W,i(s){o||(m(r.$$.fragment,s),o=!0)},o(s){g(r.$$.fragment,s),o=!1},d(s){s&&c(t),s&&c(e),b(r,s)}}}function pe(a){let t,n,e=a[4]?"! Experimental !":"",r,o,s,i;return s=new X({props:{path:q}}),{c(){t=A("span"),n=S("Visualise in AR "),r=S(e),o=N(),p(s.$$.fragment)},l(f){t=B(f,"SPAN",{});var l=E(t);n=P(l,"Visualise in AR "),r=P(l,e),l.forEach(c),o=R(f),$(s.$$.fragment,f)},m(f,l){d(f,t,l),M(t,n),M(t,r),d(f,o,l),h(s,f,l),i=!0},p(f,l){(!i||l&16)&&e!==(e=f[4]?"! Experimental !":"")&&Z(r,e)},i(f){i||(m(s.$$.fragment,f),i=!0)},o(f){g(s.$$.fragment,f),i=!1},d(f){f&&c(t),f&&c(o),b(s,f)}}}function $e(a){let t,n,e,r,o,s;t=new L({props:{secondary:!0,loading:!a[2],$$slots:{default:[me]},$$scope:{ctx:a}}}),t.$on("click",a[7]);const i=[ge,_e],f=[];function l(u,_){return u[3]?0:1}return e=l(a),r=f[e]=i[e](a),{c(){p(t.$$.fragment),n=N(),r.c(),o=w()},l(u){$(t.$$.fragment,u),n=R(u),r.l(u),o=w()},m(u,_){h(t,u,_),d(u,n,_),f[e].m(u,_),d(u,o,_),s=!0},p(u,_){const k={};_&4&&(k.loading=!u[2]),_&4096&&(k.$$scope={dirty:_,ctx:u}),t.$set(k);let v=e;e=l(u),e===v?f[e].p(u,_):(C(),g(f[v],1,1,()=>{f[v]=null}),z(),r=f[e],r?r.p(u,_):(r=f[e]=i[e](u),r.c()),m(r,1),r.m(o.parentNode,o))},i(u){s||(m(t.$$.fragment,u),m(r),s=!0)},o(u){g(t.$$.fragment,u),g(r),s=!1},d(u){b(t,u),u&&c(n),f[e].d(u),u&&c(o)}}}function he(a){let t,n;return t=new ee({props:{$$slots:{footer:[$e],background:[ce],headerButton:[fe],default:[ie]},$$scope:{ctx:a}}}),{c(){p(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,r){h(t,e,r),n=!0},p(e,[r]){const o={};r&4223&&(o.$$scope={dirty:r,ctx:e}),t.$set(o)},i(e){n||(m(t.$$.fragment,e),n=!0)},o(e){g(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function be(a,t,n){let e,r,o,s;V(a,re,y=>n(5,r=y)),V(a,ne,y=>n(11,o=y)),V(a,oe,y=>n(6,s=y));let i,f,l=!1,u=!1;Q(async()=>{if(!r.curves||!r.hierarchy)return H("/scan/mapscanning");await O.setup(r,o.lava_forking),O.build(r),n(3,u=await navigator?.xr?.isSessionSupported("immersive-ar")??!1),n(2,l=!0)});const _=()=>H("/visualise/model"),k=()=>H("/visualise/ar"),v=()=>H("https://apps.apple.com/nl/app/webxr-viewer/id1295998056");function D(){i=this.clientWidth,f=this.clientHeight,n(0,i),n(1,f)}return n(4,e=/iPhone|iPod|iPad/.test(navigator?.userAgent||navigator?.platform||"unknown")),[i,f,l,u,e,r,s,_,k,v,D]}class He extends J{constructor(t){super(),K(this,t,be,he,I,{})}}export{He as default};
