import{S as P,i as A,s as O,e as b,t as E,k as V,c as $,a as k,h as I,d as f,m as D,b as w,g as y,J as p,E as S,W as ee,F as Y,G as Z,H as K,I as Q,q as g,o as v,v as te,P as se,l as M,n as G,p as R,X as U,w as T,x as C,f as W,y as N,B,Y as oe,Z as ne}from"../../chunks/index-cd071420.js";import{B as q,b as re,c as le}from"../../chunks/mdi-ff5aee52.js";import{P as ie,r as ae,g as ce}from"../../chunks/imageStore-78473fa9.js";import"../../chunks/singletons-5be3e935.js";const F=[{title:"3 marker visible",description:"To recognize the level curves, we need to have the 3 markers fully visible"},{title:"Curves should have sufficient margin",description:"The curves should have sufficient margin between them, overlapping or close lines are hard to interpret"},{title:"Markers shoud not be too far or close",description:"Scanning works best from a distance of 0.5 meters from the piece of paper. For best the best result try to scan the paper as close to parallel as possible"},{title:"Drawing with dark pen",description:"To recognise your level curves, we prefer a dark and thic pen. Using a lighter pen will result in inaccurate results"},{title:"Propper lighting",description:"Level curves are hard to distinguish from background in a low light setting. Try to use natual daylight or a propper ceiling light for best results."},{title:"Close your curves",description:"To avoid false readings, close your curves as much as possible"},{title:"Only one paper should be visible",description:"To avoid false readings, only one paper should be visible at a time"}];function L(l,e,s){const t=l.slice();return t[0]=e[s],t}function j(l){let e,s,t=l[0].title+"",o,n,r,a=l[0].description+"",i,d;return{c(){e=b("div"),s=b("div"),o=E(t),n=V(),r=b("div"),i=E(a),d=V(),this.h()},l(c){e=$(c,"DIV",{class:!0});var u=k(e);s=$(u,"DIV",{class:!0});var _=k(s);o=I(_,t),_.forEach(f),n=D(u),r=$(u,"DIV",{class:!0});var h=k(r);i=I(h,a),h.forEach(f),d=D(u),u.forEach(f),this.h()},h(){w(s,"class","title svelte-gtu1r1"),w(r,"class","description"),w(e,"class","instruction svelte-gtu1r1")},m(c,u){y(c,e,u),p(e,s),p(s,o),p(e,n),p(e,r),p(r,i),p(e,d)},p:S,d(c){c&&f(e)}}}function ue(l){let e,s,t,o,n,r,a,i,d,c=F,u=[];for(let _=0;_<c.length;_+=1)u[_]=j(L(l,c,_));return{c(){e=b("div"),s=b("h2"),t=E("Good example of contour map"),o=V(),n=b("div"),r=V(),a=b("h2"),i=E("Instructions"),d=V();for(let _=0;_<u.length;_+=1)u[_].c();this.h()},l(_){e=$(_,"DIV",{class:!0});var h=k(e);s=$(h,"H2",{});var m=k(s);t=I(m,"Good example of contour map"),m.forEach(f),o=D(h),n=$(h,"DIV",{class:!0}),k(n).forEach(f),r=D(h),a=$(h,"H2",{});var H=k(a);i=I(H,"Instructions"),H.forEach(f),d=D(h);for(let z=0;z<u.length;z+=1)u[z].l(h);h.forEach(f),this.h()},h(){w(n,"class","example svelte-gtu1r1"),w(e,"class","instructions svelte-gtu1r1")},m(_,h){y(_,e,h),p(e,s),p(s,t),p(e,o),p(e,n),p(e,r),p(e,a),p(a,i),p(e,d);for(let m=0;m<u.length;m+=1)u[m].m(e,null)},p(_,[h]){if(h&0){c=F;let m;for(m=0;m<c.length;m+=1){const H=L(_,c,m);u[m]?u[m].p(H,h):(u[m]=j(H),u[m].c(),u[m].m(e,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=c.length}},i:S,o:S,d(_){_&&f(e),ee(u,_)}}}class fe extends P{constructor(e){super(),A(this,e,null,ue,O,{})}}const de=l=>({loading:l&2,stream:l&1}),J=l=>({loading:l[1],stream:l[0]});function _e(l){let e;const s=l[3].default,t=Y(s,l,l[2],J);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,[n]){t&&t.p&&(!e||n&7)&&Z(t,s,o,o[2],e?Q(s,o[2],n,de):K(o[2]),J)},i(o){e||(g(t,o),e=!0)},o(o){v(t,o),e=!1},d(o){t&&t.d(o)}}}function me(l,e,s){let{$$slots:t={},$$scope:o}=e,n,r=!0;const a=async()=>{try{s(1,r=!0),s(0,n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})),s(1,r=!1)}catch(i){console.log(i)}};return te(async()=>{await a()}),se(()=>{!n||n.getTracks().forEach(i=>i.stop())}),l.$$set=i=>{"$$scope"in i&&s(2,o=i.$$scope)},[n,r,o,t]}class pe extends P{constructor(e){super(),A(this,e,me,_e,O,{})}}function he(l){let e;return{c(){e=b("video"),this.h()},l(s){e=$(s,"VIDEO",{style:!0,class:!0}),k(e).forEach(f),this.h()},h(){w(e,"style",l[1]),w(e,"class","svelte-1oki8pp")},m(s,t){y(s,e,t),l[6](e)},p(s,t){t&2&&w(e,"style",s[1])},i:S,o:S,d(s){s&&f(e),l[6](null)}}}function ge(l){let e;const s=l[5].default,t=Y(s,l,l[4],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,n){t&&t.m(o,n),e=!0},p(o,n){t&&t.p&&(!e||n&16)&&Z(t,s,o,o[4],e?Q(s,o[4],n,null):K(o[4]),null)},i(o){e||(g(t,o),e=!0)},o(o){v(t,o),e=!1},d(o){t&&t.d(o)}}}function ve(l){let e,s,t,o;const n=[ge,he],r=[];function a(i,d){return i[2]?0:1}return e=a(l),s=r[e]=n[e](l),{c(){s.c(),t=M()},l(i){s.l(i),t=M()},m(i,d){r[e].m(i,d),y(i,t,d),o=!0},p(i,[d]){let c=e;e=a(i),e===c?r[e].p(i,d):(G(),v(r[c],1,1,()=>{r[c]=null}),R(),s=r[e],s?s.p(i,d):(s=r[e]=n[e](i),s.c()),g(s,1),s.m(t.parentNode,t))},i(i){o||(g(s),o=!0)},o(i){v(s),o=!1},d(i){r[e].d(i),i&&f(t)}}}function be(l,e,s){let{$$slots:t={},$$scope:o}=e,{stream:n}=e,{style:r=""}=e,{loading:a=!0}=e,{videoSource:i=void 0}=e;function d(c){U[c?"unshift":"push"](()=>{i=c,s(0,i),s(3,n),s(2,a)})}return l.$$set=c=>{"stream"in c&&s(3,n=c.stream),"style"in c&&s(1,r=c.style),"loading"in c&&s(2,a=c.loading),"videoSource"in c&&s(0,i=c.videoSource),"$$scope"in c&&s(4,o=c.$$scope)},l.$$.update=()=>{l.$$.dirty&13&&n&&!a&&i&&(s(0,i.srcObject=n,i),i.play())},[i,r,a,n,o,t,d]}class x extends P{constructor(e){super(),A(this,e,be,ve,O,{stream:3,style:1,loading:2,videoSource:0})}}function $e(l){let e,s,t;function o(r){l[6](r)}let n={style:"border-radius: 1rem;",loading:l[8],stream:l[9],$$slots:{default:[ye]},$$scope:{ctx:l}};return l[1]!==void 0&&(n.videoSource=l[1]),e=new x({props:n}),U.push(()=>oe(e,"videoSource",o)),{c(){T(e.$$.fragment)},l(r){C(e.$$.fragment,r)},m(r,a){N(e,r,a),t=!0},p(r,a){const i={};a&256&&(i.loading=r[8]),a&512&&(i.stream=r[9]),a&1024&&(i.$$scope={dirty:a,ctx:r}),!s&&a&2&&(s=!0,i.videoSource=r[1],ne(()=>s=!1)),e.$set(i)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){v(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function ke(l){let e,s;return e=new fe({}),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){N(e,t,o),s=!0},p:S,i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function ye(l){let e,s;return{c(){e=b("h1"),s=E("loading...")},l(t){e=$(t,"H1",{});var o=k(e);s=I(o,"loading..."),o.forEach(f)},m(t,o){y(t,e,o),p(e,s)},p:S,d(t){t&&f(e)}}}function we(l){let e,s,t,o;const n=[ke,$e],r=[];function a(i,d){return i[0]?0:1}return e=a(l),s=r[e]=n[e](l),{c(){s.c(),t=M()},l(i){s.l(i),t=M()},m(i,d){r[e].m(i,d),y(i,t,d),o=!0},p(i,d){let c=e;e=a(i),e===c?r[e].p(i,d):(G(),v(r[c],1,1,()=>{r[c]=null}),R(),s=r[e],s?s.p(i,d):(s=r[e]=n[e](i),s.c()),g(s,1),s.m(t.parentNode,t))},i(i){o||(g(s),o=!0)},o(i){v(s),o=!1},d(i){r[e].d(i),i&&f(t)}}}function Se(l){let e,s,t;return s=new x({props:{loading:l[8],stream:l[9]}}),{c(){e=b("div"),T(s.$$.fragment),this.h()},l(o){e=$(o,"DIV",{slot:!0});var n=k(e);C(s.$$.fragment,n),n.forEach(f),this.h()},h(){w(e,"slot","background")},m(o,n){y(o,e,n),N(s,e,null),t=!0},p(o,n){const r={};n&256&&(r.loading=o[8]),n&512&&(r.stream=o[9]),s.$set(r)},i(o){t||(g(s.$$.fragment,o),t=!0)},o(o){v(s.$$.fragment,o),t=!1},d(o){o&&f(e),B(s)}}}function X(l){let e,s,t,o;return e=new q({props:{secondary:!0,icon:re,$$slots:{default:[Ee]},$$scope:{ctx:l}}}),e.$on("click",l[4]),t=new q({props:{icon:le,$$slots:{content:[Ve],default:[Ie]},$$scope:{ctx:l}}}),t.$on("click",l[5]),{c(){T(e.$$.fragment),s=V(),T(t.$$.fragment)},l(n){C(e.$$.fragment,n),s=D(n),C(t.$$.fragment,n)},m(n,r){N(e,n,r),y(n,s,r),N(t,n,r),o=!0},p(n,r){const a={};r&1024&&(a.$$scope={dirty:r,ctx:n}),e.$set(a);const i={};r&1024&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i(n){o||(g(e.$$.fragment,n),g(t.$$.fragment,n),o=!0)},o(n){v(e.$$.fragment,n),v(t.$$.fragment,n),o=!1},d(n){B(e,n),n&&f(s),B(t,n)}}}function Ee(l){let e;return{c(){e=E("Read scan instructions")},l(s){e=I(s,"Read scan instructions")},m(s,t){y(s,e,t)},d(s){s&&f(e)}}}function Ie(l){let e,s;return{c(){e=b("span"),s=E("No keystones found")},l(t){e=$(t,"SPAN",{});var o=k(e);s=I(o,"No keystones found"),o.forEach(f)},m(t,o){y(t,e,o),p(e,s)},p:S,d(t){t&&f(e)}}}function Ve(l){let e,s;return{c(){e=b("span"),s=E("To recognize the level curves, we need to have 3 markers visible"),this.h()},l(t){e=$(t,"SPAN",{slot:!0});var o=k(e);s=I(o,"To recognize the level curves, we need to have 3 markers visible"),o.forEach(f),this.h()},h(){w(e,"slot","content")},m(t,o){y(t,e,o),p(e,s)},p:S,d(t){t&&f(e)}}}function De(l){let e,s,t=!l[0]&&X(l);return{c(){e=b("div"),t&&t.c(),this.h()},l(o){e=$(o,"DIV",{slot:!0});var n=k(e);t&&t.l(n),n.forEach(f),this.h()},h(){w(e,"slot","footer")},m(o,n){y(o,e,n),t&&t.m(e,null),s=!0},p(o,n){o[0]?t&&(G(),v(t,1,1,()=>{t=null}),R()):t?(t.p(o,n),n&1&&g(t,1)):(t=X(o),t.c(),g(t,1),t.m(e,null))},i(o){s||(g(t),s=!0)},o(o){v(t),s=!1},d(o){o&&f(e),t&&t.d()}}}function Te(l){let e,s;return e=new ie({props:{title:l[3],closeButton:l[0],$$slots:{footer:[De],background:[Se],default:[we]},$$scope:{ctx:l}}}),e.$on("close",l[4]),{c(){T(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){N(e,t,o),s=!0},p(t,o){const n={};o&8&&(n.title=t[3]),o&1&&(n.closeButton=t[0]),o&1795&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(t){s||(g(e.$$.fragment,t),s=!0)},o(t){v(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ce(l){let e,s,t,o;return e=new pe({props:{$$slots:{default:[Te,({loading:n,stream:r})=>({8:n,9:r}),({loading:n,stream:r})=>(n?256:0)|(r?512:0)]},$$scope:{ctx:l}}}),{c(){T(e.$$.fragment),s=V(),t=b("canvas"),this.h()},l(n){C(e.$$.fragment,n),s=D(n),t=$(n,"CANVAS",{id:!0,style:!0}),k(t).forEach(f),this.h()},h(){w(t,"id","captureCanvas"),W(t,"display","none"),W(t,"position","absolute")},m(n,r){N(e,n,r),y(n,s,r),y(n,t,r),l[7](t),o=!0},p(n,[r]){const a={};r&1803&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){v(e.$$.fragment,n),o=!1},d(n){B(e,n),n&&f(s),n&&f(t),l[7](null)}}}function Ne(l,e,s){let t,o=!1,n,r;const a=()=>s(0,o=!o);function i(){const u=r.getContext("2d");console.log(n.videoWidth,n.videoHeight),s(2,r.height=n.videoHeight,r),s(2,r.width=n.videoWidth,r),u&&u.drawImage(n,0,0,r.width,r.height);const _=r.toDataURL("image/png");ae.set(_),ce("/scan/maptransform")}function d(u){n=u,s(1,n)}function c(u){U[u?"unshift":"push"](()=>{r=u,s(2,r)})}return l.$$.update=()=>{l.$$.dirty&1&&s(3,t=o?"Instructions":"Map Scanning")},[o,n,r,t,a,i,d,c]}class Ae extends P{constructor(e){super(),A(this,e,Ne,Ce,O,{})}}export{Ae as default};
